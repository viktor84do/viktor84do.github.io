raptor.defineClass("com.ebay.raptor.vi.utils.ScrollTrackingUtil",(function(){return{init:function(t){this.scrollElementsArray=this.getScrollElementsToTrack(t),this.trackArray=[],this.trackArray.push("VI_SCROLL_TRACKING"),this.trackScroll=this.trackElementsInView.bind(this),window.addEventListener("scroll",this.trackScroll,!1),window.addEventListener("beforeunload",this.publishTracking.bind(this),!1),window.addEventListener("load",this.trackScroll,!1)},trackElementsInView:function(){this.scrollElementsArray&&0<this.scrollElementsArray.length?this.scrollTracking():window.removeEventListener("scroll",this.trackScroll,!1)},publishTracking:function(){this.trackArray&&0<this.trackArray.length&&trackingUtil(this.trackArray)},scrollTracking:function(){for(var t,e=0;e<this.scrollElementsArray.length&&0<=e;e++){t=this.scrollElementsArray[e];var i=document.querySelector(t.split("|")[0]);t=t.split("|")[1],i&&""!==i.innerHTML&&null===i.getAttribute("data-viewed")&&t&&this.isElementInViewPort(i)&&(this.trackArray.push(t),i.setAttribute("data-viewed","true"),this.scrollElementsArray.splice(e,1),e--)}},isElementInViewPort:function(t){t=t.getBoundingClientRect();var e=window.innerHeight||document.documentElement.clientHeight;return(0<=t.top||t.height>=e)&&0<=t.left&&t.bottom<=e},getScrollElementsToTrack:function(t){var e=[];return t?(e.push(".compare-similar-item-wrapper|VI_SCROLL_TRACKING_COMPARE_MODULE"),t.isNoriEnabled?t.isActive?(e.push("#placement_html_101110|VI_SCROLL_TRACKING_101110"),e.push("#placement_html_101111|VI_SCROLL_TRACKING_101111"),e.push("#placement_html_101113|VI_SCROLL_TRACKING_101113"),e.push("#placement_html_101112|VI_SCROLL_TRACKING_101112"),e.push("#placement101110|VI_SCROLL_TRACKING_101110"),e.push("#placement101111|VI_SCROLL_TRACKING_101111"),e.push("#placement101112|VI_SCROLL_TRACKING_101112"),e.push("#placement101113|VI_SCROLL_TRACKING_101113")):(e.push("#placement_html_101121|VI_SCROLL_TRACKING_101121"),e.push("#placement_html_101123|VI_SCROLL_TRACKING_101123"),e.push("#placement_html_101124|VI_SCROLL_TRACKING_101124"),e.push("#placement_html_101120|VI_SCROLL_TRACKING_101120"),e.push("#placement101120|VI_SCROLL_TRACKING_101120"),e.push("#placement101121|VI_SCROLL_TRACKING_101121"),e.push("#placement101123|VI_SCROLL_TRACKING_101123"),e.push("#placement101124|VI_SCROLL_TRACKING_101124")):t.isActive?(e.push("#merch_html_100005|VI_SCROLL_TRACKING_SIMILAR_SPONSORED"),e.push("#merch_html_100008|VI_SCROLL_TRACKING_RELATED_SPONSORED"),e.push("#merch_html_100009|VI_SCROLL_TRACKING_100009"),e.push("#merch_html_100010|VI_SCROLL_TRACKING_100010"),e.push("#merch_html_100047|VI_SCROLL_TRACKING_100047"),e.push("#merch_html_100752|VI_SCROLL_TRACKING_100752"),e.push(".tabbable|SCROLL_TRACKING_TABBABLE")):(e.push("#merch_html_100011|VI_SCROLL_TRACKING_100011"),e.push("#merch_html_100012|VI_SCROLL_TRACKING_100012"),e.push("#merch_html_100013|VI_SCROLL_TRACKING_100013"),e.push("#merch_html_100035|VI_SCROLL_TRACKING_100035"),e.push("#merch_html_100036|VI_SCROLL_TRACKING_100036"),e.push("#merch_html_100037|VI_SCROLL_TRACKING_100037")),e):e}}})),raptor.defineModule("com.ebay.raptor.vi.AjaxUtil",(function(){return{getJSON:function(t,e,i,n,s){var r=null;t&&(r=$.getJSON(t+"&"+(s||"cb")+"=?",(function(){e&&e.apply(i,arguments)}))),r&&n&&r.always((function(){n.apply(i,arguments)}))},extractInlineCss:function(t){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)},loadScripts:function(t,e,i){t?i?$.ajax({url:e,dataType:"script",cache:!0,success:i}):$.ajax({url:e,dataType:"script",cache:!0}):((t=document.createElement("script")).type="text/javascript",t.text=e,document.getElementsByTagName("head")[0].appendChild(t))}}})),raptor.defineClass("ui.InlineFeedbackLink",(function(){return{init:function(){var t=$("#"+this._id);if("true"==t.find("#epconfigured").val()){var e,i=encodeURIComponent(t.find("#srvName").val()),n=t.find("#linkcontent").val();t.find("#surveylink").html(n),(n=t.find("#domSubmit")[0]).contentDocument?e=n.contentDocument:n.contentWindow?e=n.contentWindow.document:window.frames.domSubmit&&(e=window.frames.domSubmit.document),e&&(e.open(),n=t.find("#surveyDiv")[0],e.write(n.innerHTML),e.close()),(n=t.find("#surveytld").val())&&"null"!=n&&"undefined"!=n||(n=0>(n=location.hostname.lastIndexOf("."))?"com":location.hostname.substring(n+1,location.hostname.length)),n="https://qu.ebay."+n+"/survey?srvName=",e.getElementById("surveyForm").setAttribute("action",n+i),t.find("#surveylink").click((function(){var t="<html>"+(t=document.getElementsByTagName("html")[0].innerHTML)+"</html>";e.getElementById("domContent").value=encodeURIComponent(t),e.getElementById("pageUrlHidden").value=encodeURIComponent(location.href);t=Math.round((screen.height-800)/2);var i=Math.round((screen.width-800)/2);window.open("","eBaySurvey","top="+t+",left="+i+",height=800px,width=800px,toolbar=no,menubar=no,scrollbars=yes, resizable=no,location=no, status=no"),e.getElementById("surveyForm").submit()}))}}}})),raptor.defineClass("ebay.viewItem.Incentives",(function(){return{init:function(t){this.conf=t,this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.pubsub=raptor.require("pubsub"),t.isRewardsCall&&this.makeRewardsCall()},makeRewardsCall:function(){var t=this.conf;t.rewardsUrl&&this.ajaxRequest(t.rewardsUrl+"&item="+t.itemId+"&cguid="+t.cguid)},ajaxRequest:function(t){this.ajaxUtil.getJSON(t,this.processResponse,this)},processResponse:function(t){var e=this.conf;if(t){if(t.css&&this.ajaxUtil.extractInlineCss(t.css),!t.eBayIncentiveOfferMsg){if(e.isShowNectarPoints||e.isShowVoucher?(t.nectarMainMsg&&this.paintHtml(t.nectarMainMsg,e.rewardsDiv),t.nectarOverlayContent&&($("#vi-inc-nector-msg").html(t.nectarOverlayContent),this.pubsub.publish("_BIND_OLAY",{cmpId:"vi-inc-nector-msg-oly",trigger:"nectarDetails"})),t.voucherOverlayContent&&($("#vi-inc-nector-voucher-msg").html(t.voucherOverlayContent),this.pubsub.publish("_BIND_OLAY",{cmpId:"vi-inc-nector-voucher-msg-oly",trigger:"vouchershowmehow"}))):t.ebayBucksMsg&&e.isRewardsJSON&&this.paintHtml(t.ebayBucksMsg,e.rewardsDiv),t.bmlPromotionMsg){var i=t.bmlPromotionMsg.replace('/aw/pics/payments/bml/logoBML_77x18.gif" height="18" width="77"','/aw/pics/logos/logoPaypalCredit_160x55.png" height" height="29" width="82"',"g");this.paintHtml(i,e.bmlDiv),i=$(".bmloff_cont").html(),this.paintHtml(i,e.ppcDiv)}t.ebayIncentivesMsg&&(this.paintHtml(t.ebayIncentivesMsg.replace('id="couponshowmehow"','id="couponshowmehow" role="button"'),e.couponDiv),t.ebayOverlayIncentiveMsg&&($("#vi-inc-coupn-msg").html(t.ebayOverlayIncentiveMsg),this.pubsub.publish("_BIND_OLAY",{cmpId:"vi-inc-cpn-msg",trigger:"couponshowmehow"})))}(t.bmlPromotionMsg||t.ebayIncentivesMsg||t.ebayBucksMsg||t.nectarMainMsg)&&(this.showIncentivesDiv(),$(document).trigger("vi_modules_loaded",["vi_loy",!0])),this.pubsub.publish("_INCENTIVES_RETURNED"),this.attachIncentivesClickEvents()}},paintHtml:function(t,e){$("#"+e).html(t)},showIncentivesDiv:function(){$("#"+this.conf.incentiveDiv).show()},attachIncentivesClickEvents:function(){var t=this;$("#downArrow").click((function(){t.toggleRewardsDetailsDiv()})),$("#upArrow").click((function(){t.toggleRewardsDetailsDiv()})),$("#rwrdMoreLnk").click((function(){t.toggleRewardsDetailsDiv()}))},toggleRewardsDetailsDiv:function(){$("#textDiv").toggle(),$("#detailsDiv").toggle()}}})),raptor.defineModule("com.ebay.raptor.vi.SMEUtil",(function(){return{init:function(t){this.conf=t},processResponse:function(t,e){if(e){var i=raptor.require("com.ebay.raptor.vi.AjaxUtil");i&&(this.loadCss(e,i),this.loadHtml(e),this.loadScript(e,i),$(window).trigger("resize"),$(document).trigger("vi_modules_loaded",["vi_sme",!0]))}},loadHtml:function(t){var e=this.conf;t.nodes&&0<t.nodes.length&&(t.nodes[0]&&(2==e.bannerPosition?$("#sme_module_placement_2").html(t.nodes[0]):$("#promotionsCntr").html(t.nodes[0])),t.nodes[1]&&(e.isShowRedesignBanner?($("#AdPanel").css("height","auto"),$("#AdPanel").html(t.nodes[1])):$("#vi_sme_prmts_bnr_cntr").html(t.nodes[1])))},loadCss:function(t,e){if(t.styles&&0<t.styles.length)for(var i=0;i<t.styles.length;i++){var n=t.styles[i];n.rules?e.extractInlineCss(n.rules):n.href&&$("<link/>",{rel:"stylesheet",type:"text/css",href:n.href}).appendTo("head")}},loadScript:function(t,e){if(t.scripts&&0<t.scripts.length)for(var i=0;i<t.scripts.length;i++){var n=t.scripts[i];n.src?e.loadScripts(!0,n.src):n.text&&e.loadScripts(!1,n.text)}}}})),raptor.defineModule("com.ebay.raptor.vi.SMEBanner",(function(){return{init:function(){$("a.smeOfferMsg, a.smeOfferLink").on("click",(function(){var t={};t.sid=$(this).is(".smeOfferMsg")?"p2047675.m2197.l9090":"p2047675.m2197.l9091",t.itemid=this.dataset.itemid,t.boid=this.dataset.boid,t.boty=this.dataset.boty,$(document).trigger("rover",t)})),$(".vi-auth-content .vi-auth-link").on("click",(function(){trackingUtil("VI_AUTH_LEARN_MORE")}))}}})),raptor.defineClass("ebay.viewItem.sme",(function(){return{init:function(t){var e=this;e.conf=t,e.pubsub=raptor.require("pubsub"),e.pubsub&&e.pubsub.subscribe("SME_BIN_INTERRUPT",(function(t){e.triggerSMEBinInterruptLayer(t)}),e),t.url&&e.makePromotionsCall()},makePromotionsCall:function(){$.ajax({url:this.getURLWithLayoutParams()+"&cb=this.raptor.require('com.ebay.raptor.vi.SMEUtil').processResponse",dataType:"script",async:!0,context:this})},getURLWithLayoutParams:function(){var t=this.conf,e="1200",i="940";return t.redesign?e=i=parseInt($("body").css("width")):(e=parseInt($("#Body").css("max-width")),i=parseInt($("#Body").css("min-width"))),t.url+"&minw="+i+"&maxw="+e},triggerSMEBinInterruptLayer:function(t){var e=this.conf;"true"==$("#sme_vi_interrupt_inp").attr("value")?(this.intLayerEvtBinded||this.bindInterruptLayerEvents(t),this.pubsub.publish("_OPEN_OLAY",{cmpId:e.binIntLayerId})):this.pubsub.publish("BYPASS_SME_BIN_INTERRUPT",{binBtnId:t.binBtnId,isSMEInterrupt:!1})},bindInterruptLayerEvents:function(t){var e=this,i=e.conf;$("#"+i.binIntLayerBinLnkId).bind("click",(function(){e.pubsub.publish("BYPASS_SME_BIN_INTERRUPT",{binBtnId:t.binBtnId,isSMEInterrupt:!1})})),$("#"+i.binIntLayerClsBtnId).bind("click",(function(){e.pubsub.publish("_CLOSE_OLAY",{cmpId:i.binIntLayerId})})),e.intLayerEvtBinded=!0}}})),raptor.defineClass("ebay.viewItem.AddToWatchLink",(function(){return{init:function(t){var e=this;e.conf=t,e.pubsub=raptor.require("pubsub"),e.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),e.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),e.pubsub&&e.pubsub.subscribe(e.msgs("ADD_TO_WATCH_BTN"),(function(t){e.toggleWatchLink(t.status)}),e),e.attachClickEvent()},toggleWatchLink:function(t){var e=this.conf;t?($("#"+e.linkTopId).css("display","none"),$(".vi-watch-pipe").css("display","none")):($("#"+e.linkTopId).css("display","inline"),$(".vi-watch-pipe").css("display","inline"),!1===t&&$("#"+e.linkTopId+" a").focus())},attachClickEvent:function(){var t=this;$("#"+t.conf.linkTopId).click((function(){return t.makeWatchRequest(),!1}))},makeWatchRequest:function(){var t=this.conf;!t.userSignedIn&&t.ended&&(top.location.href=t.addToWatchUrl),window&&window.$ItemContext&&window.$ItemContext.isVimBuyBox&&t&&!t.userHasList?document.dispatchEvent(new CustomEvent("ux__x-watch-action__proxy-watch-click",{detail:{status:!0,addRequest:!0}})):this.pubsub.publish(this.msgs("ADD_TO_WATCH_LNK"),{status:!0,addRequest:!0,watchLink:t.addToWatchUrl})}}})),raptor.defineClass("raptor.vi.BestOffer",(function(){return{init:function(t){var e=this;e.cfg=t,e.pubsub=raptor.require("pubsub"),e.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),e.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),e.pubsub&&(e.pubsub.subscribe(e.msgs("BEST_OFFER_SVC_ID"),(function(t){e.show(t)}),this),e.pubsub.subscribe(e.msgs("REVIEW_OFFER_SVC_ID"),(function(){e.openOly(t.mngQkBoUrl)}),this),e.pubsub.channel(t.boOlyId).subscribe("_OLY_CLS_SVC",(function(){e.onClose()}),e)),t.boOnLoad&&!t.isVimBuyboxModuleRequested&&$(document).ready((function(){e.openOly(t.mkQkBoUrl)}))},openOly:function(t){this.pubsub.publish("_OPEN_OLAY",{cmpId:this.cfg.boOlyId}),this.buildUrl(t)},show:function(t){var e=this.cfg;if(this.msg=t,e.mkQkBoSiUrl)return this.reloadParent(e.mkQkBoSiUrl),!1;this.pubsub.publish("_OPEN_OLAY",{cmpId:e.boOlyId}),this.buildUrl("t"==e.isRO?e.mngQkBoUrl:e.mkQkBoUrl)},buildUrl:function(t){var e,i=this.cfg;void 0!==this.msg&&(e=""!==this.msg.vQty?this.msg.vQty:""),""!==e&&(t+="&quantity="+e),i.pgVal&&(t+="&pgv="+i.pgVal),this.request(t)},request:function(t){this.ajaxUtil.getJSON(t,this.response,this)},response:function(t){var e=this.cfg;if(t){if("REDIRECT"==t.status)return this.reloadParent(t.redirectUrl),!1;"SUCCESS"==t.status&&(t.cssUrls&&""!==t.cssUrls[0]?this.loadCss(t,e,this.handleJs):this.handleJs(t))}},loadCss:function(t,e,i){var n=this,s=(e=$("#"+e.boTrbrId),document.createElement("link"));s.type="text/css",s.rel="stylesheet",s.href=t.cssUrls[0],document.getElementsByTagName("head")[0].appendChild(s),$.browser.msie&&8>=parseInt($.browser.version,10)&&e.addClass("js").removeClass("js"),(e=document.createElement("img")).onerror=function(){i&&i(t,n)},e.src=t.cssUrls[0]},handleJs:function(t,e){var i;t.js&&""!==t.js&&((i=document.createElement("script")).type="text/javascript",i.text=t.js,document.getElementsByTagName("head")[0].appendChild(i)),e.handleBOResponse(t)},reloadParent:function(t){var e;void 0!==this.msg&&(e=""!==this.msg.vQty?this.msg.vQty:""),void 0!==e&&""!==e&&(t+="%26quantity="+e),top.location.href=t},handleBOResponse:function(t){var e=this.cfg,i=$("#"+e.boTrbrId),n=$("#"+e.boCntId);t.html&&""!==t.html&&n&&(i.hide(),n.html(t.html),this.pubsub.publish("_OPEN_OLAY",{cmpId:e.boOlyId})),handleBOLyrResponse(t)},onClose:function(){var t=(t=(t=(t=window.location.href).replace(/&*boolp=1/,"")).replace(/&*autorefresh=true/,""))+(-1!=t.indexOf("?")?"&autorefresh=true":"?autorefresh=true");top.location=t}}})),raptor.defineClass("com.ebay.raptor.vi.bid.BidLayer",(function(){return{init:function(t){var e=raptor.require("pubsub");e&&(e.subscribe(t.svcId,(function(e){if(e&&!e.isRedirect&&(e=this.getChild(t.overlayId))){e.show();try{$("#"+t.overlayId).parent().css("marginTop","-50px"),$("#"+t.overlayId).parent().parent().siblings(".clz").css("marginTop","-15px")}catch(t){}}}),this),t.openOnLoad&&$(document).ready((function(){e.publish(t.invokeClkId,{})})))}}})),raptor.defineClass("com.ebay.raptor.vi.bid.BidUtil",(function(){var t=function(){};return t.getItemData=function(t){var e;return t&&t[0]&&t[0].ViewItemLiteResponse&&t[0].ViewItemLiteResponse.Item&&t[0].ViewItemLiteResponse.Item[0]&&((e=t[0].ViewItemLiteResponse.Item[0]).isAutoRefresh=!0),e},t.timeLeftV=function(t){var e;return t&&(e={day:(e=function(t){var e=0;return t&&(e=parseInt(t),e=isNaN(e)?0:e),e})(t.DaysLeft),hour:e(t.HoursLeft),minute:e(t.MinutesLeft),second:e(t.SecondsLeft)}),e},t.secondsLeftFromEndTime=function(t){if(t)return Math.floor((t-Date.now())/1e3)},t.timeLeftVFromEndTime=function(e){var i=t.secondsLeftFromEndTime(e);return{day:Math.max(Math.floor(i/86400),0),hour:Math.max(Math.floor(i%86400/3600),0),minute:Math.max(Math.floor(i%3600/60),0),second:i=Math.max(Math.floor(i%60),0),endTime:e}},t.timeLeftFormat=function(e,i,n,s){var r,a,o,l="";if(e)return r=e.day,a=e.hour,o=e.minute,e=e.second,0<r?(n=1===r?i.dayTxt:i.dayCharTxt,l+=t.appendTime(r,n,!(!s||1!==r)),(0<a||s&&0===a)&&(i=1===r?1===a?i.hourTxt:i.hoursTxt:i.hourCharTxt,l=s?l+t.appendTime(a,i,1===r,1===r?null:10,1<r&&0===a):l+t.appendTime(a,i,!1))):(l=n?l+(t.appendTime(a,i.hourCharTxt,!1,10,!1).trim()+t.appendTime(o,i.minuteCharTxt,!1,10,!1).trim()+t.appendTime(e,i.secondCharTxt,!1,10,!0).trim()):l+(t.appendTime(a,i.hourCharTxt,!1)+t.appendTime(o,i.minuteCharTxt,!1,s&&1<=a&&0===o?0:null,!!(s&&1<=a&&0===o))+t.appendTime(e,i.secondCharTxt,!1,null,!0)),(3>=a||n)&&$("#"+i.cssElemId).addClass(i.css)),l},t.appendTime=function(t,e,i,n,s){return i=i?" ":"",(t||0===t&&s)&&!isNaN(t)&&(!s&&0<t||s)&&e?(n&&t<n&&(t="0"+t),t+=i+$("#"+e).html()+" "):""},t.decrementOneSec=function(t){var e,i,n;return t&&(day=t.day||0,e=t.hour||0,i=t.minute||0,0<(n=t.second||0)?n-=1:0===n&&0<i?(i-=1,n=59):0===n&&0===i&&0<e?(e-=1,n=i=59):0===e&&0===n&&0===i&&0<day&&(day-=1,e=23,n=i=59),t.second=n,t.minute=i,t.hour=e,t.day=day),t},t.convertToSeconds=function(t){var e=0;return t&&(e=86400*(e=t.day||0)+3600*(t.hour||0)+60*(t.minute||0)+(t=t.second||0)),e},t.preload=function(t){$(t).each((function(){$("<img/>")[0].src=this}))},t})),raptor.defineClass("com.ebay.raptor.vi.bid.Bid",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.util=raptor.require("com.ebay.raptor.vi.bid.Util"),e.bidUtil=raptor.require("com.ebay.raptor.vi.bid.BidUtil"),e.bidTimeLeft={},e.cfg=t,e.cfg.isGsp=!1,e.isBidTextDirty=!1,e.pubsub&&(e.pubsub.subscribe(t.svcId,(function(t){e.bidClick(t)}),e),e.pubsub.subscribe(t.counterSvcId,(function(t){e.timeCounter(t)}),e),e.pubsub.subscribe(t.autoRefreshSvcId,(function(t){e.autoRefresh(t)}),e))},timeCounter:function(){var t;this.bidUtil&&this.overlay&&this.overlay.showing&&(t=this.bidUtil.decrementOneSec(this.getBidTimeLeft()),this.updateTimeLeft(t,!0))},startCounter:function(t,e,i){var n=this.cfg;e={TimeLeft:t,AccessedDate:e,ViewerItemRelation:i,DetailLevel:n.detailLevel};this.setBidTimeLeft(t),this.pubsub&&this.pubsub.publish(n.counterStartSvcId,e)},autoRefresh:function(t){t&&this.overlay&&this.overlay.showing&&this.processResponse(t)},bidVars:function(){var t=this.cfg;this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.BidStatus=raptor.require("com.ebay.raptor.vi.bid.enums.BidStatus"),this.BidError=raptor.require("com.ebay.raptor.vi.bid.enums.BidError"),this.BidderStatus=raptor.require("com.ebay.raptor.vi.bid.enums.BidderStatus"),this.button=this.getChild(t.bidBtnId),this.statusMsg=this.getChild(t.statusMsgId),this.overlay=this.getParent(t.overlayId)},toggleBidEvt:function(t,e){var i,n,s=this,r=s.cfg,a=r.enterBidId+r.value;e?(s.util.enablDisableBtn(s.button,!0),$("#"+r.bidBtnId+r.btn).unbind("click.Bid"),$("#"+a).unbind("keypress.Bid"),s.isBidTextDirty=!1):(i=function(){s.triggerCall(t,a)},n=function(e){s.util.isEnterKey(e)&&s.triggerCall(t,a)},s.util.enablDisableBtn(s.button,!1),$("#"+r.bidBtnId+r.btn).bind("click.Bid",i),$("#"+a).bind("keypress.Bid",n))},subscribeOlyClose:function(){var t=this,e=t.cfg;if(t.overlay){var i=t.overlay.conf;i&&i.closeSvcId&&(t.olyCloseHandle=t.pubsub.channel(e.overlayId).subscribe(i.closeSvcId,(function(){t.layerCleanUp(e.isRefreshOnClose,e.refreshUrl)}),t))}},updateCurrBid:function(t,e,i){var n=this.cfg;t&&(this.util.displayContent(n.curBidId,t.MoneyStandard,n.value,n.wrapper),i&&$("#"+n.curBidId+n.lable).html(i)),this.updateApprox(e,n.curBidId)},updateApprox:function(t,e){var i,n=this.cfg;t&&t.MoneyStandard&&e&&(i=$("#"+n.approxTxt).html().replace(n.dummy,t.MoneyStandard),$("#"+e+n.approx).html(i).show())},setBidTimeLeft:function(t){self.bidTimeLeft=t},getBidTimeLeft:function(){return self.bidTimeLeft},updateCurrency:function(t){var e=this.cfg;t&&$("#"+e.enterBidId+e.currencyId).html(t)},closeLayer:function(){this.overlay&&this.overlay.hide()},bidClick:function(){},triggerCall:function(){},processResponse:function(){},updateTimeLeft:function(){},layerCleanUp:function(){},removeMaxBidParam:function(t){if(t){var e=t.indexOf("?maxbid"),i=t.indexOf("&maxbid"),n=t.lastIndexOf("&");if(-1!==e)return 0===(n=(n=t.substr(e+1)).indexOf("&")+1)?t.substr(0,e):t.substr(0,e+1)+t.substr(e+n+1,t.length);if(-1!==i)return i==n?t.substr(0,i):(n=(n=t.substr(i+1)).indexOf("&")+1,t.substr(0,i)+t.substr(i+n,t.length))}return t}}})),raptor.defineClass("com.ebay.raptor.vi.bid.Counter",(function(){return{init:function(t){var e,i=this;i.cfg=t,t.scheduledEndDate&&(i.setEndTime(Number(t.scheduledEndDate)),i.cfg.timerStopSvcId||(i.cfg.timerStopSvcId="TIMER_SVC_STOP_ID")),i.viewerItemRelationMap={NONE:0,OUTBIDDER:5,HIGHBIDDER:2},i.autoRefreshTime=0,i.pubsub=raptor.require("pubsub"),i.bidUtil=raptor.require("com.ebay.raptor.vi.bid.BidUtil"),i.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),i.accessedDate=t.accessedDate,i.viewerItemRelation=t.viewerItemRelation,i.detailLevel=t.detailLevel,i.secondsLeft=0,i.pubsub.subscribe(t.timerSvcId,(function(t){i.triggerAutoRefresh(t)}),i),i.pubsub.subscribe(t.counterStartSvcId,(function(t){i.callStart(t)}),i),i.pubsub.subscribe(t.counterStopSvcId,(function(){i.stop()}),i),i.pubsub.subscribe("_DESTROY_BID_TIMER",(function(){i.stop()})),(0<t.timeLeftInMins||0<t.timeLeftInSec)&&(t.isUrgencyHigh||t.isUrgencyMedHigh||t.enableAFAlways)&&(t.enableAFAlways&&i.triggerAutoRefresh(),e=i.getEndTime()?i.bidUtil.timeLeftVFromEndTime(i.getEndTime()):{minute:t.timeLeftInMins,second:t.timeLeftInSec},$(window).ready((function(){i.start(e),$(window).on("focus",(function(){i.pubsub.publish(t.timerSvcId,{})}))}))),i.busy=!1,i.isSSEEnaInBrowser=!1,i.sseVal=i.cfg.sseVal?i.cfg.sseVal:0,i.sseOpen=!1,i.doTimeeRangeBroadcast=!1,0<i.sseVal&&(i.timeRangeBroadcast=t.timeRangeBroadcast?t.timeRangeBroadcast:0,i.isSSEEnaInBrowser=i.isSSEEnabledInBrowser(),i.timeRangeBroadcast&&(i.doTimeeRangeBroadcast=!!i.isSSEEnaInBrowser,i.pubsub.subscribe("_STOP_TIME_RANGE_REACHED",(function(){i.doTimeeRangeBroadcast=!1}),i),1<i.sseVal&&i.pubsub.subscribe("_SSE_RESPONSE",(function(t){i.triggerAutoRefresh(t)}),i),i.pubsub.subscribe("_BID_SSE_OPENED",(function(){i.sseOpen=!0}),i),i.pubsub.subscribe("_BID_SSE_CLOSED",(function(){i.resetSSE()}),i),i.pubsub.subscribe("_BID_SSE_ERROR",(function(){i.resetSSE()}),i)))},callStart:function(t){var e;t&&(this.accessedDate=t.AccessedDate||this.accessedDate,t.ViewerItemRelation&&this.viewerItemRelationMap&&(e=this.viewerItemRelationMap[t.ViewerItemRelation]),this.viewerItemRelation=e||this.viewerItemRelation,this.detailLevel=t.DetailLevel||this.detailLevel,this.start(t.TimeLeft))},start:function(t){var e=this,i=1e3;e.getEndTime()?(i=500,t=e.bidUtil.secondsLeftFromEndTime(e.getEndTime())):t=e.bidUtil.convertToSeconds(t),e.setSecondsLeft(t),e.isStartCounter(e.getSecondsLeft())?e.counterHandler||(e.counterHandler=window.setInterval((function(){e.counter()}),i)):e.stop()},stop:function(){var t=this.cfg;window.clearInterval(this.counterHandler),this.counterHandler=null,t.timerStopSvcId&&this.pubsub.publish(t.timerStopSvcId,{})},counter:function(){var t=this.getSecondsLeft()-1;this.getEndTime()&&(t=this.bidUtil.secondsLeftFromEndTime(this.getEndTime())),this.setSecondsLeft(t),this.autoRefreshTime++,this.doTimeeRangeBroadcast&&t<=this.timeRangeBroadcast&&this.pubsub.publish("_TIME_RANGE_REACHED",{}),this.isAutoRefresh(t)&&!this.isSSEActive()?this.triggerAutoRefresh():this.triggerCounterSvc(),0>=t&&((t=$("#vi-listing-ended"))&&0<t.length&&t.removeClass("hide"),this.stop())},triggerCounterSvc:function(){this.pubsub.publish(this.cfg.counterSvcId,{})},isStartCounter:function(t){var e=this.cfg;return!(!(this.getEndTime()?0<t:0!==t)||!(t<=60*e.counterStartFromInMins||e.enableAFAlways))},isAutoRefresh:function(t){var e,i,n,s,r,a,o=this.cfg;if(o.autoRefreshEnabled){if(0===t)return this.triggerCounterSvc(),!0;if(o.enableAFAlways){if(this.calCIntvl&&(a=Math.ceil(t/60),this.accInt=Math.round(Number(Math.pow(a,o.afIntervalPower))*o.afIntervalFraction),this.accInt<o.afIntervalResetValue&&(this.accInt=o.afIntervalResetValue),this.calCIntvl=!1),this.autoRefreshTime===this.accInt)return!0}else if(e=60*o.slowDurationInMins,i=o.slowIntervalInSecs,n=60*o.fastDurationInMins,s=o.fastIntervalInSecs,r=60*o.accelerateDurationInMins,a=Math.ceil(t/60),o=Math.round(Math.pow(o.accelerationBase,a)*o.accelerationRatio),t>n&&t<e&&this.autoRefreshTime===i||t<=r&&0==t%60||t<r&&t>n&&this.autoRefreshTime===o||t<=n&&this.autoRefreshTime>=s)return!0}return!1},triggerAutoRefresh:function(t){var e=this.cfg.autoRefreshURL;e&&!this.busy&&(this.busy=!0,e+=-1!==e.indexOf("?")?"&":"?",t&&t.sse?(this.sse=!0,e+=$.param({lastaccessed:this.accessedDate||"",lvr:this.viewerItemRelation,dl:this.detailLevel,sse:t.sse})):e+=$.param({lastaccessed:this.accessedDate||"",lvr:this.viewerItemRelation,dl:this.detailLevel}),this.triggerCall(e),this.autoRefreshTime=0,this.calCIntvl=!0)},triggerCall:function(t){this.clientRequestTime=Date.now(),this.ajaxUtil.getJSON(t,this.autoRefresh,this,this.alwaysCallback)},alwaysCallback:function(){this.busy=!1},autoRefresh:function(t,e,i){e=this.cfg,this.clientResponseTime=Date.now(),response=this.bidUtil.getItemData(t),this.busy=!1,response&&this.pubsub&&(response.TimeLeft&&this.getEndTime()&&(response.TimeLeft.endTime=this.getEndTime()),response.fastDurationInMins=e.fastDurationInMins,this.sse&&(response.sse=!0,this.sse=!1),this.pubsub.publish(e.autoRefreshSvcId,response),(e.isVIMBuyBox||e.isVIMStatusMessage&&("OUTBIDDER"===response.ViewerItemRelation||"HIGHBIDDER"===response.ViewerItemRelation))&&e.bidCount!==response.BidCount&&(e.bidCount=response.BidCount,document.dispatchEvent(new CustomEvent("ux-app__x-auto-refresh__triggerRefresh"))),t=i&&"function"==typeof i.getResponseHeader&&i.getResponseHeader("server-timing"),e.isDeltaTimerEnabled&&t&&document.dispatchEvent(new CustomEvent("ux-timer__update__delta",{detail:{delta:this.getDelta(t,this.clientRequestTime,this.clientResponseTime)}})))},getDelta:function(t,e,i){var n,s,r=0;return 2===(t=t.split(",")).length&&(n=parseInt(t[0].replace("time-start-epoch;dur=","")),s=parseInt(t[1].replace("time-end-epoch;dur=",""))),e&&i&&!isNaN(n)&&!isNaN(s)&&(r=(n-e+(s-i))/2),r},getSecondsLeft:function(){return this.secondsLeft},setSecondsLeft:function(t){return this.secondsLeft=0>t?0:t},setEndTime:function(t){self.endTime=t},getEndTime:function(){return self.endTime},isSSEActive:function(){return!(3!=this.sseVal||!this.sseOpen)},resetSSE:function(){this.busy=this.sseOpen=!1},isSSEEnabledInBrowser:function(){return"undefined"!=typeof EventSource}}})),raptor.defineClass("com.ebay.raptor.vi.bid.Util",(function(){var t=function(){};return t.updateStatusMsg=function(t,e){if(-1!==t&&e)switch(t){case 0:e.error();break;case 1:e.notice();break;case 2:e.warning();break;case 3:e.confirm()}},t.enablDisableBtn=function(t,e){t&&(e?t.disable():t.enable())},t.displayContent=function(t,e,i,n){t&&e&&($("#"+t+i).html(e),$("#"+t+n).show())},t.rmvEvt=function(t){if(t)for(var e=0,i=t.length;e<i;e++)t[e]&&$("#"+t[e]).unbind()},t.isEnterKey=function(t){return t&&13==t.keyCode},t.showHide=function(t,e){if(t)for(var i=0,n=t.length;i<n;i++)t[i]&&(e?$("#"+t[i]).show():$("#"+t[i]).hide())},t.helpPopup=function(t){var e=screen.width-430;return t&&(t=window.open(t,"help","width=420,height=550,scrollbars=yes,status=no,toolbar=no,location=no,resizable=yes,top=0,screenY=0,left="+e+",screenX="+e))&&t.focus(),!1},t})),raptor.defineEnum("com.ebay.raptor.vi.bid.enums.BidError","INVALID_BIDAMOUNT LOW_BIDAMOUNT INVALID_BIDAMOUNT_OF_HIGH_BIDDER BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT BID_GREATER_THAN_BIN DECSEP REDIRECT REFRESH AUCTION_ENDED OFFER_AMOUNT_ZERO".split(" ")),raptor.defineEnum("com.ebay.raptor.vi.bid.enums.BidStatus","PLACEBID REVIEWBID CONFIRMBID LEGAL ENDED ACTIVE".split(" ")),raptor.defineEnum("com.ebay.raptor.vi.bid.enums.BidderStatus",["OUTBIDDER","HIGHBIDDER"]),raptor.defineClass("com.ebay.raptor.vi.bid.oneclick.OneClickBid",{superclass:"com.ebay.raptor.vi.bid.Bid"},(function(){var t=function(e){var i,n=this;t.superclass.init.apply(n,arguments),(i=document.getElementById(e.learnMoreId))&&(i.onclick=function(){return n.util&&n.util.helpPopup(i.href),!1})};return t.prototype={bidClick:function(e){var i,n=this,s=n.cfg;t.superclass.bidVars.apply(n),e&&(i=e.isRedirect),$("#"+s.enterBidId+s.value).click((function(){n.isBidTextDirty=!0})),$("#"+s.enterBidId+s.value).keydown((function(){n.isBidTextDirty=!0})),n.triggerCall(s.bidInitURL,null,i),$("#"+s.updateId+s.btn).click((function(){n.triggerUpdateData(s.updateURL)}))},triggerUpdateData:function(t){var e=this.cfg;this.ajaxUtil&&t&&(t+=-1!==t.indexOf("?")?"&":"?",t+=$.param({lastaccessed:this.accessedDate||"",lvr:this.viewerItemRelation,dl:this.detailLevel||e.detailLevel}),this.ajaxUtil.getJSON(t,this.updateData,this))},updateData:function(e){(e=this.bidUtil.getItemData(e))&&t.superclass.autoRefresh.apply(this,[e])},triggerCall:function(e,i,n){i=$("#"+i).val(),e&&this.ajaxUtil&&(i&&(e=e+"&"+$.param({maxbid:i})),n?top.location.href=e:(this.ajaxUtil.getJSON(e,this.processResponse,this),t.superclass.toggleBidEvt.apply(this,["",!0])))},processResponse:function(e){var i,n,s,r,a,o=this.cfg;if(e)if((i=this.BidError.valueOf(e.Error))&&i==this.BidError.REDIRECT)top.location.href=e.ErrorUrl;else{if(e.fastDurationInMins&&(this.fastDur=60*e.fastDurationInMins),n=this.BidStatus.valueOf(e.Status),s=this.BidderStatus.valueOf(e.ViewerItemRelation),r=e.IsReserve,a=e.IsReserveMet,n===this.BidStatus.LEGAL)this.setLegal(e);else if(n==this.BidStatus.ENDED||e.IsEnded)this.setEnded(e,s,r,a);else{if(n!=this.BidStatus.ACTIVE&&!e.isAutoRefresh)return;this.setActive(e,i,s,r,a)}!e.isAutoRefresh&&!e.Error&&e.ROIUrls&&this.bidUtil.preload(e.ROIUrls),e.isAutoRefresh||(this.pubsub.publish(o.olySvcId,{}),this.olyCloseHandle||t.superclass.subscribeOlyClose.apply(this))}},layerCleanUp:function(t,e){var i=this.cfg;this.util.rmvEvt([i.enterBidId+i.value,i.bidBtnId+i.btn,i.updateId+i.btn,i.closeId+i.value]),this.olyCloseHandle&&(this.olyCloseHandle.unsubscribe(),this.olyCloseHandle=null),t&&e&&(top.location.href=e)},setLegal:function(){},setEnded:function(e,i,n,s){var r=this.cfg,a=$("#"+r.winningBidTxt).html(),o=[r.timeLeftId+r.wrapper,r.enterBidId+r.wrapper,r.disclaimerId];t.superclass.updateCurrBid.apply(this,[e.CurrentPrice,e.LocalCurrentPrice,a]),this.endedItemStatus(i,n,s,e.IsSold),this.updateMaxBid(e),this.util.showHide(o,!1),this.showCloseBtn(r.closeId,$("#"+r.closeTxt).html())},endedItemStatus:function(t,e,i,n){var s,r,a=this.cfg,o=-1;t&&(t===this.BidderStatus.HIGHBIDDER&&!e||t==this.BidderStatus.HIGHBIDDER&&e&&i?(s=a.AUCTION_ENDED_WINNER,o=3,r=a.successClz):t!==this.BidderStatus.OUTBIDDER||e?t!==this.BidderStatus.OUTBIDDER&&t!==this.BidderStatus.HIGHBIDDER||!e||i||(s=a.AUCTION_ENDED_RESERVE_NOT_MET,o=1,n||(t=$("#"+a.startingBidTxt).html())&&$("#"+a.curBidId+a.lable).html(t)):(s=a.AUCTION_ENDED_OUTBID,o=2,r=a.warningClz),this.showStatus(s,o,r))},showCloseBtn:function(e,i){var n,s=this,r=s.cfg;$("#"+e+r.value).remove(),n=$(document.createElement("input")).attr({id:e+r.value,type:"button",value:i}),$("#"+e+r.wrapper).append(n).show(),$("#"+e+r.value).click((function(){t.superclass.closeLayer.apply(s)}))},setActive:function(e,i,n,s,r){var a=this.cfg;i?this.updateBidAmtError(i):this.activeItemStatus(n,s,r,e.isAutoRefresh),i=this.bidUtil.timeLeftV(e.TimeLeft),this.updateTimeLeft(i),this.accessedDate=e.AccessedDate,this.viewerItemRelation=e.ViewerItemRelation,t.superclass.startCounter.apply(this,[i,e.AccessedDate,e.ViewerItemRelation]),t.superclass.updateCurrBid.apply(this,[e.CurrentPrice,e.LocalCurrentPrice]),this.updateMaxBid(e),this.updateIncreaseBid(e,n),e.isAutoRefresh||t.superclass.toggleBidEvt.apply(this,[a.bidURL,!1]),this.fastDur&&this.fastDur>this.bidUtil.convertToSeconds(i)?$("#"+a.updateId+a.btn).css({visibility:"hidden"}):$("#"+a.updateId+a.btn).css({visibility:"visible"})},activeItemStatus:function(t,e,i,n){var s,r,a=this.cfg,o=-1;t!==this.BidderStatus.HIGHBIDDER||e?t===this.BidderStatus.HIGHBIDDER&&e&&i?(s=a.HIGHBIDDER_STATUS,o=3,r=a.successClz):t===this.BidderStatus.HIGHBIDDER&&e&&!i?(s=a.HIGHBIDDER_RESERVE_NOT_MET_STATUS,o=1):t===this.BidderStatus.OUTBIDDER&&(s=a.OUTBIDDER_STATUS,o=2,r=a.warningClz):(s=a.HIGHBIDDER_STATUS,o=3,r=a.successClz),(!this.prevBidderStatus||this.prevBidderStatus&&n)&&(r=null),this.showStatus(s,o,r),this.prevBidderStatus=t},updateBidAmtError:function(t){var e,i=this.cfg,n=i.errorClz;t===this.BidError.LOW_BIDAMOUNT||t===this.BidError.OFFER_AMOUNT_ZERO?e=i.MIN_BID_ERROR_STATUS:t===this.BidError.INVALID_BIDAMOUNT_OF_HIGH_BIDDER?e=i.HIGH_BID_ERROR_STATUS:t===this.BidError.INVALID_BIDAMOUNT&&(e=i.MAKE_BID_ERROR_STATUS),this.showStatus(e,0,n)},showStatus:function(t,e,i){var n=this.cfg;t&&-1!==e&&(this.util.updateStatusMsg(e,this.statusMsg),this.util.displayContent(n.statusMsgId,$("#"+t).html(),n.value,n.wrapper),this.showFlash(e,i))},showFlash:function(t,e){var i=this.cfg,n=i.statusMsgId+i.value;e&&($("#"+n).addClass(e),setTimeout((function(){$("#"+n).removeClass(e)}),1e3))},updateTimeLeft:function(t){var e,i,n,s=this.cfg,r="";t&&(e=t.day,i=t.hour,n=t.minute,t=t.second,dayTxt=1===e?s.dayTxt:s.daysTxt,hourTxt=1===i?s.hourTxt:s.hoursTxt,minuteTxt=1===n?s.minuteTxt:s.minutesTxt,secondTxt=1===t?s.secondTxt:s.secondsTxt,0<e?r+=this.bidUtil.appendTime(e,dayTxt,!0)+this.bidUtil.appendTime(i,hourTxt,!0):0===e&&(0<i?r+=this.bidUtil.appendTime(i,hourTxt,!0)+this.bidUtil.appendTime(n,minuteTxt,!0):0===i&&(r+=this.bidUtil.appendTime(n,minuteTxt,!0)+this.bidUtil.appendTime(t,secondTxt,!0))),this.util.displayContent(s.timeLeftId,r,s.value))},updateMaxBid:function(e){var i=this.cfg,n=e.MaximumBid;e.IsAdminView||(n&&this.util.displayContent(i.reviewBidId,n.MoneyStandard,i.value,i.wrapper),t.superclass.updateApprox.apply(this,[e.MaximumBidLocal,i.reviewBidId]))},updateIncreaseBid:function(e,i){var n,s,r=this.cfg,a=e.MinimumToBid;e.IsAdminView||(n=e.MaxBidPlusOneIncrement,i===this.BidderStatus.HIGHBIDDER&&n?s=n.CleanAmount:a&&(s=a.CleanAmount),s&&!$("#"+r.enterBidId+r.value).is(":focus")&&!this.isBidTextDirty&&$("#"+r.enterBidId+r.value).val(s),$("#"+r.enterBidId+r.wrapper).show()),a&&t.superclass.updateCurrency.apply(this,[a.CurrencySymbol])}},t})),raptor.defineClass("com.ebay.raptor.vi.bid.placebid.PlaceBid",{superclass:"com.ebay.raptor.vi.bid.Bid"},(function(){var t=function(e){t.superclass.init.apply(this,arguments)};return t.prototype={bidClick:function(e){var i,n,s=this.cfg;t.superclass.bidVars.apply(this),e&&(i=e.maxbid,this.shipping=e.shipping,this.impCharge=e.impCharge,n=e.isRedirect),i=i||s.maxBidDefVal,this.triggerCall(s.bidInitURL,i,!0,n)},triggerCall:function(e,i,n,s){e&&(this.hideAll(),this.throbber(!0),(this.maxBidAmt=i=n&&i?i:$("#"+i).val())&&(s?(n=-1!==e.indexOf("?")?"&":"?",n+=$.param({maxbid:i}),e+=encodeURIComponent(n)):(e+=-1!==e.indexOf("?")?"&":"?",e+=$.param({maxbid:i}))),s?top.location.href=e:this.ajaxUtil&&(this.ajaxUtil.getJSON(e,this.processResponse,this),t.superclass.toggleBidEvt.apply(this,["",!0])))},processResponse:function(e){var i,n=this,s=n.cfg;!e||(i=n.BidError.valueOf(e.Error))&&n.isRedirectErrors(i,e.ErrorUrl)||(e.IsEnded?setTimeout((function(){t.superclass.closeLayer.apply(n)}),2500):(e.isAutoRefresh||($("#"+s.enterBidId+s.value).val(""),n.throbber(!1)),s=n.BidStatus.valueOf(e.Status),e.isAutoRefresh&&n.status&&(s=n.status),s&&(n.defaultFields(e),s==n.BidStatus.PLACEBID?n.placeBid(e):s==n.BidStatus.REVIEWBID?n.reviewBid(e):s==n.BidStatus.CONFIRMBID&&n.confirmBid(e),e.isAutoRefresh||n.attachLayerEvt(s),n.status=s),n.updateBidAmtError(i)))},placeBid:function(t){var e=this.cfg;$("#"+e.bidTitleId).html($("#"+e.placeBidTxt).html()),$("#"+e.enterBidId+e.lable).html($("#"+e.yourMaxBidTxt).html()),this.updateMinToBid(t),$("#"+e.enterBidId+e.wrapper).show(),$("#"+e.grayArea).show(),$("#"+e.nextStepId).show()},reviewBid:function(e){var i=this.cfg;$("#"+i.bidTitleId).html($("#"+i.reviewBidTxt).html()),e.isAutoRefresh||this.updateImportCharge(),e.MaximumBid&&!e.isAutoRefresh&&(this.util.displayContent(i.reviewBidId,e.MaximumBid.MoneyStandard,i.value,i.wrapper),$("#"+i.enterBidId+i.value).val(e.MaximumBid.CleanAmount),t.superclass.updateApprox.apply(this,[e.MaximumBidLocal,i.reviewBidId])),e.IsAdminView&&$("#"+i.reviewBidId+i.wrapper).show(),$("#"+i.grayArea).show(),this.cfg.isGsp?$("#"+i.disclaimerGspId).show():$("#"+i.disclaimerId).show()},confirmBid:function(t){var e=this.cfg;$("#"+e.bidTitleId).html($("#"+e.confirmBidTxt).html()),t.MaximumBid?this.util.displayContent(e.reviewBidId,t.MaximumBid.MoneyStandard,e.value,e.wrapper):this.BidderStatus.valueOf(t.ViewerItemRelation)==this.BidderStatus.OUTBIDDER&&$("#"+e.reviewBidId+e.value).html()&&$("#"+e.reviewBidId+e.wrapper).show(),$("#"+e.enterBidId+e.lable).html($("#"+e.incMaxBidTxt).html()),this.updateMinToBid(t),$("#"+e.enterBidId+e.wrapper).show(),$("#"+e.grayArea).show(),this.confirmBidMsg(t),!t.isAutoRefresh&&t.ROIUrls&&this.bidUtil.preload(t.ROIUrls)},defaultFields:function(e){var i;i=e.isAutoRefresh&&!e.TimeLeft?this.bidUtil.timeLeftV({}):this.bidUtil.timeLeftV(e.TimeLeft),this.updateTimeLeft(i),t.superclass.startCounter.apply(this,[i,e.AccessedDate,e.ViewerItemRelation]),this.updateShipping(),t.superclass.updateCurrBid.apply(this,[e.CurrentPrice,e.LocalCurrentPrice])},updateImportCharge:function(){var t=this.cfg,e=$("#"+this.impCharge).css("display");e&&"none"!=e?(this.cfg.isGsp=!0,e=$("#"+t.defaultImpChargeTxt).html(),$("#"+t.impChBidTxtId+t.value).hide(),$("#"+t.impChBidTxtId+t.value+"Err").hide(),this.util.displayContent(t.impChId,e,t.value,t.wrapper),new(raptor.require("com.ebay.raptor.vi.shipping.CalculateImportCharge"))({impChIdLink:t.impChId+"Lnk",maxBidAmt:this.maxBidAmt,impChIdCnt:t.impChId+t.value,calcImportChargeUrl:t.calcImportChargeUrl,impChBidTxtId:t.impChBidTxtId+t.value})):this.cfg.isGsp=!1},updateShipping:function(){var t=this.cfg,e=this.shipping;e||(e=$("#"+t.defaultShpTxt).html()),this.util.displayContent(t.shippingId,e,t.value,t.wrapper)},updateTimeLeft:function(t,e){var i=this.cfg,n="";$("#"+i.timeLeftId+i.value).removeClass(i.lessTimeCss),t&&(formatCfg={dayTxt:i.dayTxt,dayCharTxt:i.dayCharTxt,hourTxt:i.hourTxt,hoursTxt:i.hoursTxt,hourCharTxt:i.hourCharTxt,minuteCharTxt:i.minuteCharTxt,secondCharTxt:i.secondCharTxt,cssElemId:i.timeLeftId+i.value,css:i.lessTimeCss},n=this.bidUtil.timeLeftFormat(t,formatCfg,!1,i.enableAFAlways),e?this.util.displayContent(i.timeLeftId,n,i.value):this.util.displayContent(i.timeLeftId,n,i.value,i.wrapper))},updateMinToBid:function(e){if(!e.IsAdminView){var i,n=this.cfg,s="",r=this.BidderStatus.valueOf(e.ViewerItemRelation),a=e.MaximumBid,o=e.MinimumToBid;r&&r===this.BidderStatus.HIGHBIDDER&&a?(i=n.minBidHBTxt,s=a.MoneyStandard):o&&(i=n.minBidTxt,s=o.MoneyStandard),$("#"+n.enterBidId+n.min).html($("#"+i).html().replace(n.dummy,s)).show(),t.superclass.updateApprox.apply(this,[e.LocalCurrentPrice,n.curBidId]),e.MinimumToBid&&t.superclass.updateCurrency.apply(this,[e.MinimumToBid.CurrencySymbol])}},attachLayerEvt:function(e){var i=this,n=i.cfg,s=n.enterBidId+n.value,r=n.bidBtnId+n.link;if(e){$("#"+r).unbind();var a=function(t,e,i){$("#"+t+n.btn).val($("#"+e).html()),$("#"+t+n.link).html($("#"+i).html())};e==i.BidStatus.PLACEBID?(a(n.bidBtnId,n.placeBtnTxt,n.cancelTxt),t.superclass.toggleBidEvt.apply(i,[n.placeBidURL,!1]),$("#"+r).bind("click",(function(){t.superclass.closeLayer.apply(i)}))):e==i.BidStatus.REVIEWBID?(a(n.bidBtnId,n.confirmBtnTxt,n.changeTxt),t.superclass.toggleBidEvt.apply(i,[n.confirmBidURL,!1]),$("#"+r).bind("click",(function(){i.triggerCall(n.bidInitURL,null)}))):e==i.BidStatus.CONFIRMBID&&(a(n.bidBtnId,n.increaseBtnTxt,n.closeTxt),t.superclass.toggleBidEvt.apply(i,[n.bidAgainURL,!1]),$("#"+r).bind("click",(function(){t.superclass.closeLayer.call(i)}))),$("#"+n.bidBtnId+n.wrapper).show(),i.olyCloseHandle||t.superclass.subscribeOlyClose.apply(i),$("#"+s).focus()}},confirmBidMsg:function(t){var e,i=this.cfg,n=-1,s=this.BidderStatus.valueOf(t.ViewerItemRelation);s&&(s==this.BidderStatus.OUTBIDDER?(e=i.OUTBIDDER,n=0):s==this.BidderStatus.HIGHBIDDER&&(n=3,e=t.IsReserve&&!t.IsReserveMet?i.HIGHBIDDER_RESERVE_NOT_MET:t.IsFirstBid?i.HIGHBIDDER_FIRST:t.IsOneMaxBidAway?i.HIGHBIDDER_1_MAX_BID_AWAY:this.lessThanHour(t.TimeLeft)?i.HIGHBIDDER_60_MIN_LEFT:i.HIGHBIDDER),e&&-1!==n&&(this.util.updateStatusMsg(n,this.statusMsg),this.util.displayContent(i.statusMsgId,$("#"+e).html(),i.value,i.wrapper)))},isRedirectErrors:function(e,i){return e===this.BidError.REDIRECT?(top.location.href=i,!0):(e===this.BidError.REFRESH||e===this.BidError.AUCTION_ENDED)&&(t.superclass.closeLayer.apply(this),!0)},updateBidAmtError:function(t){var e,i=this.cfg,n=-1;t===this.BidError.DECSEP?(e=i.DECSEP,n=0):t===this.BidError.INVALID_BIDAMOUNT?(e=i.INVALID_BIDAMOUNT,n=0):t===this.BidError.LOW_BIDAMOUNT?(e=i.LOW_BIDAMOUNT,n=0):t===this.BidError.INVALID_BIDAMOUNT_OF_HIGH_BIDDER?(e=i.INVALID_BIDAMOUNT_OF_HIGH_BIDDER,n=0):t===this.BidError.BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT?(e=i.BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT,n=1):t===this.BidError.BID_GREATER_THAN_BIN&&(e=i.BID_GREATER_THAN_BIN,n=1),e&&-1!==n&&(this.util.updateStatusMsg(n,this.statusMsg),this.util.displayContent(i.statusMsgId,$("#"+e).html(),i.value,i.wrapper))},throbber:function(t){var e=this.cfg;this.util.showHide([e.loadingId,e.resumeBidId],t)},hideAll:function(){var t=this.cfg;this.util.showHide([t.loadingId,t.resumeBidId,t.statusMsgId+t.wrapper,t.timeLeftId+t.wrapper,t.shippingId+t.wrapper,t.impChId+t.wrapper,t.curBidId+t.wrapper,t.reviewBidId+t.wrapper,t.enterBidId+t.wrapper,t.confirmBidId+t.wrapper,t.bidBtnId+t.wrapper,t.grayArea,t.disclaimerId,t.disclaimerGspId,t.nextStepId],!1)},lessThanHour:function(t){return!(!(t=this.bidUtil.timeLeftV(t))||0<t.day||1<t.hour||1===t.hour&&(1<t.minute||1<t.second))},layerCleanUp:function(t,e){var i=[(i=this.cfg).bidBtnId+i.btn,i.bidBtnId+i.link,i.enterBidId+i.value];if(this.util&&(this.util.rmvEvt(i),this.olyCloseHandle&&(this.olyCloseHandle.unsubscribe(),this.olyCloseHandle=null)),t&&e){var n=this.removeMaxBidParamPlacebid(e);setTimeout((function(){top.location.href=n}),1)}},removeMaxBidParamPlacebid:function(e){return t.superclass.removeMaxBidParam.apply(this,arguments)}},t})),raptor.defineClass("raptor.vi.BinLayer",(function(){return{init:function(t){var e=this;e.cfg=t,e.pubsub=raptor.require("pubsub"),e.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),e.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),e.pubsub&&(e.pubsub.subscribe(e.msgs("BIN_SVC_ID"),(function(t){e.show(t)}),this),e.pubsub.channel(t.binOlyId).subscribe("_OLY_CLS_SVC",(function(){e.onClose()}),e)),t.binOnLoad&&$(document).ready((function(){e.openOly(t.mkQkBinUrl)}))},openOly:function(t){this.pubsub.publish("_OPEN_OLAY",{cmpId:this.cfg.binOlyId}),this.buildUrl(t)},show:function(t){var e,i=this.cfg;if(this.msg=t,i.mkQkBinSiUrl)return i=i.mkQkBinSiUrl,void 0!==t.dcl&&t.dcl&&(i+="%26fdcl=1"),this.reloadParent(i),!1;""!==i.mapPCOlyId&&this.pubsub.publish("_CLOSE_OLAY",{cmpId:i.mapPCOlyId}),e=i.mkQkBinUrl,void 0!==t.dcl&&t.dcl&&(e=i.mkQkBinDclUrl),this.pubsub.publish("_OPEN_OLAY",{cmpId:i.binOlyId}),this.buildUrl(e)},buildUrl:function(t){var e,i=this.cfg;void 0!==this.msg?(e=""!==this.msg.vQty?this.msg.vQty:"",i=""!==this.msg.vId?this.msg.vId:""):(e=void 0!==i.selQty&&""!==i.selQty?i.selQty:"",i=void 0!==i.selVarId&&""!==i.selVarId?i.selVarId:""),t+=""!==e?"&quantity="+e:"&quantity=1",""!==i&&(t+="&var="+i),this.request(t)},request:function(t){this.ajaxUtil.getJSON(t,this.response,this)},response:function(t){var e=this.cfg;if(t){if("REDIRECT"==t.status)return this.reloadParent(t.redirectUrl),!1;"SUCCESS"==t.status&&(t.cssUrls&&""!==t.cssUrls[0]?this.loadCss(t,e,this.handleJs):this.handleJs(t))}},loadCss:function(t,e,i){var n=this,s=(e=$("#"+e.binTrbrId),document.createElement("link"));s.type="text/css",s.rel="stylesheet",s.href=t.cssUrls[0],document.getElementsByTagName("head")[0].appendChild(s),$.browser.msie&&8>=parseInt($.browser.version,10)&&e.addClass("js").removeClass("js"),(e=document.createElement("img")).onerror=function(){i&&i(t,n)},e.src=t.cssUrls[0]},handleJs:function(t,e){var i;t.js&&""!==t.js&&((i=document.createElement("script")).type="text/javascript",i.text=t.js,document.getElementsByTagName("head")[0].appendChild(i)),e.handleBINResponse(t)},reloadParent:function(t){var e,i=this.cfg;void 0!==this.msg?(e=""!==this.msg.vQty?this.msg.vQty:"",i=""!==this.msg.vId?this.msg.vId:""):(e=void 0!==i.selQty&&""!==i.selQty?i.selQty:"",i=void 0!==i.selVarId&&""!==i.selVarId?i.selVarId:""),t+=""!==e?"%26quantity="+e:"%26quantity=1",""!==i&&(t+="%26var="+i),top.location.href=t},handleBINResponse:function(t){var e=this.cfg,i=$("#"+e.binTrbrId),n=$("#"+e.binCntId);t.html&&""!==t.html&&n&&(i.hide(),n.html(t.html),this.pubsub.publish("_OPEN_OLAY",{cmpId:e.binOlyId})),handleBinLyrResponse(t)},onClose:function(){var t;-1!=(t=(t=window.location.href).replace(/&*biolp=1/,"")).indexOf("&iqrsp=1")&&(t=t.replace(/&*iqrsp=1/,"")),t=t.replace(/&*autorefresh=true/,""),t+=-1!=t.indexOf("?")?"&autorefresh=true":"?autorefresh=true",top.location=t}}})),raptor.defineClass("com.ebay.raptor.vi.bid.placebid.Emailtheseller",(function(){return{init:function(t){if(t.useFitmentService)var e=raptor.require("raptor.vi.FitmentService"),i={fitEndpoint:t.fitEndpoint,vehicleMarketPlaceID:t.vehicleMarketPlaceID,categoryId:t.categoryId,itemId:t.itemNumber,fitHeaders:t.fitHeaders};var n=this;n.conf=t,n.YMMServiceCallURL=t.YMMServiceCallURL,n.ELFDataSubmitURL=t.ELFDataSubmitURL,n.isFsbo=t.isFsbo,n.isSignedIn=t.isSignedIn,n.ELFUserId=t.ELFUserId,n.ELFSellerId=t.ELFSellerId,n.itemNumber=t.itemNumber,n.timeLeft=t.timeLeft,n.saleEndTime=t.saleEndTime,n.saleEndTimeString=t.saleEndTimeString,n.sellerPhoneNum=t.sellerPhoneNum,n.handlrBinded=!1,n.hideMotorsCaptcha=t.hideMotorsCaptcha,n.showM2MContactSellerForm=t.showM2MContactSellerForm,n.m2mContactSellerPath=t.m2mContactSellerPath,n.isContactSellerEligible=t.isContactSellerEligible,n.conf.useFitmentService&&(n.fitmentService=e,n.fitConfig=i),$("#slrCntctNum").text((function(){var t=n.sellerPhoneNum[0];return t?11===(t=t.replace(/[^0-9]/g,"")).length?t.replace(/(\d{1})(\d{3})(\d{3})(\d{4})/,"$1 $2 $3 $4"):t.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"):""})),!window._fitmentService&&n.conf.useFitmentService&&(this._fitmentService=new e(n.fitConfig,this),this._fitmentService.initCosClient(n.fitConfig.fitEndpoint),e=this._fitmentService.getFitmentServiceMetadataConfig(),this._fitmentService.makeFitmentCall(e,this.handleFitmentResponse)),n.isContactSellerEligible?$("#emailBtn_btn").bind("click",(function(t){var e=new CustomEvent("vim:overlay-open-CONTACT_SELLER",{bubbles:!0,cancelable:!0,detail:{overlayId:"CONTACT_SELLER"}});t.target&&t.target.dispatchEvent(e),trackingUtil("CONTACT_SELLER_BUTTON_CLICK")})):n.showM2MContactSellerForm?$("#emailBtn_btn").bind("click",(function(){n.m2mContactSellerPath&&0!=n.m2mContactSellerPath.length&&(window.location.href=n.m2mContactSellerPath)})):$("#emailBtn_btn").bind("click",(function(e){var i=$(".elf-form");e.preventDefault(),(e=n.getChild(t.overlayId))&&(i.removeClass("error"),i.find(".notification").addClass("hidenotif"),i.find(":text").val(""),i.find(":checked").removeAttr("checked"),i.find("textarea").val("Enter your question here..."),i.find("#valueRem").text(1e3),e.show(),$("#elf-form-send").attr("tabindex","16"),n.buildTime(),n.FillinDetails(),$("#YMM")&&$("#YMM").hide()),n.handlrBinded||n.bindHandlr()}))},bindHandlr:function(){this.handlrBinded=!0,this.bindTriggerEvents()},YMMResponse:function(t){var e=this;$.getJSON(t+"&cb=?",(function(t){"SUCCESS"===t.status.name&&"null"!=t.data&&((t=t.data)[0].Make&&(e.reviseMake(),$.each(t[0].Make,(function(t,e){$("#slctMake").append($("<option></option>").attr("value",e).text(e))})),e.reviseModel()),t[0].Model&&(e.reviseModel(),$.each(t[0].Model,(function(t,e){$("#slctModel").append($("<option></option>").attr("value",e).text(e))}))))}))},buildUrlForYMM:function(t){var e=(e=this.YMMServiceCallURL).replace(/&amp;/g,"&");this.YMMResponse(e+"&"+t,"Year")},handleFitmentResponse:function(t,e){if(e&&e.nextPropertyChoice&&e.nextPropertyChoice.displayName&&e.nextPropertyChoice.displayName.content){var i=e.nextPropertyChoice.displayName.content;"Year"==i?t.compatibility.buildYear(t,e):"Make"==i?t.compatibility.buildMake(t,e):"Model"==i&&t.compatibility.buildModel(t,e)}},buildYear:function(t,e){t.compatibility.reviseYear(),e&&e.nextPropertyChoice&&e.nextPropertyChoice.possibleValues&&$.each(e.nextPropertyChoice.possibleValues,(function(t,e){$("#slctYear").append($("<option></option>").attr("value",e).text(e))}))},buildMake:function(t,e){t.compatibility.reviseMake(),e&&e.nextPropertyChoice&&e.nextPropertyChoice.possibleValues&&$.each(e.nextPropertyChoice.possibleValues,(function(t,e){$("#slctMake").append($("<option></option>").attr("value",e).text(e))}))},buildModel:function(t,e){t.compatibility.reviseModel(),e&&e.nextPropertyChoice&&e.nextPropertyChoice.possibleValues&&$.each(e.nextPropertyChoice.possibleValues,(function(t,e){$("#slctModel").append($("<option></option>").attr("value",e).text(e))}))},reviseYear:function(){$("#slctYear").empty();var t=new Option("option text","value");$(t).html("Any"),$("#slctYear").append(t)},reviseMake:function(){$("#slctMake").empty();var t=new Option("option text","value");$(t).html("Any"),$("#slctMake").append(t)},reviseModel:function(){$("#slctModel").empty();var t=new Option("option text","value");$(t).html("Any"),$("#slctModel").append(t)},refreshCaptcha:function(){$.ajax({type:"GET",url:"Motors/ELF/RefreshCaptcha",dataType:"json",success:function(t){(t=jQuery.parseJSON(t)).imageURL&&$("#captchaImageURL").attr("src",t.imageURL)}})},saveELFData:function(t){var e=this;e.showThrobber();var i=e.itemNumber,n=null,s=null,r=null;e.isSignedIn||e.hideMotorsCaptcha?((n=e.ELFDataSubmitURL)&&0!=n.length&&(n=n.replace(/&amp;/g,"&")),n+="itemNumber="+i+"&"+t):n="itemNumber="+i+"&"+t,n&&0!=n.length&&(n=n.replace(/ /g,"+"));n+="&Ajax=true";var a=!0;e.isSignedIn||e.hideMotorsCaptcha?(s=n+"&callback=?",n="",r="jsonp",a=!0):null!=document.getElementById("captchaImageURL")&&(n+="&captchaImageURL="+$("#captchaImageURL").attr("src"),s="Motors/ELF/SubmitData",r="json",a=!1),$.ajax({type:"GET",url:s,data:n,dataType:r,success:function(t){a?"null"!=t.success&&e.postResponseSuccess():("null"!=(t=jQuery.parseJSON(t)).success&&t.success&&e.postResponseSuccess(),!e.hideMotorsCaptcha&&"null"!=t.imageUrl&&e.postResponseCaptchaRefresh(t))}}).error((function(){e.closeOverlay(),e.showErrorOnCloseOverlay()}))},postResponseSuccess:function(){this.closeOverlay();for(var t,e={},i=location.search.substring(1),n=/([^&=]+)=([^&]*)/g;t=n.exec(i);)e[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);e.confirmvalue="1",e.EmbeddedLeadForm="confirm",location.search=$.param(e)},postResponseCaptchaRefresh:function(t){$("#throbber_elf").hide(),$(".elf-form").show(),$("#captchastring").val(""),$("#captchaImageURL").attr("src",t.imageURL),$(this).parent("div").addClass("error"),$("#captchaerror2").css("display","block")},closeOverlay:function(){this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.overlayId}),$(".elf-form-wrapper").find(".form_price span").remove()},showThrobber:function(){$(".elf-form").hide(),$("#throbber_elf").show()},showErrorOnCloseOverlay:function(){for(var t,e={},i=location.search.substring(1),n=/([^&=]+)=([^&]*)/g;t=n.exec(i);)e[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);e.confirmvalue="0",e.EmbeddedLeadForm="confirm",location.search=$.param(e)},buildTime:function(){var t=this.timeLeft,e=Math.floor(t/86400),i=Math.floor(t%86400/3600),n=Math.floor(t%86400%3600/60),s=null,r=(10>i&&0!=i?"0"+i:i)+"h ",a=(10>n&&0!=n?"0"+n:n)+"m ",o=(10>(t=t%86400%3600%60)&&0!=t?"0"+t:t)+"s ";0<e&&(s=(10>e&&0!=e?"0"+e:e)+"d ",s+=r),0==e&&0<i&&(s=r,s+=a),0==e&&0==i&&0<n&&(s=a,s+=o),0==e&&0==i&&0==n&&0<t&&(s=o),$("#timeLeftid").html(s)},FillinDetails:function(){var t=this;$("#elf-form-send").on("click",(function(){if(t.ELFUserId==t.ELFSellerId)t.closeOverlay(),t.showErrorOnCloseOverlay();else{var e="",i=$(".elf-form .required").length,n=0;$(".elf-form .required").each((function(){""===$.trim($(this).val())?($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):"firstNameId"!==$(this).attr("id")&&"lastNameId"!==$(this).attr("id")||!1!==/^[A-Za-z ]+$/.test($(this).val())?"emailAddressId"===$(this).attr("id")&&!1===/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test($(this).val())||"zipCodeId"===$(this).attr("id")&&!1===/^[0-9]{5}(?:-[0-9]{4})?$/.test($(this).val())||"phoneNumId"===$(this).attr("id")&&!1===/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test($(this).val())||"elf_Additionalcomment"===$(this).attr("id")&&"Enter your question here..."==$(this).val()?($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif"),e=e+$(this).attr("name")+"="+encodeURIComponent($(this).val())+"&",++n==i&&($(".elf-form .notRequired").each((function(){var t=$(this).attr("id");$("#"+t).is(":checkbox")&&(e=$("#"+t).is(":checked")?e+($(this).attr("name")+"=Y&"):e+($(this).attr("name")+"=N&")),$("#"+t).is("select")&&$("#"+t).is(":enabled")&&("Any"!=(t=(t=document.getElementById(t)).options[t.selectedIndex].text)&&(e+=$(this).attr("name")+"="+t+"&")),$("#"+$(this).attr("id")).is("textarea")&&(t="","Enter your question here..."!=$(this).val()&&(t=$(this).val()),e+=$(this).attr("name")+"="+t+"&")})),e=e.substring(0,e.length-1),t.saveELFData(e))):($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif"))}))}})),t.pubsub=raptor.require("pubsub"),$("#elf-form-ovl_cancel").on("click",(function(e){var i=t.conf;e.stopImmediatePropagation(),t.pubsub.publish("_CLOSE_OLAY",{cmpId:i.overlayId}),$(".elf-form-wrapper").find(".form_price span").remove()}))},bindTriggerEvents:function(){var t=this;$(".imp").on("blur",(function(){var e=$(this).attr("id"),i=$("#"+e).val().trim();$("#"+e).val(i),"firstNameId"!=e&&"lastNameId"!=e||(!0===/^[A-Za-z ]+$/.test($(this).val())?($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif")):($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif"))),"emailAddressId"==e?!0===/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test($(this).val())?($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif")):($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):"zipCodeId"==e?!0===/^[0-9]{5}(?:-[0-9]{4})?$/.test($(this).val())?($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif")):($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):"phoneNumId"==e?!0===/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test($(this).val())?($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif")):($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):!t.hideMotorsCaptcha&&"captchastring"==e&&(""==$(this).val()?($(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif")))})),$("#tradeIn").click((function(){$("#YMM").toggle()})),$("#slctYear").change((function(){var e;"Any"!=(e=(e=$("#slctYear")[0]).options[e.selectedIndex].text)?$("#slctMake").prop("disabled",!1):$("#slctMake").prop("disabled",!0),$("#slctModel").prop("disabled",!0),t.conf.useFitmentService?(e=t._fitmentService.getFitmentServiceMetadataConfig("Year="+e),t._fitmentService.makeFitmentCall(e,t.handleFitmentResponse)):(e="sfp=Year:"+e+"&rf=Make",t.buildUrlForYMM(e))})),$("#elf_Additionalcomment").focusin((function(){"Enter your question here..."==$(this).val()&&$(this).val(""),$(this).parent("div").hasClass("error")&&($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif"))})).blur((function(){""==$(this).val()?($(this).val("Enter your question here..."),$(this).parent("div").addClass("error"),$(this).next(".notification").removeClass("hidenotif")):($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif"))})),$("#elf_Additionalcomment").keyup((function(){var t=1e3-$("#elf_Additionalcomment").val().length;0>t?this.value=this.value.substring(0,1e3):$("#valueRem").text(t)})),$("#firstNameId,#lastNameId,#emailAddressId").keyup((function(){0>63-$(this).val().length&&(this.value=this.value.substring(0,63))})),$(".imp").focusin((function(){$(this).parent("div").hasClass("error")&&($(this).parent("div").removeClass("error"),$(this).next(".notification").addClass("hidenotif"))})),$("#slctMake").change((function(){if("Any"!=(i=(i=$("#slctMake")[0]).options[i.selectedIndex].text)?$("#slctModel").prop("disabled",!1):$("#slctModel").prop("disabled",!0),t.conf.useFitmentService){var e=$("#slctYear")[0],i="Year="+e.options[e.selectedIndex].text+"&Make="+i;i=t._fitmentService.getFitmentServiceMetadataConfig(i);t._fitmentService.makeFitmentCall(i,t.handleFitmentResponse)}else i="&sfp=Make:"+i+"&rf=Model",t.buildUrlForYMM(i)})),$("#refreshCaptcha").click((function(){t.refreshCaptcha()}))}}})),raptor.defineClass("ebay.viewItem.Cart",(function(){var t=!1,e=!1;return{init:function(t){(this.isVIMCustomization=t.isVIMCustomization)&&(this.vimCustomizationToken=raptor.require("com.ebay.raptor.vi.customization.vimCustomizationToken")),this.pubsub=raptor.require("pubsub"),this.conf=t,this.olayCloseSvcId="_OLY_CLS_SVC",this.actionPanel=raptor.require("raptor.vi.ActionPanel"),this.cookie=raptor.require("ebay.cookies"),this.pubsub=raptor.require("pubsub"),this.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),this.registerPubSubEvents(t),this.attachBtnClickEvent(),this.attachMsgHandler(),t.enableContextMenuTracking&&this.handleContextMenuClick(t)},registerPubSubEvents:function(e){this.pubsub.subscribe(this.msgs("HIDE_ADD_TO_CART_LINK"),(function(t){this.hideAddToCartLink(e,t.toHide)}),this),this.pubsub.publish(this.msgs("VALIDATE_CART_MODULE_READY"),{}),this.pubsub.subscribe("TRIGGER_CART_BTN",(function(){$("#"+e.cartBtnId).trigger("click")}),this),this.pubsub.subscribe(this.msgs("AUTO_REFRESH_DISABLE_BTN_SVC"),(function(){t=!0,this.pubsub.publish("_VI_BTN_MSGS",{id:e.cartBtnId,isDisable:!0})}),this)},hideAddToCartLink:function(t,e){e?($("#"+t.cartBtnId).show(),$("#"+t.cartBtnId).parent().show(),t.isATCRedesignLayerV1Active&&($("#"+t.cartBtnId).show(),$("#vi-viewInCartBtn").hide()),$("#atcLnk").hide()):($("#"+t.cartBtnId).hide(),$("#"+t.cartBtnId).parent().hide(),t.isATCRedesignLayerV1Active&&($("#"+t.cartBtnId).hide(),$("#vi-viewInCartBtn").show()),$("#atcLnk").show())},attachBtnClickEvent:function(){var i=this,n=i.conf,s=!!n.isBulkCart,r=!!n.hasWrtyIntercept;n.isATCRedesignLayerV1Active&&$("#"+n.cartBtnId).click((function(s){n.enableCustomizationDialog&&i.checkOverlayDialog(),window&&window.$customizationData&&window.$customizationData.isVIM&&(n.cartUrl=i.vimCustomizationToken&&i.vimCustomizationToken.addVIMCustomizationToken(n.cartUrl));var r={atcRedesignOlayId:n.atcRedesignOverlayId,showReminderDialog:e,confirmationDialog:n.confirmationDialog,enableCustomizationDialog:n.enableCustomizationDialog,customizationOverlay:n.customizationOverlay,itemId:n.itemId,submitURL:n.cartUrl};n.hasVASIntercept?i.pubsub.publish("VAS_CALL_TO_ACTION_ATC",r):i.pubsub&&!t&&i.pubsub.publish("_TRG_CLK_ATCREDESIGN_BTN",r),s.preventDefault()})),n.isATCRedesignLayerV1Active||$("#"+n.cartBtnId).click((function(a){n.enableCustomizationDialog&&i.checkOverlayDialog(),window&&window.$customizationData&&window.$customizationData.isVIM&&(n.cartUrl=i.vimCustomizationToken&&i.vimCustomizationToken.addVIMCustomizationToken(n.cartUrl));var o={qtyBoxId:"qtyTextBox",submitURL:n.cartUrl,isValid:"isValid",isBulkCart:s,hasWrtyIntercept:r,itemId:n.itemId,roverUrlATC:n.roverUrlATC,showReminderDialog:e,confirmationDialog:n.confirmationDialog,enableCustomizationDialog:n.enableCustomizationDialog,customizationBinOverlay:n.customizationOverlay};i.pubsub&&!t&&i.pubsub.publish("_SUBMIT_CARTBTN",o),a.preventDefault()})),n.enableCustomizationDialog&&($("#"+n.primaryBtn).on("click",(function(t){i.dialogFunctionalityATC(t,n)})),$("#"+n.secondaryBtn).on("click",(function(t){i.dialogFunctionalityATC(t,n)})))},dialogFunctionalityATC:function(e,i){if(e&&e.srcElement&&e.srcElement.dataset&&e.srcElement.dataset.actid&&i&&i.confirmationDialog&&i.confirmationDialog.okAction&&i.confirmationDialog.okAction.actionId&&e.srcElement.dataset.actid===i.confirmationDialog.okAction.actionId){var n={atcRedesignOlayId:i.atcRedesignOverlayId},s=!!i.isBulkCart,r=!!i.hasWrtyIntercept;window&&window.$customizationData&&window.$customizationData.isVIM&&(i.cartUrl=this.vimCustomizationToken&&this.vimCustomizationToken.addVIMCustomizationToken(i.cartUrl)),s={qtyBoxId:"qtyTextBox",submitURL:i.cartUrl,isValid:"isValid",isBulkCart:s,hasWrtyIntercept:r,itemId:i.itemId,roverUrlATC:i.roverUrlATC},trackingUtil("CUSTOMIZATION_CONTINUE_BUTTON"),this.pubsub&&!t&&(this.pubsub.publish("_CLOSE_OLAY",{cmpId:i.customizationOverlay}),i.isATCRedesignLayerV1Active?this.pubsub.publish("_TRG_CLK_ATCREDESIGN_BTN",n):this.pubsub.publish("_SUBMIT_CARTBTN",s))}else this.pubsub.publish("_CLOSE_OLAY",{cmpId:i.customizationOverlay}),trackingUtil("CUSTOMIZATION_BACK_BUTTON")},attachMsgHandler:function(){var t=this;t.pubsub.channel(t.conf.cartOlayId).subscribe(t.olayCloseSvcId,(function(e){t.cartOverlayClose(e)}),t)},cartOverlayClose:function(){var t=this.cookie.readCookie("dp1","pbf");this.cookie.writeCookielet("dp1","pbf",this.cookie.setBitFlag(t,66,1))},checkOverlayDialog:function(){var t=document.getElementById("customizationSection");t&&(e=!(!(t=t.querySelector("textarea"))||0!==t.value.trim().length))},handleContextMenuClick:function(t){var e=this;(t=document.querySelector("#"+t.cartBtnId))&&t.addEventListener("contextmenu",(function(t){t&&t.button&&(1===t.button||2===t.button)&&e.addPulsarTracking()}))},addPulsarTracking:function(){var t=Object.assign({},{flushImmediately:!1},{CTA:"ATC",moduledtl:"li:155626",sid:"l155626"});window&&window.addPulsarEvent&&window.addPulsarEvent(["customEvts","ITM","ACTN",t])}}})),raptor.defineModule("raptor.vi.Charity",(function(){return{init:function(t){var e=this;e.conf=t,t.signedIn&&t.onload?$(window).load((function(){e.addToFavCall()})):t.signedIn&&t.lnkId&&$(window).load((function(){e.chckCharity()})),$("#"+t.lnkId).bind("click",(function(){e.addToFavCall()})),$("#"+e.conf.addedCharityId).bind("click",(function(){e.rmvToFavCall()}))},chckCharity:function(){this.makeScriptCall(this.conf.svcURL+"srt="+this.conf.csrf)},addToFavCall:function(){this.makeScriptCall(this.conf.svcURL+"setFavNpId="+this.conf.charityid+"&srt="+this.conf.csrf)},rmvToFavCall:function(){this.makeScriptCall(this.conf.svcURL+"setFavNpId="+this.conf.charityid+"&srt="+this.conf.csrf+"&action=remove")},processRes:function(t){t&&1==t.status&&(t=t.userFavNpIds?t.userFavNpIds.split(","):[],t=-1!=$.inArray(String(this.conf.charityid),t),this.addRmvCharityDspl(t))},addRmvCharityDspl:function(t){t?($("#"+this.conf.lnkId).hide(),$("#"+this.conf.addedCharityId).show()):($("#"+this.conf.addedCharityId).hide(),$("#"+this.conf.lnkId).show())},makeScriptCall:function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t+"&cb=this.raptor.require('raptor.vi.Charity').processRes",document.getElementsByTagName("head")[0].appendChild(e)}}})),raptor.defineClass("raptor.vi.CompareItems",(function(t){return{init:function(e){var i=this;i.cfg=e,i.rmv=i.getRemovedItems(),i.Profiler=t.require("ebay.profiler.Profiler");var n=e.itm,s=e.leafCatId,r=e.compareModuleWindowLoad,a=e.displayCompareModule;r?$(window).load((function(){i.request(n,s,r,a)})):i.request(n,s,r,a)},request:function(t,e,i,n){var s=this,r=(t=location.href.split("itm")[0]+"itm/compare?item="+t+"&items=ALL&leafcategory="+e,(new Date).getTime());$.ajax({url:t,context:document.body}).done((function(t){try{if(n&&t){s.populate(t,i),$("#compare-similar-item-show-more").bind("click",(function(){trackingUtil("VI_COMPARE_SHOW_MORE_DETAILS"),s.showHide(!0)})),$("#compare-similar-item-show-less").bind("click",(function(){trackingUtil("VI_COMPARE_SHOW_LESS_DETAILS"),s.showHide(!1)}));var e=(new Date).getTime()-r;e&&t&&s.Profiler.addParam("i_22i",e)}}catch(t){}}))},populate:function(t,e){var i=this,n=i.cont=$("#compare-similar-item-container");e?$(n).html(t):$(window).load((function(){$(n).html(t),$("#compare-similar-item-show-more").bind("click",(function(){trackingUtil("VI_COMPARE_SHOW_MORE_DETAILS"),i.showHide(!0)})),$("#compare-similar-item-show-less").bind("click",(function(){trackingUtil("VI_COMPARE_SHOW_LESS_DETAILS"),i.showHide(!1)}))}))},removeDeletedItems:function(){var t;if(null!==this.rmv){for(t=0;t<=this.rmv.length;t++)$('.div_items[item="'+this.rmv[t]+'"]').remove();for(t=$(".div_items").not(".u-dspn").length;7>t;t++)$(".div_items.u-dspn").first().removeClass("u-dspn")}},showModule:function(){var t=$("#compareHeader");this.cfg.enableDelete&&$(".cp_remove.u-dspn").removeClass("u-dspn"),$(this.cont).show(),$(t).css("display","inline")},showHide:function(t){$(".bottom-section").toggleClass("bottom-section-show",t),$(".bottom-section-hide").toggle(t),$("#compare-similar-item-show-more").toggle(),$("#compare-similar-item-show-less").toggle()},removeItem:function(t){$(t).parents(".div_items").remove(),$(".div_items.u-dspn").first().animate({opacity:"show"},1500).removeClass("u-dspn")},cleanUpStorage:function(){var t=[],e=$(".div_items").length;if(null!==this.rmv){for(var i=0;i<=e;i++)for(var n=0;n<this.rmv.length;n++)$(".div_items:eq("+i+")").attr("item")===this.rmv[n]&&t.push($(".div_items:eq("+i+")").attr("item"));try{localStorage.setItem("cmp_itm",JSON.stringify(t))}catch(t){}}},saveRemovedItem:function(t){var e=[];try{null===(e=JSON.parse(localStorage.getItem("cmp_itm")))?e=[$(t).attr("item")]:e.push($(t).attr("item")),localStorage.setItem("cmp_itm",JSON.stringify(e))}catch(t){}this.removeItem(t)},getRemovedItems:function(){var t=[];try{return null===(t=JSON.parse(localStorage.getItem("cmp_itm")))?null:t}catch(t){return null}}}})),raptor.defineClass("raptor.vi.Compatibility",(function(){return{init:function(t){try{var e=this;if(e.conf=t,e.showTopCompMsg=!!t.showTopCompModel,e.showTopCompSection=!!t.fitsMessageDictionary,e.fldsSel=0,e.fldsSelected=0,e.srchFlds=[],e.propNames=[],e.propTypes=[],e.dsplNames=[],e.SP=t.selProps?t.selProps:{},e.pdsFlds=t.showTopCompModel&&t.showTopCompModel.selectedProperties?t.showTopCompModel.selectedProperties:{},e.vehicleType=848===e.conf.catalogId?"3":"1",e.MDDS=t.MDReqId,e.CREQ=t.reqType,e.start=!0,e.initz=!1,e.showAll=!1,e.pubsub=raptor.require("pubsub"),e.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),e.useFitmentService()){var i=raptor.require("raptor.vi.FitmentService");e._fitmentService=new i(e.conf,e),e._fitmentService.initCosClient(e.conf.fitEndpoint)}e.fitsMessageDictionary=t.fitsMessageDictionary,e.expCount=-1,e.pfvModel=t.pfvModel,e.paginationTxt=t.paginationTxt,e.currentPageTxt=t.currentPageTxt,e.handlrBinded||e.bindHandlr(),$("body").click((function(){e.pubsub.publish("_CLOSE_OLAY",{cmpId:t.olyId})})),$("#"+t.seeCompLnk).click((function(){$($("#viTabs_0")[0]).trigger("click",["noTabTracking"]),$('[tabindex="0"],a,input,select,button',"#vi-ilComp").filter(":visible")[0].focus(),$(document).trigger("rover",{sid:"p2047675.l1558"})})),$("#"+t.showAllCmpLnk).click((function(){e.makeShowAllCall(null)})),$("#"+t.mainId+"ieveh .crtval").click((function(){e.dropdownClicked()})),$("#"+t.mainId+"ieveh > a > b").click((function(){e.dropdownClicked()})),$("#"+t.mainId+"myGarageLink").click((function(){$(document).trigger("rover",{sid:"p2047675.l44447"})})),0<$("#diagramLink").length&&this.addClickEvent("#diagramLink"),"HSNTSN"==t.selectOverlayTypeToShow?($("#"+t.hsnAncId).click((function(){e.setHsnTsn()})),$("#"+t.mainId+"slctBtn").click((function(){e.htOlySelect()})),$("#"+t.mainId+"htCancel").click((function(){e.sltRowOlyCancel(e.conf.htOverlayOSId)}))):($("#"+e.conf.mainId+"anc").click((function(){e.setMakesForStreetNames()})),$("#"+t.mainId+"sn-slctBtn").click((function(){e.snOlySelect(e.conf.mainId+"streetNameResponseOverlay")})),$("#"+t.mainId+"sn-Cancel").click((function(){e.sltRowOlyCancel(e.conf.mainId+"streetNameResponseOverlay")}))),t.istecdoc&&$.ajax({type:"GET",dataType:"script",async:!1,url:t.tecdocAuthUrl+t.sellerid,success:function(e){"true"==e&&$("#copyrt").html(t.tecdocCr)}})}catch(t){}},useFitmentService:function(){return this.conf.useFitmentService},setMakesForStreetNames:function(){$(document).trigger("rover",{sid:"p2047675.l7767"});var t=this.conf.vurl+"fitment/getdata?site="+this.conf.site+"&cat="+this.conf.categoryId;t=77==this.conf.site?t+"&pn=DEM_Make,DEM_StreetName":t+"&pn=UKM_Make,UKM_StreetName";this.makeCall(t,this.parseVServiceMakesResponse)},parseVServiceMakesResponse:function(t){var e=this;if("SUCCESS"===t.status.name)if(0<t.data.length){e.pubsub.publish("_OPEN_OLAY",{cmpId:e.conf.mainId+"streetNameLookupOverlay",trigger:e.conf.mainId+"anc"}),$("#"+e.conf.mainId+"goStreetBtn").attr("disabled",!0);var i=t.data.length;e.conf.makesStreenName=t.data;var n=document.getElementById(e.conf.mainId+"s-make"),s=document.getElementById(e.conf.mainId+"s-name");e.clearOptions(n),e.clearOptions(s),n.options[0]=new Option("-"+e.conf.strtNMakeLbl+"-",""),s.options[0]=new Option("-"+e.conf.strtNameLbl+"-",""),s.disabled=!0;for(var r=0;r<i;r++)77==e.conf.site?n.add(new Option(t.data[r].DEM_Make,t.data[r].DEM_Make)):n.add(new Option(t.data[r].UKM_Make,t.data[r].UKM_Make));n.onchange=function(){e.selectedMake(this)},s.onchange=function(){e.selectedStreetName(this)},n.focus()}else e.showHide("dcthd ctVMTxt ctVNMTxt dthr dctbl err".split(" "),!0),e.showHide(["sn-NMTxt","ctshd"],!1);else e.showHide("dcthd ctVMTxt ctVNMTxt dthr dctbl err".split(" "),!0),e.showHide(["sn-NMTxt","ctshd"],!1)},selectedMake:function(t){var e=$("#"+this.conf.mainId+"goStreetBtn"),i=document.getElementById(this.conf.mainId+"s-name");if(t&&0<t.selectedIndex){if(void 0!==(t=this.getStreetNamesFromMake(t.options[t.selectedIndex].value))&&0<t.length)for(i.disabled=!1,this.clearOptions(i),i.options[0]=new Option("-"+this.conf.strtNameLbl+"-",""),e=0;e<t.length;e++)i.add(new Option(t[e],t[e]))}else this.clearOptions(i),i.disabled=!0,e.attr("disabled",!0)},selectedStreetName:function(t){var e=this,i=$("#"+e.conf.mainId+"goStreetBtn");if(t&&0<t.selectedIndex){var n=t.options[t.selectedIndex].value;n&&(i.attr("disabled",!1),i.click((function(){$(document).trigger("rover",{sid:"p2047675.l7768"}),e.makeStreetNameCompCheckCall(n)})))}else i.attr("disabled",!0)},makeStreetNameCompCheckCall:function(){var t=this.conf.vurl;this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.mainId+"streetNameLookupOverlay"}),this.showHide("dcthd ctVMTxt sn-NMTxt ctVNMTxt dctbl err".split(" "),!0);t=(t=t+"fitment/getdata?cat="+this.conf.categoryId+"&site="+this.conf.site)+"&pn="+this.getPropertyNames(this.srchFlds,",");var e=document.getElementById(this.conf.mainId+"s-make"),i=document.getElementById(this.conf.mainId+"s-name");e=e.options[e.selectedIndex].value,i=i.options[i.selectedIndex].value,t=77==this.conf.site?t+"&fmt=list&sfp=DEM_Make:"+e+",DEM_StreetName:"+i:t+"&fmt=list&sfp=UKM_Make:"+e+",UKM_StreetName:"+i;this.makeCall(t,this.parseStreetNameLookupResponse)},parseStreetNameLookupResponse:function(t){if("SUCCESS"===t.status.name)if(0<t.data.length){var e=t.data.length,i=this.srchFlds,n=this.dsplNames;this.clearTable(this.conf.mainId+"sn-evtbl");for(var s=n.length,r=document.getElementById(this.conf.mainId+"sn-evtbl"),a=r.insertRow(0),o="",l=0;l<s;l++)o=0==l?o+"<td>&nbsp;</td>":o+"<td>"+n[l]+"</td>";for(a.innerHTML=o,this.overlayRowCount=e,n=0;n<e;n++)for(a=r.insertRow(n+1),o=t.data[n],l=0;l<s;l++)if(0==l){var d=a.insertCell(l),c=null;try{c=document.createElement("<input name='vehpick' type='radio' id='"+this.conf.mainId+"pick"+n+"' value='"+this.getChoosenVehicle(i,o,!0)+"' />")}catch(t){}c||((c=document.createElement("INPUT")).type="RADIO",c.id=this.conf.mainId+"pick"+n,c.name="vehpick",c.value=this.getChoosenVehicle(i,o,!0)),d.appendChild(c)}else(d=a.insertCell(l)).innerHTML=o[i[l-1]];this.pubsub.publish("_OPEN_OLAY",{cmpId:this.conf.mainId+"streetNameResponseOverlay"})}else this.showHide("dcthd ctVMTxt ctHTMTxt ctHTIFTxt ctVNMTxt dthr dctbl err".split(" "),!0),this.showHide(["ctHTNMTxt","ctshd"],!1)},getStreetNamesFromMake:function(t){var e=[],i=this.conf.makesStreenName;if(0<i.length)for(var n=0;n<i.length;n++){var s=i[n].ChildProperty;if(77==this.conf.site){if(i[n].DEM_Make===t){for(t=0;t<s.length;t++)e.push(s[t].DEM_StreetName);break}}else if(i[n].UKM_Make===t){for(t=0;t<s.length;t++)e.push(s[t].UKM_StreetName);break}}return e},bindHandlr:function(){var t=this;t.handlrBinded=!0,$("body").scroll((function(){t.initialize()})),$("body").mouseover((function(){t.initialize()})),$(document).keypress((function(){t.initialize()}))},initialize:function(){if(this.initz)return!1;this.start&&(this.useFitmentService()?this._fitmentService.initializeCalls():this.dsplRelCall()),this.start=!1},dsplRelCall:function(){var t;if($("#"+this.conf.mainId).show(),this.conf.fitsFiltr&&-1!=this.conf.fitsFiltr.indexOf("Plat_Gen")){t=this.conf.fitsFiltr.split("|");for(var e="",i=0;i<t.length;i++){var n=t[i].split(":");1<n.length&&"Plat_Gen"!=n[0]&&(e+=t[i]+"|")}this.conf.fitsFiltr=e}$("#"+this.conf.pgnId).hide(),this.conf.myVehiclesOn||(this.conf.fitsFiltr=""),this.conf.sitespdOptim&&!this.useFitmentService()?(this.conf.myVehiclesOn||(this.conf.fitsFiltr=""),1700===this.conf.catalogId?(t=this.getUrl(!1,!1,this.MDDS),this.makeCall(t,this.displayFilters)):this.handleFilters()):(t=this.getUrl(!1,!1,this.MDDS),this.makeCall(t,this.displayFilters)),this.conf.myVehiclesOn&&(t=this.getUrl(!1,!1,this.MDDS),this.makeCall(t+"&rf=vehicles",this.displayMyVehicles),this.conf.fitsFiltr&&!this.conf.isBySpec)&&(t=this.getUrl(!1,!1,this.CREQ),t+="&sfp="+encodeURIComponent(this.conf.fitsFiltr),"100"==this.conf.site&&null!=this.conf.productId&&null!=this.conf.productId&&""!=this.conf.productId||(t+="&pn="+this.getPropertyNames(this.propNames)),t+="&page=1",this.makeCall(t,this.displayCompatibilityInfo),this.showHide(["dctbl","err"],!0),this.showHide(["dthr"],!1))},makeCall:function(t,e){this.ajaxUtil.getJSON(t,e,this),this.startTime=(new Date).getTime()},skipFitmentViewSetSkipProperty:function(t,e){this.conf.fitmentViewSetSkipProperty&&(t.shift(),e.shift())},displayFilters:function(t){if("SUCCESS"===t.status.name){this.clearTable(this.conf.slctId);var e=t.displayNames,i=t.propertyNames;t=t.data;this.srchFlds=i;var n=document.getElementById(this.conf.slctId);if(n){var s=n.insertRow(0);s.style.fontWeight="bold",this.skipFitmentViewSetSkipProperty(e,i,this.conf.site,this.conf.catalogId);for(var r=i.length,a=0;a<e.length;a++){var o=s.insertCell(a),l=e[a],d=document.createElement("label");"3"!=this.conf.site&&"15"!=this.conf.site&&"77"!=this.conf.site&&"71"!=this.conf.site&&"101"!=this.conf.site&&"186"!=this.conf.site||"Variant"!==l||(o.style.padding="0 10px 0 0"),d.htmlFor=i[a],d.innerHTML=l,o.appendChild(d)}s=n.insertRow(1),this.createFilters(s,i,e),this.findIfBoats(t),this.isCompLoaded=!1,this.fillFilters(t),o=s.insertCell(r),"77"!=this.conf.site&&(o.colSpan="2",o.style.padding="10px 0 10px 0"),o.style.paddingRight="10px",o.style.verticalAlign="top",o.appendChild(this.buildGo()),(s=document.getElementById(this.srchFlds[a]))&&0<s.selectedIndex&&this.makeNavRelCall(s)}this.makeFirstCall(),this.conf.myVehiclesOn&&100!=this.conf.site&&$("#"+this.conf.mainId+"vehfltr")&&s&&(s.disabled=!0),this.initz=!0,this.conf.byApp&&!this.SP?this.showHide(["dthr"],!1):this.showHide(["dthr"],!0),this.buildAddCB(n.parentNode)}else this.serviceErr()},findIfBoats:function(){var t=this.srchFlds;this.isBoats=!1;for(var e=0;e<t.length;e++)"B_Component"==t[e]&&(this.isBoats=!0)},setHsnTsn:function(){var t=this,e=t.srchFlds,i=$("#"+t.conf.mainId+"goBtn"),n=$("#"+t.conf.mainId+"Go");for(i.click((function(){t.makeHTPageCall(null,!0),document.querySelector("[id$=err].ptb2015").style.display="none"})),t.resetSrchFldFilters(),i&&n&&(i.attr("disabled",!0),n.attr("disabled",!0)),t.showHide(["goThrbr"],!0),t.showHide(["goSpan"],!1),n=1;n<e.length;n++){var s=document.getElementById(e[n]);s.selectedIndex=0,s.disabled="1"!=n}var r=document.getElementById(t.conf.mainId+"hsnBox"),a=document.getElementById(t.conf.mainId+"tsnBox");r.value="HSN",a.value="TSN",r.style.color="#999",a.style.color="#999",r.onfocus=function(){"HSN"==r.value&&t.emptyTextBox(this)},a.onfocus=function(){"TSN"==a.value&&t.emptyTextBox(this),""!=r.value&&"HSN"!=r.value?i.attr("disabled",!1):i.attr("disabled",!0)}},handleFilters:function(){var t=this.srchFlds=this.conf.propNames,e=this.conf.dsplNames,i=t.length;if("100"==this.conf.site&&848!=this.conf.catalogId)for(var n=0;n<t.length;n++)"Submodel"==t[n]?t[n]=this.conf.propNames[n]="Trim":"Engine - Liter_Display"==t[n]&&(t[n]=this.conf.propNames[n]="Engine");var s=document.getElementById(this.conf.slctId);if(s){var r=s.insertRow(0);for(r.style.fontWeight="bold",n=0;n<e.length;n++){var a=r.insertCell(n),o=e[n],l=document.createElement("label");l.htmlFor=t[n],l.innerHTML=o,a.appendChild(l)}if(r=s.insertRow(1),this.createFilters(r,t,this.conf.dsplNames),this.buildAddCB(s.parentNode),a=this.conf.startYear,s=this.conf.endYear,e=document.getElementById(t[0]))for(n=1;s>=a;s--)o=new Option(s,s),e.options[n]=o,n++,this.preSelect(e,o);for(n=1;n<t.length;n++)a=document.getElementById(t[n]),this.SP[a.id]&&""!==this.SP[a.id]?(s=new Option(this.SP[a.id],this.SP[a.id]),a.options[a.options.length]=s,s.selected=!0):this.pdsFlds[a.id]&&""!==this.pdsFlds[a.id]&&(s=new Option(this.pdsFlds[a.id],this.pdsFlds[a.id]),a.options[a.options.length]=s,s.selected=!0);(a=r.insertCell(i)).style.paddingRight="10px",a.style.verticalAlign="top",a.appendChild(this.buildGo()),e&&0<e.selectedIndex&&this.makeNavRelCall(e)}this.makeFirstCall(),this.init=!0,this.conf.byApp&&this.conf.totCount<=this.conf.showAllCt?this.showHide(["dthr"],!1):this.showHide(["dthr"],!0),this.showHide(["dslct"],!1)},serviceErr:function(){this.showHide(["err","serr"],!1),this.showHide(["dthr","cerr","dslct","norecco"],!0)},buildGo:function(){var t=this,e=document.createElement("INPUT");if(e.type="BUTTON",e.id=t.conf.mainId+"Go",e.className="btn btn-s btn-ter",e.style.marginTop="-2px",e.value="100"==t.conf.site?e.name=t.conf.goTxt:e.name=t.conf.checkComptxt,e.title=e.value,e.disabled=!0,"77"==t.conf.site){var i=document.getElementById(t.conf.mainId+"htfltr");i&&i.checked&&(e.disabled=!1)}return e.onclick=function(){if(t.isGoClicked=!0,t.conf.myVehiclesOn&&t.conf.isImplicitSaveOn?"100"==t.conf.site?(t.makePageCall(null,!0,!0,!0),t.setMyVehicleDropDown(!1)):(t.isSavedVehClkd=!1,t.chckFitsClicked=!0,t.makePageCall(null,!0,!1,!0)):t.makePageCall(null,!0,!1,!0),t.conf.isMerchRefreshEnabled){var e=t.getSrchFldPairs&&t.getSrchFldPairs();t._fitmentService&&t._fitmentService.triggerMerchRefresh(decodeURIComponent(e))}},(i=document.createElement("div")).className="goButton",i.appendChild(e),i},buildAddCB:function(t){if((-1==this.expCount||this.expCount<this.conf.myVehicleMaxNum)&&this.conf.isUserSignedIn&&this.conf.showExplicitChbox){var e=document.createElement("input");e.type="checkbox",e.name="name",e.value="value",e.id="expCB";var i=document.createElement("div");i.id="expCBLb",i.innerHTML=this.conf.explicitChboxLabel,t.appendChild(e),t.appendChild(i),e.checked=!0}},makePageCall:function(t,e,i,n){e&&(this.showAll=!1),this.useFitmentService()?this._fitmentService.makePageCall(t,e):($("#"+this.conf.pgnId).hide(),e=this.getUrl(!1,this.showAll,this.CREQ,i),"100"==this.conf.site&&null!=this.conf.productId&&null!=this.conf.productId&&""!=this.conf.productId||(e+="&pn="+this.getPropertyNames(this.propNames)),e=t?e+"&page="+t:e+"&page=1",n&&(e+="&goclk=1",(t=document.getElementById("expCB"))&&t.checked&"none"!=t.style.display&&(e+="&expsv=true")),this.makeCall(e,this.displayCompatibilityInfo)),this.showHide(["dctbl","err","reloaderr"],!0),this.showHide(["dthr"],!1)},displayMyVehicles:function(t){if("SUCCESS"===t.status.name&&"null"!=t.data){var e=t.data;t=t.propertyNames;(e=e[0])?(this.getDropdownObject(e,t),t=this.conf.myVehicleMaxNum,this.expCount=null!=e.E&&null!=e.E?e.E.length:0,null!=e.E&&null!=e.E&&e.E.length>=t&&this.showHideWithID(["expCB","expCBLb"],!0,"")):(this.conf.myVehiclesOn=!1,this.showHide(["mvRow"],!0),this.showHide(["vehfltr"],!0),(e=document.getElementById(this.conf.mainId+"htdiv"))&&(e.className="",e.style.paddingLeft="12px"),t&&(t[1].disabled=!1))}else this.serviceErr(),this.showHide(["fltTxt"],!0)},getDropdownObject:function(t,e){var i=this.conf;if(this.iLen=this.eLen=0,t){this.showHide(["fltTxt"],!0),this.showHide(["topMsg","mvdd","or"],!1),t.E&&(this.eLen=t.E.length),t.I&&(this.iLen=t.I.length);var n=$("li[value=13]"),s=$("li[value=20]");if($("li[value=11]").css("display","none"),$(n).removeClass("op").addClass("opd hrl"),$(s).removeClass("op").addClass("opd"),$(n).hover((function(){$(this).css("cursor","default"),$(this).css("background-color","#fff")})),$(s).hover((function(){$(this).css("cursor","default"),$(this).css("background-color","#fff")})),$("li[value=14]").removeClass("op").addClass("opd hrl ptblr"),i.isUserSignedIn&&t.E||($("li[value^=20]").css("display","none"),$(n).css("padding-top","10px"),$(n).removeClass("hrl")),i.isUserSignedIn)for(n=0;n<parseInt(i.expCount);n++)this.setVehicles(n,t.E,e,!0);for(n=0;n<parseInt(i.impCount);n++)this.setVehicles(n,t.I,e,!1);this.valFromURL&&0!=this.valFromURL&&this.selectOption(this.valFromURL)}},selectOption:function(t){for(var e=-1,i=(t=t.replace(/[\[\]']+/g,""),1);i<=this.conf.impCount;i++){var n;if(""!=(n=(n=$("li[value=30"+i+"]").html()).replace(/[\[\]']+/g,""))&&-1!=t.search(n)){e=i;break}}-1!=e&&$("li[value=30"+e+"]").addClass("sel")},isNull:function(t){return null==t||"null"==t},setVehicles:function(t,e,i,n){var s,r=this,a="",o="";if(s=n?$("li[value=20"+parseInt(t+1)+"]"):$("li[value=30"+parseInt(t+1)+"]"),e&&e[t]){if("0"==e[t][0]||"100"==e[t][0]||"2"==e[t][0]){for(var l=3;5>=l;l++)r.isNull(e[t][l])||(o+=e[t][l]+" ",a+=i[l-3]+":"+e[t][l]+"|");"100"!=r.conf.site&&"2"!=r.conf.site||848==r.conf.catalogId?a+="null"==e[t][7]?"":i[3]+":"+e[t][7]:(a+="null"==e[t][7]?"":"Submodel:"+e[t][7],a+="null"==e[t][6]?"":"|Trim:"+e[t][6]),r.isNull(e[t][6])?r.isNull(e[t][7])||(o+=e[t][7]+" "):o+=e[t][6]+" ",r.isNull(e[t][8])||(a="100"!=r.conf.site&&"2"!=r.conf.site||848==r.conf.catalogId?a+"|"+i[4]+":"+e[t][8]:a+"|Engine - Liter_Display:"+e[t][8]),10>e[t].length||"100"!=r.conf.site&&"2"!=r.conf.site||848==r.conf.catalogId||r.isNull(e[t][9])?r.isNull(e[t][8])||(o+=e[t][8]+" "):(o+=e[t][9]+" ",a+="null"==e[t][9]?"":"|Engine:"+e[t][9])}else if(e[t][0])for(l="77"==r.conf.site?1:0;l<=i.length;l++){var d=e[t]["77"==r.conf.site?l+2:l+3];r.isNull(d)||(a+=i[l]+":"+d+"|",o="--"==d?o+"[--]":o+d,!r.isNull(e[t][l+1])&&"undefined"!=e[t][l+1]&&(o+=" "))}a=encodeURIComponent(a);var c=e[t][2],u=e[t][1];$(s).html(o),$(s).attr("u",a),"null"!=c&&"null"!=u&&($(s).attr("vt",c),$(s).attr("si",u),"0"==u&&$(s).attr("title",r.conf.dsContent)),"1"==u&&c==r.vehicleType?($(s).bind("click",(function(){$(document).trigger("rover",{sid:"p2047675.l10055"}),r.makeSavedVehPageCall(a,o,n,c,u)})),r.addMyGarageTracking(),$(s).addClass("plr")):$(s).removeClass("op").addClass("opa")}else $(s).css("display","none")},makeSavedVehPageCall:function(t,e,i,n,s){if(this.useFitmentService())this._fitmentService.makeCompatibilityCheckFromSelectedSavedVehicle(t,e);else{var r=this.getUrl(!1,!0,this.CREQ);"100"==this.conf.site&&null!=this.conf.productId&&null!=this.conf.productId&&""!=this.conf.productId||(r+="&pn="+this.getPropertyNames(this.propNames)),r=r+"&page=1&sfp="+t,r+="&_trksid="+this.conf.trksid,this.showAll=!1,this.recentValue=e,(this.isSavedVehClkd=i)&&(this.recVal=e,this.recSfp=t,this.vehtype=n,this.si=s),this.trgTopCompUpd=!0,this.makeCall(r,this.displayCompatibilityInfo),this.resetSrchFldFilters(),this.chosen=this.getSelectedVehicle(t),this.updateVehicleChosen(this.chosen),this.showHide(["dctbl","err"],!0),this.showHide(["dthr"],!1)}},resetSrchFldFilters:function(){var t=this.srchFlds;if(null!==t)for(var e=0;e<t.length;e++){var i=document.getElementById(t[e]);i&&(i.selectedIndex=0),i.disabled=i?i.index:0<e}this.setButtonState()},showHide:function(t,e){for(var i=this.conf.mainId,n=0;n<t.length;n++){var s=document.getElementById(i+t[n]);s&&(s.style.display=e?"none":"",s.setAttribute("aria-hidden",e?"true":"false"))}},showHideWithID:function(t,e,i){for(var n=0;n<t.length;n++){var s=document.getElementById(i+t[n]);s&&(s.style.display=e?"none":"")}},makeFirstCall:function(){if(!this.conf.fitsFiltr||""==this.conf.fitsFiltr&&!this.conf.myVehiclesOn){var t=!0;$.isEmptyObject(this.SP)&&(t=!1),t?this.makePageCall(null,!0):this.conf.byApp&&!this.conf.fitsFiltr&&this.makeShowAllCall()}},makeShowAllCall:function(){this.useFitmentService()?this._fitmentService.makeShowAllCall():(sUrl=this.getUrl(!1,!0,this.CREQ),"100"==this.conf.site&&null!=this.conf.productId&&null!=this.conf.productId&&""!=this.conf.productId||(sUrl+="&pn="+this.getPropertyNames(this.propNames)),sUrl+="&page=1",this.makeCall(sUrl,this.displayCompatibilityInfo)),this.showAll=!0,this.showHide(["dctbl","err"],!0),this.showHide(["dthr"],!1)},getVehicleType:function(){return this.vehicleType?this.vehicleType:"1"},setMyVehicleDropDown:function(t,e,i){var n="",s="",r=this.srchFlds,a="",o="",l=this.conf;if(this.useFitmentService())this._fitmentService.setMyVehicleDropDown(t,e,i);else if(null!==r&&this.uniqueVehicle){if(t)s=this.recVal,n=this.recSfp,a=this.vehtype,o=this.si,this.recentValue=s;else if(null!=e&&null!=i)n=e,s=i,a=this.getVehicleType(),o="1",n=encodeURIComponent(n);else{for(a=0;a<r.length;a++)if((o=document.getElementById(r[a]))&&0!==o.selectedIndex){if(0!==a&&(n+="|",s+=" "),e=o.options[o.selectedIndex].value,"100"==this.conf.site&&"Trim"===r[a]&&848!=l.catalogId){if(-1!=(i=this.isFieldsMapped1to1("Submodel","Trim")))null!=(d=document.getElementById("Submodel"))&&null!=d&&(n+="Submodel:"+d.options[i].value+"|")}else"100"==this.conf.site&&"Engine"===r[a]&&848!=l.catalogId&&(-1!=(i=this.isFieldsMapped1to1("Engine - Liter_Display","Engine"))&&(null!=(d=document.getElementById("Engine - Liter_Display"))&&null!=d&&(n+="Engine - Liter_Display:"+d.options[i].value+"|")));n+=o.id+":"+e,s+=e}a=this.getVehicleType(),o="1",n=encodeURIComponent(n),this.recentValue=""}for(r=this.iLen,r=this.iLen==l.impCount?l.impCount:this.iLen+1,this.iLen=r,e=1,i=!1,d=1;d<=l.impCount;d++){if((c=$("li[value=30"+d+"]").html())&&s.replace(/\s/g,"")==c.replace(/\s/g,"")){e=d,i=!0;break}}if(1!=e||i)1!=e&&this.changeInternalDDOrder(e);else for($($("#"+l.mainId+"ieveh .crtval").children()[1]).html(s),i=1;i<=r;i++){e=$("li[value=30"+i+"]");var d=$(e).hasClass("opa"),c=$(e).attr("u"),u=$(e).attr("vt"),h=$(e).attr("si"),p=$(e).html();$(e).html(s),$(e).attr("u",n),d&&($(e).removeClass("opa").addClass("op plr"),$(e).attr("title","")),"null"!=a&&"null"!=o&&($(e).attr("vt",a),$(e).attr("si",o),"0"==o?($(e).attr("title",l.dsContent),$(e).removeClass("op plr").addClass("opa")):a!=this.vehicleType&&$(e).removeClass("op plr").addClass("opa")),$(e).css("display",""),s=p,n=c,a=u,o=h}for(n=1;n<=r;n++)this.setClickEvnt(n,t),e=$("li[value=30"+n+"]"),s=$(e).hasClass("op"),l=$(e).hasClass("plr"),s&&!l&&$(e).addClass("plr")}},changeInternalDDOrder:function(t){var e=$("li[value=30"+t+"]");for(nUrl=$(e).attr("u"),nType=$(e).attr("vt"),nSInfo=$(e).attr("si"),nVal=$(e).html(),e=1;e<=t;e++){var i=$("li[value=30"+e+"]"),n=$(i).hasClass("opa"),s=$(i).attr("u"),r=$(i).attr("vt"),a=$(i).attr("si"),o=$(i).html();$(i).html(nVal),$(i).attr("u",nUrl),n&&($(i).removeClass("opa").addClass("op plr"),$(i).attr("title","")),"null"!=nType&&"null"!=nSInfo&&($(i).attr("vt",nType),$(i).attr("si",nSInfo),"0"==nSInfo?($(i).attr("title",this.conf.dsContent),$(i).removeClass("op plr").addClass("opa")):"3"==nType&&($(i).attr("title",this.conf.mcContent),$(i).removeClass("op plr").addClass("opa"))),nVal=o,nUrl=s,nType=r,nSInfo=a}},addMyGarageTracking:function(){$("#"+this.conf.mainId+"ieveh .ptblr").bind("click",(function(){$(document).trigger("rover",{sid:"p2047675.l44447"})}))},resetMyVehicleDD:function(){for(var t=1,e=1;e<=this.conf.impCount;e++){var i=$("li[value=30"+e+"]").html();if(this.recentValue.replace(/\s/g,"")==i.replace(/\s/g,"")){t=e;break}}if(1!=t)for(this.changeInternalDDOrder(t),t=1;t<=this.iLen;t++)this.setClickEvnt(t,!1)},setClickEvnt:function(t,e){var i=this,n=$("li[value=30"+t+"]"),s=$(n).html(),r=$(n).attr("vt"),a=$(n).attr("si");$(n).unbind("click"),"1"==a&&r==i.vehicleType&&$(n).bind("click",(function(){$(document).trigger("rover",{sid:"p2047675.l10055"}),i.makeSavedVehPageCall($(n).attr("u"),s,!1,r,a)})),i.addMyGarageTracking(),e?$("li[value=301]").removeClass("sel"):($(n).removeClass("sel"),$("li[value=301]").addClass("sel"),$("li[value^=20]").removeClass("sel"))},_removeClassByRegex:function(t,e,i){var n=RegExp(i?"^"+e+".+":"^.+"+e+"$");t.removeClass((function(t,e){return e.split(/\s+/).filter((function(t){return n.test(t)})).join(" ")}))},resetComptabilityViewStyling:function(t){var e=t.closest("#fits-msg-main");this._removeClassByRegex(e,"-border",!1),t=t.find("#fits-icon"),this._removeClassByRegex(t,"icon-",!0),(t=$("#fits-msg"))&&0<t.length&&(t.removeClass(),t.empty()),$("#fits-select-btn")&&0<$("#fits-select-btn").length&&$("#fits-select-btn").remove(),$("#fits-action-link")&&0<$("#fits-action-link").length&&$("#fits-action-link").remove(),$("#fits-select-btn")&&0<$("#fits-select-btn").length&&$("#fits-select-btn").remove(),$("#fits-edit-btn")&&0<$("#fits-edit-btn").length&&$("#fits-edit-btn").hide(),$("#fitsMoreInfoContent")&&0<$("#fitsMoreInfoContent").length&&$("#fitsMoreInfoContent").children().remove(),$("#fitsMoreInfo")&&0<$("#fitsMoreInfo").length&&$("#fitsMoreInfo").hide(),$("#fits-msg-main")&&0<$("#fits-msg-main").length&&$("#fits-msg-main").removeClass("mrb10")},addClickEvent:function(t){var e=this;$(t).bind("click",(function(){e.showDiagram($(this).data("href"),this.id),e.updateOEMDiagram($(this).data("refno"),$(this).data("qty"))}))},addCompatibilityViewStyling:function(t,e){t.closest("#fits-msg-main").addClass(e+"-border"),t.find("#fits-icon").addClass("icon-"+e),t.find("#fits-msg").addClass("fits-msg__"+e)},updateFitsMessage:function(t,e,i){(t=t.find("#fits-msg")).text(e),i&&t.append("&nbsp;<span class='selectedVehicle'>"+this.chosen+"</span>")},enableCompViewFitsYes:function(t){this.addCompatibilityViewStyling(t,this.fitsMessageDictionary.FITS_YES_MSG_TYPE),this.updateFitsMessage(t,this.fitsMessageDictionary.FITS_YES,!0),t.find("#fits-edit-btn").show()},enableCompViewFitsMaybe:function(t){this.addCompatibilityViewStyling(t,this.fitsMessageDictionary.FITS_MAYBE_MSG_TYPE),this.updateFitsMessage(t,this.fitsMessageDictionary.FITS_MAYBE,!0)},enableCompViewFitsWarning:function(t){this.addCompatibilityViewStyling(t,this.fitsMessageDictionary.FITS_NO_MSG_TYPE),this.updateFitsMessage(t,this.fitsMessageDictionary.FITS_NO,!0),t.find("#fits-edit-btn").show()},enableCompViewFitsError:function(t){this.addCompatibilityViewStyling(t,this.fitsMessageDictionary.FITS_TRY_AGAIN_MSG_TYPE),this.updateFitsMessage(t,this.fitsMessageDictionary.FITS_TRY_AGAIN,!1)},showHideEle:function(t,e){for(var i=0;i<t.length;i++){var n=document.getElementById(t[i]);n&&(n.style.display=e?"none":"")}},displayTopCompInfo:function(t){if("SUCCESS"===t.status.name)if(this.updateVehicleMessage(this.chosen),t.data&&0<t.data.length){if(t.data[0]&&t.data[0].FitmentComments&&0<t.data[0].FitmentComments.length){var e=t.data[0].FitmentComments[0];if(e&&0<e.length)if(this.showHideEle(["topCompNotes"],!1),40>e.length)$("#notesSp").html(e),$("#readMoreId").hide();else{var i=e.substring(0,40);$("#readNotesId").val(e),$("#notesSp").html(i).append("... "),$("#readMoreId").show()}}e=this.getFourthAttribute(t.data[0]),t=this.getFifthAttribute(t.data[0]),5<=this.fldsSel||e&&void 0===t&&4<=this.fldsSel||void 0===e&&3<=this.fldsSel?this.displayTopCompInfoExact():this.displayTopCompInfoMaybe()}else this.showHideEle(["topFitsNot","topSeeAll","topSeeIndent"],!1),this.showHideEle(["topFitsNeed","topFits","topFitsMost","topSeeMore","topCompNotes"],!0),$("#topCompNotes .l-dl").text("");else this.showHideEle(["topSeeAll"],!1),this.showHideEle("topFitsNeed topFits topFitsMost topSeeMore topCompNotes topFitsNot topSeeIndent".split(" "),!0)},_displayTopCompInfo:function(t){if($fitsContentContainer=$("#fits-msg-content"),this.resetComptabilityViewStyling($fitsContentContainer),"SUCCESS"===t.status.name)if(t.data&&0<t.data.length){var e=this.getFourthAttribute(t.data[0]),i=this.getFifthAttribute(t.data[0]);this.fldsSelected=this.selVel.split("~").length,5<=this.fldsSelected||e&&void 0===i&&4<=this.fldsSelected||void 0===e&&3<=this.fldsSelected?this.enableCompViewFitsYes($fitsContentContainer):this.enableCompViewFitsMaybe($fitsContentContainer),t.data[0]&&t.data[0].FitmentComments&&0<t.data[0].FitmentComments.length&&t.data[0].FitmentComments[0]&&""!=t.data[0].FitmentComments[0]&&(e=(e=t.data[0].FitmentComments[0]).replace(/<br\s*\/?>/gi,"&nbsp;"),$("#fitsMoreInfo").show(),$("#fits-msg-main").addClass("mrb10"),$("#fitsMoreInfoContent").append('<div class="fits-content-details">'+this.fitsMessageDictionary.FITS_IMPORTANT+": "+e+"</div>"),void 0!==t.data[0].DiagramURL&&0<t.data[0].DiagramURL.length&&($("#fitsMoreInfoContent").append('<span class="fitsDiagram"><a id="diagramLink">'+this.fitsMessageDictionary.FITS_SEE_DIAGRAM+"</a></span>"),$("#diagramLink").data({href:t.data[0].DiagramURL[0],refno:t.data[0].DiagramURL[1],qty:t.data[0].DiagramURL[2]}),this.addClickEvent("#diagramLink")))}else this.enableCompViewFitsWarning($fitsContentContainer);else this.enableCompViewFitsError($fitsContentContainers)},displayTopCompInfoMaybe:function(){this.showHideEle(["topFitsMost","topSeeMore","topSeeIndent"],!1),this.showHideEle(["topFitsNeed","topFits","topFitsNot","topSeeAll","topCompNotes"],!0)},displayTopCompInfoExact:function(){this.showHideEle(["topFits","topSeeAll","topSeeIndent"],!1),this.showHideEle(["topFitsNeed","topFitsMost","topFitsNot","topSeeMore"],!0)},getFourthAttribute:function(t){var e=void 0;return"3"==this.conf.site&&t.Variant&&(e=t.Variant),"77"==this.conf.site||"71"==this.conf.site||"101"==this.conf.site||"186"==this.conf.site?t.Platform&&(e=t.Platform):t.Trim&&(e=t.Trim),e},getFifthAttribute:function(t){var e=void 0;return"3"==this.conf.site?t["Cars Type"]&&(e=t["Cars Type"]):"77"==this.conf.site||"71"==this.conf.site||"101"==this.conf.site||"186"==this.conf.site?t.Type&&(e=t.Type):t.Engine&&(e=t.Engine),e},updateVehicleMessage:function(t){var e=$("#topFits .l-dl");e.text(t),selector="#topFitsMost .l-dl",(e=$(selector)).text(t),selector="#topFitsNot .l-dl",(e=$(selector)).text(t)},displayCompatibilityInfo:function(t){(this.isGoClicked||this.trgTopCompUpd)&&(this.showTopCompMsg&&(this.trgTopCompUpd=!1,this.displayTopCompInfo(t)),this.showTopCompSection&&(this.trgTopCompUpd=!1,this._displayTopCompInfo(t)),this.triggerTopUpdate=this.isGoClicked=!1),this.endTime=(new Date).getTime(),this.recentValue&&""!=this.recentValue&&($($("#"+this.conf.mainId+"ieveh .crtval").children()[1]).html(this.recentValue),this.isSavedVehClkd?this.setMyVehicleDropDown(!0,null,null):this.resetMyVehicleDD()),12e3>this.endTime-this.startTime?"SUCCESS"===t.status.name?(t.displayNames&&0===this.dsplNames.length&&(this.dsplNames=t.displayNames),t.propertyNames&&(this.propNames=t.propertyNames),this.uniqueVehicle=100==this.conf.site||t.uniqueVehicle,this.clearTable(this.conf.mainId+"ctbl"),this.conf.myVehiclesOn&&(this.updateMyVeh&&($($("#"+this.conf.mainId+"ieveh .crtval").children()[1]).html(this.chosen),this.setMyVehicleDropDown(!1,this.sfArg,this.chosen),this.valFromURL=this.chosen,this.updateMyVeh=!1),this.chckFitsClicked&&(this.setMyVehicleDropDown(!1,null,null),this.chckFitsClicked=!1)),this.updateVehicleChosen(this.chosen),0<t.data.length?(this.drawTable(this.dsplNames,this.propNames,t.data),this.showHide(["stts","note","epid"],!1),t.pageInfo&&this.buildPagination(t.pageInfo),this.showHide(["dcthd"],!this.conf.byApp||!this.showAll),this.showHide(["ctTtlTxt"],!this.showAll),this.showHide(["ctTxt"],this.showAll),this.showHide(["ctVNMTxt","ctHTNMTxt","ctHTIFTxt","sn-NMTxt"],!0),this.showHide(["ctVMTxt"],!(!this.htselected&&!this.showAll)),this.showHide(["ctHTMTxt"],!(this.htselected&&!this.showAll)),this.showHide(["dctbl"],!1),this.showHide(["ctshd"],!1),this.showHide(["err","cerr","norecco"],!0)):t.noCompatibilityBySpec?(this.showHide(["err","cbserr"],!1),this.showHide(["dthr","cerr","dslct","norecco"],!0)):(this.conf.isNullReccoEnabled&&this.setURLToNullRecco(),this.showHide(["err","cerr","norecco"],!1),this.useFitmentService()||$(document).trigger("rover",{sid:"p2047675.l4091"}),this.showHide("dcthd ctVMTxt ctHTMTxt ctHTNMTxt ctHTIFTxt sn-NMTxt".split(" "),!0),this.showHide(["ctTxt","serr","ctTtlTxt"],!0),this.showHide(["ctVNMTxt","ctshd"],!1)),this.initz=!0,this.showHide(["dthr"],!0)):t.noCompatibilityBySpec?(this.showHide(["err","cbserr"],!1),this.showHide(["dthr","cerr","dslct","norecco"],!0)):this.serviceErr():this.serviceErr()},setURLToNullRecco:function(){var t,e=this.conf.categoryId,i=this.conf.mainId;if(t=this.conf.nullBaseURL+"?_from=R40&_nkw="+this.nullReccoKeyword,this.selVel&&""!=this.selVel){t+="&selvel="+this.selVel;var n="",s=this.selVel.split("~");if(1<s.length)for(var r=0;r<s.length;r++)"null"!=s[r]&&(0!=r&&(n+=","),n+=r+1);t+="&selfil="+encodeURIComponent(n)}e&&(t+="&_sacat="+e),"100"==this.conf.site&&(t+="&_vxp=mtr"),$("#nullRecco").attr("href",t),$("#nullRecco").click((function(){$(document).trigger("rover",{sid:"p2047675.l4092"})})),$("#"+i+"norecco").css({color:"#333","padding-left":"5px"}),$("#"+i+"cerr > p > span.clr").append($("#"+i+"norecco")),$("#"+i+"cerr > p > span.clr").css({display:"inline",margin:"0"})},buildPagination:function(t){var e=this,i=t.totalPageCount,n=t.currentPageNo,s=e.paginationTxt,r=e.currentPageTxt;if(e.updateCount(t.totalRecordCount),null!==i&&null!==n)if(1<i){$("#"+e.conf.pgnId).show();for(var a=$("div#"+e.conf.pgnId+"> div > span.pg-cs"),o=(t=$("div#"+e.conf.pgnId+"> div > span.pg-m")).children().size(),l=0;l<=o;l++)$($($(t).children()[l]).children()[0]).unbind("click");if(10<i&&13>o){for(l=11;l<=i;l++)$('<span class="pg-nm pg-nmp"><a href="javascript:;">'+l+"</a></span>").insertBefore(".pg-cdr");o=$(t).children().size()}for(l=i+1;l<o-1;l++)$(t.children()[l]).hide();$(a).html(e.conf.pageTxt),$("#pageId").html(n),$("#totalPageNo").html(i),$($(".pg-cdr").children()[0]).attr("href","javascript:;");l=$($($(t).children()[0]).children()[0]).children()[0],o=$($($(t).children()[o-1]).children()[0]).children()[0];var d=$(".pg-cdl").children()[0],c=$(".pg-cdr").children()[0];if(10<i){if(11>n){for(var u=0;10>=u;u++)a=$(t).children()[u],$(a).css("display","");for(u=11;u<=i;u++)a=$(t).children()[u],$(a).css("display","none")}if(1!=n&&1==n%10){u=i>=n+9?n+9:i;for(var h=n;h<=u;h++)a=$(t).children()[h],$(a).css("display","");for(u=1;u<n;u++)a=$(t).children()[u],$(a).css("display","none")}if(n&&0==n%10){for(u=n;u>=n-9;u--)a=$(t).children()[u],$(a).css("display","");for(u=n+1;u<=i;u++)a=$(t).children()[u],$(a).css("display","none")}}for(1==n?e.makeLeftArrDisabled(l,d):(e.makeLeftArrEnabled(l,d),$(d).bind("click",(function(){e.makePageCall(n-1,!1)}))),n!==i?($(c).bind("click",(function(){e.makePageCall(n+1,!1)})),e.makeRightArrEnabled(o,c)):(e.makeRightArrDisabled(o,c),e.makeLeftArrEnabled(l,d)),l=1;l<=i;l++)a=$(t).children()[l],o=$(a).children()[0],$(a).removeClass("pg-cr").addClass("pg-nm"),$(o).attr("aria-label",s+", "+l),o||($(a).html(""),o=$(a).append('<a href="javascript:;">'+l+"</a>").children()[0],$(o).attr("aria-label",s+", "+l)),n==l?($(a).removeClass("pg-nm").addClass("pg-cr"),$(o).css("color","#000"),$(o).css("text-decoration","none"),$(o).attr("aria-label",$(o).attr("aria-label")+", "+r),e.disableAnchor(o,!0)):($(o).css("color","#555555"),$(o).css("text-decoration","none"),e.enableAnchor(o,null,!0))}else $("#"+e.conf.pgnId).hide();if(null!==n&&null!==i&&2<=i)for(s=n+1;s<=i;s++)e.setPaginationClick(s);if(null!==n&&null!==i&&2<=i)for(i=1;i<n;i++)e.setPaginationClick(i)},enableAnchor:function(t,e,i){$(t).attr("href","javascript:;"),$(t).attr("aria-disabled","false"),i||(e?$(t).attr("title",this.conf.prevPage):$(t).attr("title",this.conf.nextPage)),$(t).hover((function(){$(this).css("cursor","pointer"),$(this).css("color","#555555")}))},disableAnchor:function(t,e){$(t).attr("href","javascript:;"),$(t).attr("aria-disabled","true"),$(t).removeAttr("title"),$(t).hover((function(){$(this).css("cursor","default"),e&&($(this).css("color","#000"),$(this).css("text-decoration","none"))}))},makeLeftArrDisabled:function(t,e){this.disableAnchor(e,!1),$(t).removeClass("pg-ul").addClass("pg-uld")},makeLeftArrEnabled:function(t,e){this.enableAnchor(e,!0,!1),$(t).removeClass("pg-uld").addClass("pg-ul")},makeRightArrDisabled:function(t,e){this.disableAnchor(e,!1),$(t).removeClass("pg-ur").addClass("pg-urd")},makeRightArrEnabled:function(t,e){this.enableAnchor(e,!1,!1),$(t).removeClass("pg-urd").addClass("pg-ur")},setPaginationClick:function(t){var e=this;$("div#"+e.conf.pgnId+"> div > span.pg-cs");var i=$("div#"+e.conf.pgnId+"> div > span.pg-m");i=$(i).children()[t];(i=$(i).children()[0])&&$(i).bind("click",(function(){e.makePageCall(t,!1)}))},updateCount:function(t){var e=this.conf.mainId;0>=this.conf.totCount&&(this.conf.totCount=t),$("#"+e+"ct").html(t),$("#"+e+"cttl").html(t)},updateOEMDiagram:function(t,e){this.isNull(t)||""==t?($("#asmbl").parent().parent().hide(),$("#asmblLyr").hide()):($("#asmbl").html(t),$("#asmbl").css("font-weight","bold"),0<$("#arrDiv1").length||($("#asmbl").parent().parent().prepend('<div class="gspr oeArr" id="arrDiv1"></div>'),$("#arrDiv1").css("margin","0 15px 0 0")),$("#asmbl").parent().parent().show(),$("#asmblLyr").show()),!this.isNull(e)&&""!=e&&0<1*e?($("#asmblQty").html(1*e),$("#asmblQty").css("font-weight","bold"),0<$("#arrDiv2").length||($("#partQty").prepend('<div class="gspr oeArr" id="arrDiv2"></div>'),$("#arrDiv2").css("margin","0 15px 0 0")),$("#partQty").show(),$("#asmblLyr").show()):$("#partQty").hide()},drawTable:function(t,e,i){var n=this,s=e.length,r=document.getElementById(n.conf.mainId+"ctbl");r.className=100==n.conf.site?"fTbl":"fTblUK",$(r).off("click").on("click",(function(t){if($(t.target).is(".fitment-moreless")){var e=(t=$(t.target)).prev("span"),i=t.data("id"),s="";try{s=$("#"+i).get(0).notes[0]}catch(t){}"MORE"===t.data("mode")?(e.html(s),t.html(n.conf.less),t.data("mode","LESS"),t.attr("aria-expanded",!0),$(document).trigger("rover",{sid:"p2047675.l9601"})):(e.html(t.data("shortValue")),t.html(n.conf.more),t.data("mode","MORE"),t.attr("aria-expanded",!1),$(document).trigger("rover",{sid:"p2047675.l9602"}))}}));for(var a=0;a<i.length;a++){for(var o=i[a],l=0;l<s;l++)if(0==l)var d=o[e[l]];if(d&&null!==d[0]&&0<d[0].length)break}for((a=r.insertRow(0)).id=100==n.conf.site?"fTblFTr":"fTblFTrUK",o=0;o<s;o++){(l=document.createElement("th")).setAttribute("scope","col");var c=t[o];if(0==o){var u=document.createElement("SPAN");u.innerHTML=c,l.appendChild(u),d&&null!==d[0]&&0<d[0].length&&((c=document.createElement("SPAN")).innerHTML="<br>",l.appendChild(c),(c=document.createElement("SPAN")).innerHTML=n.conf.notesAlertMsg,c.className="ntsClr",l.appendChild(c))}else l.innerHTML=c;0===o&&(l.id="fTblFTd"),a.appendChild(l)}var h;for(d=0;d<i.length;d++)for(a=r.insertRow(d+1),c=i[d],o=0;o<s;o++)if(l=a.insertCell(o),0===o&&(l.id="fTblFTd"),h=c[e[o]],0==o)if(h&&null!==h[0]&&0<h[0].length){(u=document.createElement("SPAN")).id="ICN"+d,u.notes=h;var p=u.notes[0];58<p.length&&(p=p.substr(0,58)+"..."),$(u).html(p),l.appendChild(u),58<p.length&&((h=$("<a href='javascript:;' class='fitment-moreless' />")).data({id:u.id,shortValue:p,mode:"MORE"}),h.attr("aria-expanded",!1),h.html(n.conf.more),l.appendChild(h.get(0))),(u=$("#"+u.id)).on("hover touchend",(function(){$(document).trigger("rover",{sid:"p2047675.l1559"}),event.preventDefault()})),l.style.width="20%"}else l.innerHTML="&nbsp;",l.style.width="5%";else 100==n.conf.site&&"Parts Diagram"==t[o]?h&&h[0]&&0<h[0].length?((u=document.createElement("A")).innerHTML='<span class="gspr oeZoom">&nbsp;</span>',u.style.textDecoration="none",l.id="DIA"+d,l.oeUrl=h[0],l.refNo=h[1],l.qty=h[2],l.onclick=function(){$(document).trigger("rover",{sid:"p2047675.l4026"}),n.showDiagram(this.oeUrl,this.id),n.updateOEMDiagram(this.refNo,this.qty)},l.appendChild(u),l.style.width="10%",l.style.textAlign="center",l.className="pDiaTd"):(l.innerHTML="&nbsp;",l.style.width="10%"):l.innerHTML=h||"All";n.pubsub.publish("_CLOSE_OLAY",{cmpId:n.conf.olyId}),r.onmouseleave=function(){n.pubsub.publish("_CLOSE_OLAY",{cmpId:n.conf.olyId})}},showDiagram:function(t,e){var i=this.getChild(this.conf.diaOvl),n=$("#ovlMainImg");this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.diaOvl}),$("#mImg").find(".zoomIcon").remove(),$("#mImg").find(".zoomImg").remove(),i&&i.conf&&(n.hide(),this.buildDiagramImage(t),$("#ovlMainImg").parent().zoom({url:t}),i.conf.trigger=e,i.conf.noFixedPos=!0,i.show($("#"+i.conf.trigger)))},buildDiagramImage:function(t){var e=this,i=document.createElement("img"),n=$("#ovlMainImg"),s=$("#ovlThrImg");i.src=t,s.attr("src","//p.ebaystatic.com/aw/pics/globalAssets/imgLoading_30x30.gif"),s.show(),i.complete||4===i.readyState?(n.attr("src",t),e.findnSetImageSize(t),s.hide(),n.show()):i.onload=function(){n.attr("src",t),e.findnSetImageSize(t),s.hide(),n.show()},i.onerror=function(){}},findnSetImageSize:function(t){var e,i=this,n=0,s=0;(e=document.createElement("img")).src=t,e.complete||4===e.readyState?(n=e.width,s=e.height,i.setImageSize(n,s)):e.onload=function(){n=e.width,s=e.height,i.setImageSize(n,s)}},setImageSize:function(t,e){var i=0,n=0,s=0;640<t||600<e?(i=640/t>600/e?600/e:640/t)&&(n=e*i,s=t*i):(n=e,s=t),$("#ovlMainImg").css({width:s,height:n})},setRover:function(t,e){void 0!==this.lastLinkId&&this.lastLinkId==e||((new Image).src="//rover.ebay.com/roverclk/0/0/9?trknvp=sid%3D"+t+"."+e),this.lastLinkId=e},updateVehicleCount:function(t){var e=document.getElementById(this.conf.mainId+"_vct");e&&(e.innerHTML=t)},updateHTCount:function(t){var e=document.getElementById(this.conf.mainId+"_htct");e&&(e.innerHTML=t)},showNotes:function(t,e){var i=this.getChild(this.conf.olyId);this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.olyId}),i&&i.conf&&(document.getElementById(this.conf.mainId+"notesOlp").innerHTML=t,i.conf.trigger=e,i.show($("#"+i.conf.trigger)))},removeTooltip:function(){var t=document.getElementById("c-tooltip");t&&t.className&&(t.className=t.className.replace("show",""))},createFilters:function(t,e,i){for(var n,s=this,r=s.conf,a="-"+s.conf.selectTxt+"-",o=0;o<e.length;o++){(n=t.insertCell(o)).style.paddingRight="10px";var l=document.createElement("SELECT");if(l.id=e[o],l.index=o,3<=o&&(l.style.width="150px"),"B_Component"!=e[o]&&(l.onchange=function(){s.makeNavRelCall(this)}),"100"==s.conf.site&&"Trim"===e[o]&&848!=r.catalogId){l.options[0]=new Option(a,"");var d=document.createElement("SELECT");d.id="Submodel",d.style.display="none",n.appendChild(d)}else"100"==s.conf.site&&"Engine"===e[o]&&848!=r.catalogId?(l.options[0]=new Option(a,""),(d=document.createElement("SELECT")).id="Engine - Liter_Display",d.style.display="none",n.appendChild(d)):l.options[0]="B_Engine"===e[o]?new Option(s.conf.allEng,""):"B_Model"===e[o]?new Option(s.conf.allModel,""):"B_Component"===e[o]?new Option("--",""):new Option(a,"");n.appendChild(l),n=i?s.conf.selectTxt+" "+i[o]:s.conf.selectTxt,l.setAttribute("title",n),0===o&&0==o||(l.disabled=!0)}setTimeout((function(){$("#fits-select-btn").removeAttr("disabled"),$("#fits-edit-btn .edit-button").removeAttr("disabled")}),1e3)},makeNavRelCall:function(t){var e=this.getUrl(t,!1,this.MDDS),i=t.selectedIndex,n=this.srchFlds,s=n.length;if(this.useFitmentService())this._fitmentService.makePopulateDropdownCall(t);else{if("100"==this.conf.site&&848!=this.conf.catalogId)if("Trim"==t.id){var r=this.isFieldsMapped1to1("Submodel","Trim");-1<r&&(elem=document.getElementById("Submodel"),elem.selectedIndex=r)}else"Engine"==t.id&&(-1<(r=this.isFieldsMapped1to1("Engine - Liter_Display","Engine"))&&(elem=document.getElementById("Engine - Liter_Display"),elem.selectedIndex=r));e+="&pn="+this.getPropertyNames(n),this.resetSrchFlds(t),t.index+1<s&&0<i&&"B_Component"!=n[t.index+1]?("100"==this.conf.site&&848!=this.conf.catalogId&&(i=e,"Trim"==n[t.index+1]?this.makeCall(i+"&rf=Submodel",this.updateFilters):"Engine"==n[t.index+1]&&(i+="&rf=Engine - Liter_Display",this.makeCall(i,this.updateFilters))),e+="&rf="+n[t.index+1],this.makeCall(e,this.updateFilters)):this.setButtonState()}},resetSrchFlds:function(t){var e=this.srchFlds;if(null!==e)for(var i=0;i<e.length;i++){var n=document.getElementById(e[i]);!this.start&&n&&n.index>t.index&&(n.selectedIndex=0),n&&(n.disabled=t&&n?t.index<n.index:0<i)}this.setButtonState()},updateFilters:function(t){this.fillFilters(t.data),this.setButtonState()},setButtonState:function(){var t=this.srchFlds,e=!0,i=!0,n=t.length,s=document.getElementById("B_Component");if(s){for(var r=0;3>r;r++)if((a=document.getElementById(t[r]))&&0===a.selectedIndex){i=!1;break}s.disabled=!i,n-=1}for(r=0;r<n;r++){var a=document.getElementById(t[r]);if(a&&0===a.selectedIndex){e=!1;break}}(t=document.getElementById(this.conf.mainId+"Go"))&&(t.disabled=!e)},fillFilters:function(t){var e=this.srchFlds;"100"==this.conf.site&&848!=this.conf.catalogId&&("Submodel"in(r=t[0])?this.updateHiddenField(r,"Submodel"):"Engine - Liter_Display"in r&&this.updateHiddenField(r,"Engine - Liter_Display"));for(var i=0;i<e.length;i++){if(this.isBoats&&!this.isCompLoaded){var n=document.getElementById(e[i]),s=this.getUrl(n,!1,this.MDDS);this.isCompLoaded=!0,s+="&rf=B_Component",this.makeCall(s,this.updateComponent)}try{if(0<t.length){var r,a=(r=t[0])[e[i]];n=document.getElementById(e[i]);if(a){if(n){for(3==i&&e[i+1]&&(document.getElementById(e[i+1]).selectedIndex=0),this.clearOptions(n),s=0;s<a.length;s++)if(a[s]){var o=new Option(a[s],a[s]);n.options[s+1]=o,this.preSelect(n,o)}1===a.length&&(o.selected=!0),n.disabled=!1,0<n.selectedIndex&&this.makeNavRelCall(n)}}else if(("HSN-TSN"!==e[i]&&this.SP[n.id]&&""!==this.SP[n.id]||this.SP[n.id]&&""!==this.SP[n.id])&&1>=n.options.length){var l=new Option(this.SP[n.id],this.SP[n.id]);n.options[n.options.length]=l,l.selected=!0}}}catch(t){}}},updateComponent:function(t){if(0<(t=t.data).length){t=t[0].B_Component;var e=document.getElementById("B_Component");if(t&&e){for(var i=0;i<t.length;i++)if(t[i]){var n=new Option(t[i],t[i]);e.options[i+1]=n,this.preSelect(e,n)}1===t.length&&(n.selected=!0)}}},updateHiddenField:function(t,e){if(null==t||null==t){var i=document.getElementById(e);s.clearOptions(i)}else{var n=t[e],s=this;if(0<n.length&&(i=document.getElementById(e),n&&i)){s.clearOptions(i);for(var r=0;r<n.length;r++)if(n[r]){var a=new Option(n[r],n[r]);i.options[r+1]=a,s.preSelect(i,a)}1===n.length&&(a.selected=!0)}}},preSelect:function(t,e){this.SP[t.id]&&this.SP[t.id]===e.value?(e.selected=!0,this.SP[t.id]=""):this.pdsFlds[t.id]&&this.pdsFlds[t.id]===e.value&&(e.selected=!0,this.pdsFlds[t.id]="")},getPropertyNames:function(t,e){e=void 0!==e?e:"|";for(var i="",n=0;n<t.length;n++)0!==n&&"DiagramURL"!=t[n]&&(i+=e),"DiagramURL"!=t[n]&&(i+=t[n]);return encodeURIComponent(i)},closeDD:function(){document.getElementById(this.ovelId).style.visibility="hidden"},clearOptions:function(t){for(var e=t.options.length-1;0<e;e--)t.options[e]=null},clearTable:function(t){if((t=document.getElementById(t))&&t.rows)for(var e=t.rows.length;0<e;e--)t.deleteRow(e-1)},getUrl:function(t,e,i,n){var s,r=this.conf.categoryId,a=this.conf.productId,o=this.conf.itemId,l=this.conf.PRecCount;return this.removeTooltip(),this.valFromURL=0,s=this.conf.url,s+="&rand="+Date.now(),s+="&site="+this.conf.site,s+="&vs="+this.conf.viewSite,i&&(s+="&req="+i),e||(""!==(t=t?this.getSrchFldPairs(t):this.getSrchFldPairs(!1,n))&&(s+="&sfp="+encodeURIComponent(t)),i==this.CREQ&&(""==t&&this.conf.fitsFiltr&&(t=this.conf.fitsFiltr,s+="&sfp="+encodeURIComponent(t)),i=this.getSelectedVehicle(t),this.conf.myVehiclesOn&&this.uniqueVehicle&&this.conf.isImplicitSaveOn&&($($("#"+this.conf.mainId+"ieveh .crtval").children()[1]).html(i),this.SP={}),this.chosen=this.valFromURL=i,this.updateVehicleChosen(i))),r&&(s+="&cid="+r),a&&(s+="&pid="+a),o&&(s+="&item="+o),0<l&&(s+="&ct="+l),0<this.conf.previewItem&&(s+="&pi=1"),s},getSelectedVehicle:function(t){var e="",i="",n="",s=(t=decodeURIComponent(t).split("|"),[]);if("100"==this.conf.site&&848!=this.conf.catalogId)for(var r=0;r<t.length;r++){var a=t[r].split(":");1<a.length&&s.push(a[0])}for(r=0;r<t.length;r++)if(1<(a=t[r].split(":")).length&&"null"!=a[1]){if("100"==this.conf.site&&848!=this.conf.catalogId&&("Submodel"==a[0]?n+="+"+a[1]+"+":"Engine - Liter_Display"==a[0]&&(n+=a[1]),"Submodel"==a[0]&&-1<$.inArray("Trim",s)||"Engine - Liter_Display"==a[0]&&-1<$.inArray("Engine",s)))continue;0!=r&&(e+=" ",i+="~","100"==this.conf.site&&848!=this.conf.catalogId?3>r&&(n+="+"):n+="+"),e+=a[1],i+=a[1],"100"==this.conf.site&&848!=this.conf.catalogId?3>r&&(n+=a[1]):n+=a[1]}return this.selVel=encodeURIComponent(i),this.nullReccoKeyword=n,e},updateVehicleChosen:function(t){var e=this.conf.mainId,i=document.getElementById(e+"vchsn");i&&(i.innerHTML=" "+t),(i=document.getElementById(e+"vnmchsn"))&&(i.innerHTML=this.conf.noCompMsg+" "+t+".")},vehFilterSelected:function(){document.getElementById(this.srchFlds["77"==this.conf.site?1:0]).disabled=!1,$("#"+this.conf.mainId+"Go").attr("disabled",!0)},mvRadioClicked:function(){this.resetSrchFldFilters(),$("#"+this.conf.mainId+"Go").attr("disabled",!0)},dropdownClicked:function(){this.resetSrchFldFilters(),this.conf.pullMenuCSId&&this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.pullMenuCSId}),this.conf.helpCSId&&this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.helpCSId})},createHsnTsnFilters:function(t){var e=this,i=t.insertCell(0);i.style.paddingRight="10px";var n=document.createElement("INPUT");n.type="TEXT",n.maxLength=4,n.size=5,n.id=e.conf.mainId+"hsnBox",n.value="zu 2",n.style.color="#999999",n.onfocus=function(){$("#"+e.conf.mainId+"htfltr").prop("checked",!0),$("#"+e.conf.mainId+"hsnBox").prop("disabled",!1),$("#"+e.conf.mainId+"tsnBox").prop("disabled",!1);for(var t=e.srchFlds,i=1;i<t.length;i++){var n=document.getElementById(t[i]);n.selectedIndex=0,n.disabled=!0}$("#"+e.conf.mainId+"Go").prop("disabled",!1),e.emptyTextBox(this)},$("#"+e.conf.mainId+"htfltr"),n.disabled=!1,i.appendChild(n),(i=t.insertCell(1)).style.paddingRight="10px",(n=document.createElement("INPUT")).type="TEXT",n.maxLength=3,n.size=4,n.id=e.conf.mainId+"tsnBox",n.value="zu 3",n.style.color="#999999",n.onfocus=function(){$("#"+e.conf.mainId+"htfltr").prop("checked",!0),$("#"+e.conf.mainId+"hsnBox").prop("disabled",!1),$("#"+e.conf.mainId+"tsnBox").prop("disabled",!1);for(var t=e.srchFlds,i=1;i<t.length;i++){var n=document.getElementById(t[i]);n.selectedIndex=0,n.disabled=!0}$("#"+e.conf.mainId+"Go").prop("disabled",!1),e.emptyTextBox(this)},vehRadio&&vehRadio.checked&&(n.disabled=!1),i.appendChild(n)},emptyTextBox:function(t){t.value="",t.style.color="#000000"},makeHTPageCall:function(t){var e=document.getElementById(this.conf.mainId+"hsnBox").value,i=document.getElementById(this.conf.mainId+"tsnBox").value;if(4!==e.length||3!==i.length)this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.pullMenuCSId}),this.showHide("dcthd ctVMTxt ctHTMTxt ctHTNMTxt ctVNMTxt dctbl err".split(" "),!0),this.showHide(["ctHTIFTxt","_ctshd"],!1);else{if(this.showHide("dcthd ctVMTxt ctHTMTxt ctHTNMTxt ctVNMTxt ctHTIFTxt".split(" "),!0),this.useFitmentService())this._fitmentService.makeHTPageCallFS(e,i);else{var n=(n=this.getUrl(!1,!0,this.CREQ))+"&pn="+this.getPropertyNames(this.propNames);t?(t=t.request.page)&&(n+="&page="+t):n+="&page=1",n=n+"&rmode=1&sfp=hsn:"+e+"|tsn:"+i,this.chosen=e+"/"+i,this.makeCall(n,this.parseHTResponse)}this.trgTopCompUpd=!0,this.showHide(["dctbl"],!0),this.showHide(["goSpan"],!0),this.showHide(["goThrbr"],!1)}},parseHTResponse:function(t){if("SUCCESS"===t.status.name&&t.hsnTsnExpansion)if(0<t.data.length){var e=t.data.length,i=t.propertyNames,n=t.displayNames;this.clearTable(this.conf.mainId+"htevtbl");for(var s=i.length,r=document.getElementById(this.conf.mainId+"htevtbl"),a=r.insertRow(0),o=0;o<s;o++){var l=a.insertCell(o);l.style.fontWeight="bold",l.height="30px",l.innerHTML=0==o?"&nbsp;":n[o]}for(this.overlayRowCount=e,n=0;n<e;n++){a=r.insertRow(n+1);var d=t.data[n];for(1==n%2&&(a.style.background="#DEE5FF"),o=0;o<s;o++)if(0==o){(l=a.insertCell(o)).height="30px";var c=null;try{c=document.createElement("<input name='vehpick' type='radio' id='"+this.conf.mainId+"pick"+n+"' value='"+this.getChoosenVehicle(i,d)+"' />")}catch(t){}c||((c=document.createElement("INPUT")).type="RADIO",c.id=this.conf.mainId+"pick"+n,c.name="vehpick",c.value=this.getChoosenVehicle(i,d)),l.appendChild(c)}else(l=a.insertCell(o)).innerHTML=d[i[o]]}this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.htOverlayOSId}),(t=this.getChild(this.conf.htOverlayOSId))&&t.conf&&(t.conf.trigger=this.conf.hsnTsnGoBtn,t.conf.noFixedPos=!0,t.show($("#"+t.conf.trigger)))}else this.showHide("dcthd ctVMTxt ctHTMTxt ctHTIFTxt ctVNMTxt dthr dctbl err".split(" "),!0),this.showHide(["ctHTNMTxt","ctshd"],!1);this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.pullMenuCSId})},htOlySelect:function(){for(var t,e=this.overlayRowCount,i=0;i<e;i++)if((t=document.getElementById(this.conf.mainId+"pick"+i))&&t.checked){this.showAll=!1;var n=(t=t.value).split("|");this.chosen=this.getChsnValue(n),this.sfArg=t,this.updateMyVeh=!0,this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.conf.htOverlayOSId}),this.useFitmentService()?(t=encodeURIComponent(t),t=this._fitmentService.getFitmentServiceListingConfig(t,null,!0),this._fitmentService.makeFitmentCall(t,this._fitmentService.handleDisplayTableResponse)):(n=this.getUrl(!1,!0,this.CREQ),n+="&pn="+this.getPropertyNames(this.propNames),n+="&page=1",n+="&sfp="+t,this.makeCall(n,this.displayCompatibilityInfo)),this.showHide(["dctbl"],!0),this.showHide(["dthr"],!1)}},snOlySelect:function(t){for(var e,i=this.overlayRowCount,n=0;n<i;n++)if((e=document.getElementById(this.conf.mainId+"pick"+n))&&e.checked){this.showAll=!1;var s=(s=(s=this.getUrl(!1,!0,this.CREQ))+"&pn="+this.getPropertyNames(this.propNames))+"&page=1";s+="&sfp="+(e=e.value),this.pubsub.publish("_CLOSE_OLAY",{cmpId:t});var r="";r=e.split("|");this.chosen=r=this.getChsnValue(r),this.sfArg=e,this.updateMyVeh=!0,this.makeCall(s,this.displayCompatibilityInfo),this.showHide(["dctbl"],!0),this.showHide(["dthr"],!1)}},getChsnValue:function(t){for(var e="",i=0;i<t.length;i++){var n=t[i].split(":");1<n.length&&"null"!=n[1]&&(0!=i&&(e+=" "),e="--"==n[1]?e+"[--]":e+n[1])}return e},getChoosenVehicle:function(t,e,i){for(var n="",s=i=i?0:1;s<t.length;s++)s!==i&&(n+="|"),n+=t[s]+":"+e[t[s]];return n},sltRowOlyCancel:function(t){this.pubsub.publish("_CLOSE_OLAY",{cmpId:t})},getSrchFldPairs:function(t,e){var i="",n=this.srchFlds,s="",r="";if(null!==n){for(var a=this.fldsSel=0;a<n.length;a++){var o=document.getElementById(n[a]);if(o&&0!==o.selectedIndex&&(this.fldsSel++,0!==a&&(i+="|",s+="~","100"==this.conf.site&&848!=this.conf.catalogId?3>a&&(r+="+"):r+="+"),this.isGoClicked&&o.disabled||(i+=o.id+":"+o.options[o.selectedIndex].value,s+=o.options[o.selectedIndex].value,"100"==this.conf.site&&848!=this.conf.catalogId?3>a&&(r+=o.options[o.selectedIndex].value):r+=o.options[o.selectedIndex].value),t&&t.id===o.id))break}this.selVel=encodeURIComponent(s),e&&"100"==this.conf.site&&848!=this.conf.catalogId&&(-1!=(n=this.isFieldsMapped1to1("Submodel","Trim"))&&(i=i+"|"+(o=document.getElementById("Submodel")).id+":"+o.options[n].value,r=r+"+"+o.options[n].value+"+"),-1!=(n=this.isFieldsMapped1to1("Engine - Liter_Display","Engine"))&&(i=i+"|"+(o=document.getElementById("Engine - Liter_Display")).id+":"+o.options[n].value,r+=o.options[n].value)),this.nullReccoKeyword=r}return encodeURIComponent(i)},isFieldsMapped1to1:function(t,e){var i=document.getElementById(t),n=document.getElementById(e);if(null==i||null==i||null==n||null==n)return-1;n=n.options[n.selectedIndex].value;for(var s=0,r=0,a=0;a<i.length;a++)null!=i[a].value&&null!=i[a].value&&""!=i[a].value&&0==n.indexOf(i[a].value)&&(s++,r=a);return 1==s?r:-1}}})),function(t){var e={url:!1,icon:!0,callback:!1,duration:120,on:"mouseover"};t.fn.zoom=function(i){return this.each((function(){var n=t(this),s=new Image,r=t(s),a=n.css("position"),o=t.extend({},e,i||{}),l=!1;n.css({position:/(absolute|fixed)/.test(a)?a:"relative",overflow:"hidden"}),(o.url||(o.url=n.find("img").attr("src"),o.url))&&(o.icon&&t('<div class="zoomIcon"/>').appendTo(n),s.onload=function(){function e(){c=n.outerWidth(),u=n.outerHeight(),h=(s.width-c)/c,p=(s.height-u)/u}function i(t){m=t.pageX-g.left,f=t.pageY-g.top,m>c?m=c:0>m&&(m=0),f>u?f=u:0>f&&(f=0),s.style.left=m*-h+"px",s.style.top=f*-p+"px",t.preventDefault()}function a(s){t(n.children()[0]).css({visibility:"hidden"}),g=n.offset(),e(),i(s),r.stop().fadeTo(t.support.opacity?o.duration:0,1)}function d(){r.stop().fadeTo(o.duration,0),t(n.children()[0]).css({visibility:"visible"})}var c,u,h,p,m,f,g=n.offset();r.addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:s.width,height:s.height,border:"none",maxWidth:"none"}).appendTo(n),"grab"===o.on?r.mousedown((function(e){g=n.offset(),t(document).one("mouseup",(function(){d(),t(document).unbind("mousemove",i)})),a(e),t(document).mousemove(i),e.preventDefault()})):"click"===o.on?r.click((function(e){if(!l)return l=!0,a(e),t(document).mousemove(i),t(document).one("click",(function(){d(),l=!1,t(document).unbind("mousemove",i)})),!1})):(e(),r.hover(a,d).mousemove(i)),t.isFunction(o.callback)&&o.callback.call(s)},s.src=o.url)}))},t.fn.zoom.defaults=e}(jQuery),raptor.defineClass("ui.Pulldown",(function(){return{events:["change"],defaultConfig:{id:"",triggerMode:"click",width:"auto",height:"auto",hasIcon:!0,onChange:null,type:"normal",preventDefault:!1},clzName:{normal:"",anchor:"achr"},init:function(t){this.config=$.extend(!0,{},this.defaultConfig,t),this.pulldown=$("#"+this.config.id),this.select=this.pulldown.find("ul.select"),this.options=this.pulldown.find("li.op"),this.hdr=this.selectedOption=this.currentValue=this.currentOption=this.currentOptionWpr=null,this.dropped=!1,this.select.css("display","none"),this.pulldown.addClass(this.clzName[this.config.type]),this.buildCurrentSelect(),this.regHdlr()},buildCurrentSelect:function(){var t=this.config;this.currentOptionWpr=$("<button aria-haspopup='listbox' tabindex='0' id='myGarageSelected' aria-label='Select a vehicle from My Garage' class='crtval'><span id='selectedText'></span></button>"),this.pulldown.prepend(this.currentOptionWpr),this.currentOption=this.currentOptionWpr.find("span"),this.highlightSelected();try{if("auto"!=t.width&&(this.currentOptionWpr.css("width",parseInt(t.width)),this.pulldown.css("width",this.currentOptionWpr.outerWidth()+20)),"auto"!=t.height){var e=parseInt(t.height)+"px";this.currentOptionWpr.css({height:e,"line-height":e,"text-align":"left","padding-top":"0px","padding-bottom":"0px"}),this.select.css("top",e)}else this.select.css("top",this.currentOptionWpr.outerHeight()+"px")}catch(t){}t.hasIcon&&(this.hdr=$("<b class='icn'></b>"),this.currentOptionWpr.prepend(this.hdr),this.currentOptionWpr.css("padding-right",this.hdr.width()+10+"px"),this.hdr.css("top",Math.round(this.currentOptionWpr.outerHeight()-this.hdr.height())/2+"px")),this.select.find("li.hr").css("width",this.select.width())},highlightSelected:function(t){0==(t=this.selectedOption=t||this.select.find("li.sel")).length&&(t=this.selectedOption=this.select.find("li:first-child")),this.currentOption.html(t.attr("label")?t.attr("label"):t.html())},regHdlr:function(){var t=this,e=t.config;"mouseover"==e.triggerMode?(t.currentOptionWpr.mouseover((function(){t.toggleDropdown(!0)})),t.currentOptionWpr.mouseout((function(){t.toggleDropdown(!1)})),t.select.mouseover((function(){t.dropped=!0})),t.select.mouseout((function(){t.toggleDropdown(!1)}))):(t.currentOptionWpr.click((function(){return t.toggleDropdown(!t.dropped),$("ul.select > li[value=201]").focus(),!1})),t.currentOptionWpr.keypress((function(e){if(13==e.keyCode||32==e.keyCode)return t.toggleDropdown(!t.dropped),$("ul.select > li[value=201]").focus(),!1})),t.pulldown.keydown((function(e){27==e.keyCode?(e.preventDefault(),e.stopPropagation(),setTimeout((function(){return t.toggleDropdown(!1),$("#myGarageSelected").focus(),!1}),100)):t.dropped&&(13==e.keyCode||32==e.keyCode)&&setTimeout((function(){return t.toggleDropdown(!1),$("select#Year").focus(),!1}),100)})),t.select.keydown((function(e){9==e.keyCode&&!e.shiftKey&&$("ul.select > li:last-child")[0]==e.target.parentNode&&setTimeout((function(){return t.toggleDropdown(!1),$("select#Year").focus(),!1}),100)})),t.hdr.click((function(){return t.toggleDropdown(!0),!1})),$("body").click((function(){t.toggleDropdown(!1)}))),t.options.live("click",(function(){var i=$(this);if(t.toggleDropdown(!1),i.attr("value")!=t.currentValue&&(t.selectedOption.removeClass("sel"),i.addClass("sel"),t.currentValue=i.attr("value"),t.highlightSelected(i),e.onChange&&"function"===$.type(e.onChange)&&e.onChange(),t.publish("change",t),e.preventDefault))return!1}))},toggleDropdown:function(t){var e=this;t?(e.dropped=!0,e.select.css("display","block")):(e.dropped=!1,setTimeout((function(){e.dropped||e.select.css("display","none")}),100))},getCurrentValue:function(){return this.currentValue},insertOption:function(t,e,i,n){t=$("<li class='op"+(n?" sel":"")+"' value='"+e+"'"+(i?" label='"+i+"'":"")+">"+t+"</li>"),this.select.append(t),this.options=this.select.find("li.op"),n&&(this.selectedOption.removeClass("sel"),this.highlightSelected(t))}}})),raptor.defineClass("com.ebay.raptor.vi.Description",(function(){return{init:function(t){var e=this;if(e.cfg=t,e.tId="",e.bSwap=!1,e.vimResized=!e.cfg.isNewDescriptionResizerEnabled,e.logHorzScrollRoverSent=!1,e.extendDescContainerRoverSent=!1,e.storedRcvMsg={},"function"==typeof window.postMessage){window.addEventListener?window.addEventListener("message",(function(t){e.rcvMsg(t)}),!1):window.attachEvent("onmessage",(function(t){e.rcvMsg(t)}),!1);var i=document.getElementById("desc_ifr");i&&!e.executed&&(e.cfg.isNewDescriptionResizerEnabled?i.onload=function(){e.vimResized=!0,i.contentWindow.postMessage(JSON.stringify({op:"resizeIframe"}),"*")}:i.contentWindow.postMessage(JSON.stringify({op:"resizeIframe"}),"*"))}else $("#desc_ifr").hasClass("lazyload")&&(e.needsToCheckHashChange=!0),e.startTimer();e.frameBuster(window.location.href),e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("_RESET_FRAME_RESIZE_FLAG",(function(){e.executed=!1}),e),e.cfg.descSnippetEnabled&&e.bindDescOverlayEvents();try{var n=0;$("#desc_div").one("mouseenter",(function(){n=(new Date).getTime()})),$("#desc_div").one("mouseleave",(function(){var t=(new Date).getTime()-n;trackingUtil("VI_DESC_HOVERED","ex1",t)}))}catch(t){}document.addEventListener("ux-app__d-item-description__execute_rcvmsg",(function(){e.storedRcvMsg&&e.storedRcvMsg.data&&e.rcvMsg(e.storedRcvMsg)}))},startTimer:function(){var t=this;t.tId=t.needsToCheckHashChange?window.setInterval((function(){t.checkMsg()}),1e3):window.setTimeout((function(){t.checkMsg()}),1e3)},bindDescOverlayEvents:function(){var t=this,e=0;$(t.cfg.descSnippetOpenBtn).on("click",(function(){var i=document.getElementById("desc_ifr");i&&1>e&&("function"==typeof window.postMessage?i.contentWindow.postMessage(JSON.stringify({op:"resizeIframe"}),"*"):t.startTimer(),e++)}))},checkMsg:function(){var t,e=window.location.hash;""!==e?t=this.parseData(e):(""===e||void 0===e)&&this.startTimer(),t&&0!==t[0]&&this.resizeFrm(t)},parseData:function(t){var e=[0,0],i=t.indexOf("ht_"),n=t.indexOf("wt_");i=t.substring(i+3,n),t=t.substring(n+3);return e[0]+=Number(i),e[1]+=Number(t),e},checkBrowserRegex:function(t,e){try{return null!==RegExp(e,"g").exec(t)}catch(t){return!1}},getFrameHeight:function(t){if(!this.cfg.fixFrameHt||t<this.cfg.setFrameHt)return t;try{var e=null;return null!=this.cfg.regexFrameHt&&(navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase()),null!==e&&this.checkBrowserRegex(e,this.cfg.regexFrameHt))?this.cfg.setFrameHt:t}catch(e){return t}},resizeFrm:function(t){var e=$.browser,i=document.getElementById("desc_ifr"),n=(e=e.mozilla?24:80,0),s={};if(""!==this.tId&&window.clearTimeout(this.tId),!isNaN(t[0])&&(void 0!==t[0]&&0<t[0]&&(n=this.getFrameHeight(t[0]+e),i.height=n,s.ifrHeight=n,i.dispatchEvent(new CustomEvent("item-desc-resize",{detail:{height:n}}))),!isNaN(t[1]))){void 0!==t[1]&&0<t[1]&&(i.width=this.cfg.descSnippetEnabled?"100%":t[1],this.extendDescContainer(i,t),this.logHorzScroll(t[1]),s.ifrWidth=t[1]);try{0<Object.keys(s).length&&trackingUtil("VI_DESC_IFRAME_DIMENSION","ex1",JSON.stringify(s))}catch(t){}$(window).trigger("collections_resize")}},logHorzScroll:function(t){var e=$("#storeHeader"),i=$("#Body").hasClass("sz940"),n=$("#Body").hasClass("sz1152"),s=$("#Body").hasClass("sz1280");e&&0<e.length&&(t+=e.outerWidth()),(i&&898<t||n&&1110<t||s&&1238<t)&&$(document).width()>$(window).width()&&(i={},n=$(".iti-act-num"),i.imp="2047686",i.dw=t,i.vw=$(window).width(),i.sh=e&&0<e.length?"true":"false",0<n.length&&(i.itm=n.html()),this.logHorzScrollRoverSent||(this.logHorzScrollRoverSent=!0,$(document).trigger("rover",i)))},extendDescContainer:function(t,e){var i=$("#desc_out_cr");if(i&&0<i.length){$(t);var n=e[1],s=$("#storeHeader"),r=$(document.body).hasClass("sz980"),a=$(document.body).hasClass("sz1200");s&&0<s.length&&(n+=s.outerWidth()),(r&&938<n||a&&1158<n)&&(i.css({width:n+"px"}),i={},s=$("#itm_num"),i.imp="2047686",i.bh=e[0],i.bw=n,0<s.length&&(i.itm=s.html()),this.extendDescContainerRoverSent||(this.extendDescContainerRoverSent=!0,$(document).trigger("rover",i)))}},rcvMsg:function(t){var e,i=[];if(this.vimResized){var n=this.cfg.tgto.replace("http://","https://");if(t.origin===this.cfg.tgto||t.origin===n){try{e=JSON.parse(t.data)}catch(t){return}i[0]=parseInt(e.h),i[1]=parseInt(e.w),i[2]=e.t,i[3]=e.s,i[4]=e.e,i[5]=e.lt,this.storedRcvMsg&&t&&i[0]&&i[1]&&(this.storedRcvMsg={origin:t.origin,data:t.data}),this.resizeFrm(i),i[4]||(this.executed=!0),this.cfg.logDescTimer&&this.addDescLodTime(i[5]);try{var s=document.getElementById("desc_ifr");t=JSON.stringify({windowHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,windowWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth});s.contentWindow.postMessage(t,"*")}catch(t){}}}},frameBuster:function(t){top.location!=self.location&&top.location.replace(t)},ondemandTransl:function(t){t[2]&&""!==t[2]&&!this.parseTitleForXSS(t[2])&&(this.bSwap&&($(".it-icon-pd").insertAfter($("#itemTitle")),this.bSwap=!1),$("#itemTitle").html(t[2]),t[2].match(/text-align:right/)&&($("#itemTitle").find("p:first").addClass("it-mrg0"),$(".it-icon-pd")&&($("#itemTitle").find("p:first").prepend($(".it-icon-pd")),this.bSwap=!0))),t[3]&&""!==t[3]&&!this.parseTitleForXSS(t[3])&&(st=$("#subTitle").html(t[3]))},parseTitleForXSS:function(t){return null===t||-1==t.indexOf("<script")&&-1==t.indexOf("&lt;script")},addDescLodTime:function(t){var e=raptor.require("ebay.profiler.Profiler");"undefined"!=typeof oGaugeInfo&&0!=t&&e.addParam("i_3i",t);try{"undefined"!=typeof oGaugeInfo&&"undefined"!=typeof descGaugeStartInfo&&null!=descGaugeStartInfo.descST&&(loadStartTime=(new Date).getTime()-descGaugeStartInfo.descST-t,e.addParam("i_4i",loadStartTime))}catch(t){}}}})),raptor.defineClass("com.ebay.raptor.vi.description.VehiclePaidVhr",(function(){return{init:function(t){this.cfg=t,this.pubsub=raptor.require("pubsub"),this.bindClick()},bindClick:function(){$("#vhrsl").click((function(t){t.preventDefault(),t.stopPropagation(),"vhrSeeClk"==t.target.id&&trackingUtil("VEHICLE_FREE_HISTORY_REPORT_DESCRIPTION_TAB"),$("#viTabs_1").trigger("click",["noTabTracking"])}))}}})),raptor.defineClass("ebay.viewItem.FilmStrip",(function(){return{init:function(t){this.conf=t,this.imgArray=t.fsImgList,this.fsElm=$("#"+t.fsId),this.mainImgElm=$("#"+t.mainImgId),this.mainImgHldr=$("#"+t.mainImgHldr),this.pubsub=raptor.require("pubsub"),this.handlrBinded||this.bindHandlr(),this.registerPubSubEvents()},registerPubSubEvents:function(){var t=this;t.pubsub.subscribe("_TRIGGER_CLK_VI_FS_IMG_"+t.conf.fsId,(function(e){t.triggerClickOnFsImg(e)}),this)},bindHandlr:function(){this.handlrBinded=!0,this.bindTriggerEvent()},bindTriggerEvent:function(){var t=this,e=t.conf;t.fsElm.bind("click",(function(e){t.hideMainImgBg(),t.handleClickEvt(e)})),t.fsElm.bind("mouseover",(function(e){t.hideMainImgBg(),t.handleMouseoverEvt(e)})),t.fsElm.bind("mouseout",(function(e){t.hideMainImgBg(),t.handleMouseoutEvt(e)})),t.fsElm.ready((function(){t.placeBorder($("div#"+e.fsId+" > ul > li:nth-child(1)"))}))},hideMainImgBg:function(){this.mainImgHldr.css("backgroundImage","none")},handleClickEvt:function(t){var e=this.conf;if(!$(t.target).is("div#"+e.fsId+".flmstp")&&"LI"!=t.target.nodeName){var i=parseInt(this.mainImgElm.attr("clk"))+1;i&&$("div#"+e.fsId+" > ul > li:nth-child("+i+")").css("border","");var n=-1;"LI"==t.target.nodeName?($(t.target).css("width","-=4").css("height","-=4").css("border","2px solid #666"),n=$(t.target).find("img").attr("index"),stockAttr=$(t.target).find("img").attr("stock")):($(t.target).parents("li").css("width","-=4").css("height","-=4").css("border","2px solid #666"),"IMG"==t.target.nodeName?(n=$(t.target).attr("index"),stockAttr=$(t.target).attr("stock")):(n=$(t.target).find("img").attr("index"),stockAttr=$(t.target).find("img").attr("stock"))),i&&$("div#"+e.fsId+" > ul > li:nth-child("+i+")").css("width","+=4").css("height","+=4"),this.pubsub.publish("_VI_FS_CLK_EVT_"+e.fsId,{currentImgIndex:this.getCurImgIndex(t),selectedIndex:n}),"undefined"!=typeof stockAttr?$("#sPhoto_picLabel").show():$("#sPhoto_picLabel").hide()}},placeBorder:function(t){t&&(this.mskuSkip?$(t).css("width","-=4").css("height","-=4").css("border","0px"):$(t).css("width","-=4").css("height","-=4").css("border","2px solid #666"))},handleMouseoverEvt:function(t){var e=this.conf;"LI"==t.target.nodeName||t.target.id==e.fsId||this.pubsub.publish("_VI_FS_MOUSE_IN_EVT_"+e.fsId,{currentImgIndex:this.getCurImgIndex(t)})},handleMouseoutEvt:function(){this.pubsub.publish("_VI_FS_MOUSE_OUT_EVT_"+this.conf.fsId,{})},getCurImgIndex:function(t){var e=0;e=$(t.target);return"IMG"==t.target.nodeName?e.attr("index"):$(e.find("img")).attr("index")},triggerClickOnFsImg:function(t){var e,i=this.conf;this.hideMainImgBg(),0>(e=(e=$("div#"+i.fsId+" > ul > li:nth-child("+(t.index+1)+")").position().top)-this.fsElm.position().top+this.fsElm.scrollTop())&&(e=0),this.fsElm.scrollTop(e),$("div#"+i.fsId+" > ul > li:nth-child("+(t.index+1)+") > a").click()}}})),raptor.defineClass("com.ebay.raptor.vi.ItemAttributes",(function(){return{init:function(t){$("#"+t.readMoreId).one("click",(function(){$(document).trigger("rover",{sid:"p2047675.l2779"}),$("#"+t.hiddenContentId).attr("aria-expanded","true").show(),$("#"+t.readMoreId).hide()}))}}})),raptor.defineClass("com.ebay.raptor.vi.BidHistory",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.cfg=t,e.pubsub&&(e.pubsub.subscribe(t.autoRefreshSvcId,(function(t){e.refreshBids(t)}),e),e.pubsub.subscribe("inlineBidUpdate",(function(t){e.refreshBids(t)}),e))},refreshBids:function(t){var e=this.cfg;t&&$("#"+e.bidCmpId).html(t.BidCount)}}})),raptor.defineClass("com.ebay.raptor.vi.BidPrice",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.amountUtils=raptor.require("com.ebay.raptor.vi.powerbid.AmountUtils"),e.cfg=t,e.bRP=!1,e.tId="",e.bMsgSent=!1,e.pubsub&&(e.pubsub.subscribe(t.autoRefreshSvcId,(function(t){e.refreshBid(t)}),e),e.pubsub.subscribe(t.ocbSvcId,(function(t){e.setRP(t)}),e),e.pubsub.subscribe(t.pbSvcId,(function(t){e.setRP(t)}),e),e.pubsub.subscribe(t.powSvcId,(function(t){e.setRP(t)}),e),e.pubsub.subscribe("inlineBidUpdate",(function(t){e.refreshBid(t)}),e)),void 0!==t.bidInputId&&$("#"+t.bidInputId).click((function(){$.browser.msie&&(t.bidPlaceholderTxt.trim()==$("#"+t.bidInputId).val()&&$(this).val(""))}))},refreshBid:function(t){var e,i,n=this,s=n.cfg;t&&(e=!(!t.IsReserve||t.IsReserve&&t.IsReserveMet),s.isABINCounterEnabled&&1<=t.BidCount&&!e&&!t.IsEnded&&!n.bMsgSent&&!s.isSPersistenBIN&&(n.pubsub.publish(s.autoRefreshDisableBtnSvcId,{}),n.bMsgSent=!0),n.bRP&&window.clearTimeout(n.tId),t.IsRefreshPage&&!n.bRP&&n.refreshPage(),0===n.getTimeLeft(t)&&t.IsEnded&&!n.bRP&&(n.tId=window.setTimeout((function(){n.refreshPage()}),2500)),(e=t.CurrentPrice.MoneyStandard)&&$("#"+s.bpId).html(e),"HIGHBIDDER"==(e=t.ViewerItemRelation)&&t.MaximumBid?n.amountUtils&&n.amountUtils.parseCurrencyByCleanAmt(t.MaximumBid.CleanAmount)<n.amountUtils.parseCurrencyByCleanAmt(t.MinimumToBid.CleanAmount)?(e=t.MinimumToBid.MoneyStandard,i=s.mtbTxt):(e=t.MaximumBid.MoneyStandard,i=s.mtbHBTxt):(e=t.MinimumToBid.MoneyStandard,i=s.mtbTxt),e&&(t.isAdminView?$("#"+s.mtbId).html(i.replace(s.dummy," ")):$("#"+s.mtbId).html(i.replace(s.dummy,e))),(e=t.LocalCurrentPrice)&&$("#"+s.cbLocalId).html(e.MoneyStandard),t.IsReserve&&(i=t.IsReserveMet?s.resTxt:s.resNMTxt,s.buyBoxFlex||$("#"+s.resId).html(i)))},getTimeLeft:function(t){var e=0;return(t=t.TimeLeft)&&(e=86400*t.DaysLeft+3600*t.HoursLeft+60*t.MinutesLeft+t.SecondsLeft),e},setRP:function(){this.bRP=!0},refreshPage:function(){var t,e;e=window.location.hash,t=-1!=(t=(t=(t=window.location.href).replace(/#ht_.*/,"")).replace("&autorefresh=true","")).indexOf("#")?-1!=t.indexOf("?")?t.replace(/#.*/,"&autorefresh=true"+e):t.replace(/#.*/,"?&autorefresh=true"+e):t+(-1!=t.indexOf("?")?"&autorefresh=true":"?autorefresh=true"),top.location.replace(t)}}})),raptor.defineClass("com.ebay.raptor.vi.itemsummary.BidSection",(function(){var t,e={};return e.pubsub=raptor.require("pubsub"),e.bidClick=function(i,n,s,r,a,o){n=$("#"+n).val(),s=$("#"+s).html(),$.browser.msie&&o&&(o=o.trim(),n&&n==o&&(n="")),t=(new Date).getTime(),e.pubsub.publish(i,{maxbid:n,shipping:s,impCharge:r,isRedirect:a,sPTBflOld:t})},{init:function(t,i,n,s,r,a,o,l,d,c,u){var h=this;h.util=raptor.require("com.ebay.raptor.vi.bid.Util"),a&&e.pubsub.subscribe(a,(function(){e.bidClick(i,n,s,r,o,u)}),h),e.pubsub.subscribe("VI_UPDATE_STATE_OF_BID_BTN",(function(e){$("#"+t).attr("data-signinstate",e.signInState)}),h),l&&(attachEventPressHandler=function(t){if(h.util.isEnterKey(t))return $("#"+n).blur(),e.bidClick(i,n,s,r,o,u),!1},$("#"+n).off(),$("#"+n).bind("keypress",attachEventPressHandler)),c&&($("form[name='viactiondetails']").submit((function(t){t.preventDefault(),$("#"+cfg.binBtnId).click()})),$("#"+t+"_submit").click((function(e){e.preventDefault(),$("#"+t).click()}))),$("#"+t).off(),$("#"+t).click((function(t){d.trackBidBtn&&$(document).trigger("rover",{sid:d.bidTrackingId}),e.bidClick(i,n,s,r,o,u),t.preventDefault()}))}}})),raptor.defineClass("com.ebay.raptor.vi.RelativeEndTime",(function(){return{init:function(t){this.replaceEndTime(t.dateElemSelector,t.dateAttr,t)},replaceEndTime:function(t,e,i){var n=(t=$(t)).attr(e);e="";if(n){var s=parseInt(n);n=new Date(s);((s=this.diffMs(s))||0==s)&&(e=this.structureDiffData(s),e=this.createRelativeTime(n,e,i)),i.isEnded&&t.parent().css("margin-left","-7px"),t.html(e)}},diffMs:function(t){if(t=new Date(t),isNaN(t.getTime()))return!1;var e=new Date;return t.getTime()-e.getTime()},createRelativeTime:function(t,e,i){var n=t.getHours(),s=t.getMinutes(),r=i.AM,a=i.is24HR;s=9<s?s:"0"+s;return a?r="":12<n?(n-=12,r=i.PM):12==n?r=i.PM:0==n&&(n=12),0==e.days&&(new Date).getDate()!=t.getDate()&&(e.days=1),e.days?(t=6<e.days||-1>=e.days?a?t.getDate()+"/"+(t.getMonth()+1):t.getMonth()+1+"/"+t.getDate():1<=e.days?this.getDay(t,i):i.endsTomorrowTerm,t=210==i.siteId?t+", "+n+" h "+s+r:t+", "+n+":"+s+r):t=210==i.siteId?i.todayTerm+", "+n+" h "+s+r:i.todayTerm+" "+n+":"+s+r,i.isEnded&&(t=", ",t=210==i.siteId?t+(n+" h ")+s+r:t+(n+":")+s+r),t},getDay:function(t,e){var i=t.getDay();return e.days[i]},structureDiffData:function(t){var e=(t=t/1e3)%3600;return{days:parseInt(t/86400),hours:Math.floor(t%86400/3600),minutes:Math.floor(e/60),seconds:Math.floor(e%60)}}}})),raptor.defineClass("com.ebay.raptor.vi.TimeLeft",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.bidUtil=raptor.require("com.ebay.raptor.vi.bid.BidUtil"),e.timeLeft={},e.stopTimer=!1,e.cfg=t,e.pubsub&&((t.isUrgencyHigh||t.isUrgencyMedHigh||t.enableAFAlways)&&!t.isBinCounter&&!t.isDealsTimer&&e.pubsub.publish(t.timerSvcId,{}),e.pubsub.subscribe(t.pbSvcId,(function(){e.stopTimer=!0}),e),e.pubsub.subscribe(t.powSvcId,(function(){e.stopTimer=!0}),e),e.pubsub.subscribe(t.ocbSvcId,(function(){e.stopTimer=!0}),e),e.pubsub.subscribe(t.counterSvcId,(function(t){e.timeLeftCounter(t)}),e),e.pubsub.subscribe(t.autoRefreshSvcId,(function(t){e.autoRefresh(t)}),e),e.pubsub.subscribe(t.timerStopSvcId,(function(){window.setTimeout((function(){e.refreshPage()}),2500)}),e)),(t.isBinCounter||t.isDealsTimer)&&(t.timeLeft={day:t.timeLeft.daysLeft,hour:t.timeLeft.hoursLeft,minute:t.timeLeft.minutesLeft,second:t.timeLeft.secondsLeft},e.startCountdown(t.timeLeft))},timeLeftCounter:function(){var t;this.bidUtil&&!this.stopTimer&&(t=this.getEndTime()?this.bidUtil.timeLeftVFromEndTime(this.getEndTime()):this.bidUtil.decrementOneSec(this.getTimeLeft()),this.updateTimeLeft(t))},startCounter:function(t,e,i){var n=this.cfg;e={TimeLeft:t,AccessedDate:e,ViewerItemRelation:i,DetailLevel:n.detailLevel};this.setTimeLeft(t),this.pubsub&&this.pubsub.publish(n.counterStartSvcId,e)},startCountdown:function(t){var e=this.cfg;this.setTimeLeft(t),this.timeLeftCounter(e)},autoRefresh:function(t){var e;t&&!this.stopTimer&&(!this.getEndTime()&&t.TimeLeft&&t.TimeLeft.endTime&&this.setEndTime(t.TimeLeft.endTime),e=this.getEndTime()?this.bidUtil.timeLeftVFromEndTime(this.getEndTime()):this.bidUtil.timeLeftV(t.TimeLeft),this.updateTimeLeft(e),this.startCounter(e,t.AccessedDate,t.ViewerItemRelation))},updateTimeLeft:function(t){var e=this.cfg,i="";t&&($("#"+e.timeLeftId).removeClass(e.lessTimeCss),i=0>=t.hour&&!e.isDealsTimer?e.hotTimeCss:e.lessTimeCss,formatCfg={dayTxt:e.dayTxt,dayCharTxt:e.dayCharTxt,hourTxt:e.hourTxt,hoursTxt:e.hoursTxt,hourCharTxt:e.hourCharTxt,minuteCharTxt:e.minuteCharTxt,secondCharTxt:e.secondCharTxt,cssElemId:e.timeLeftId,css:i},i=this.bidUtil.timeLeftFormat(t,formatCfg,e.isDealsTimer,e.enableAFAlways),$("#"+e.timeLeftId).html(i),this.pubsub.publish("VI_TIME_LEFT_UPDATE",{content:i,className:$("#"+e.timeLeftId).attr("class")}),e.isAccessibilityOffScreenTimerOn&&this.pubsub.publish("OFFSCREEN_BID",{timerId:"offscreenTimerPage",isOffScreenOnBidLayer:0,insertionPoint:$("#vi-time-wrapperSection"),timeLeft:t,sourceOfTimer:$("#vi-cdown_timeLeft")}))},setTimeLeft:function(t){self.timeLeft=t},getTimeLeft:function(){return self.timeLeft},setEndTime:function(t){self.endTime=t},getEndTime:function(){return self.endTime},refreshPage:function(){var t;t=(t=(t=window.location.href).replace(/#ht_.*/,"")).replace("&autorefresh=true",""),t+=-1!=t.indexOf("?")?"&autorefresh=true":"?autorefresh=true",top.location.replace(t)}}})),raptor.defineClass("com.ebay.raptor.vi.ValidateQuantity",(function(){return{init:function(t){var e=this;e.cfg=t,e.disableQtyChk=t.disableQtyCheck,e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("VALIDATE_QTY",(function(t){e.validate(t)}),e),e.pubsub.publish("VALIDATE_QTY",t),$("#"+t.qtyBoxId).keyup((function(){e.pubsub.publish("VALIDATE_QTY",t);var i=t.smeOfferTiers,n=t.isBuyBoxFlex?$("#vi-discountValue"):"";i&&0<i.length&&(0<$("#prcIsum").length&&e.adjustPrice($("#"+t.qtyBoxId).val(),$("#prcIsum"),i,n),0<$("#mm-saleDscPrc").length&&e.adjustPrice($("#"+t.qtyBoxId).val(),$("#mm-saleDscPrc"),i,n))})),e.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),e.registerPubSubMsgs(t)},adjustPrice:function(t,e,n,s){for(i in n)if(t>=parseInt(n[i].fromQuantityConditionValue)&&t<=parseInt(n[i].toQuantityConditionValue)){e.html(n[i].afterDiscountItemPriceWithSymbol),0<s.length&&n[i].discountValue&&s.html(n[i].discountValue);break}t>=parseInt(n[n.length-1].toQuantityConditionValue)&&(e.html(n[n.length-1].afterDiscountItemPriceWithSymbol),0<s.length&&n[n.length-1].discountValue&&s.html(n[n.length-1].discountValue))},registerPubSubMsgs:function(t){this.pubsub&&(this.pubsub.subscribe(this.msgs("TOGGLE_QTY_DISPLAY_STATE"),(function(e){this.toggleQtyBox(t,e.isDisabled,e.isMSKUVolumePricing),this.variationId=e.variationId}),this),this.pubsub.subscribe(this.msgs("VALIDATE_QTY_MSKU"),(function(e){this.validateMSKUQty(t,e)}),this),this.pubsub.publish(this.msgs("VALIDATE_QTY_MODULE_READY"),{}))},toggleQtyBox:function(t,e,i){$("#"+t.qtyBoxId).attr("disabled",e),e&&$("#"+t.qtyBoxId).attr(t.isValid,"false"),i||$("#"+t.qtyBoxId).val(1)},validateMSKUQty:function(t,e){t.remainingQty=e.quantityAvailable,t.maxQty=e.supressQty?e.maxQty:e.quantityAvailable,t.variationId=e.variationId,t.isSupressQty=1!==e.quantityAvailable&&e.supressQty,this.pubsub.publish("VALIDATE_QTY",t)},validate:function(t){t=t||this.cfg;var e=raptor.require("pubsub");if(t){var i,n,s=$("#"+t.qtyBoxId),r=$(s).val(),a=t.remainingQty,o=t.maxQty,l=$("#"+t.errorIcon),d=$("#"+t.errorMsg),c=!0,u=a,h=this.isInteger(r),p=t.isMinRemnantSetEnabled,m=t.remnantQtyValue,f=0,g=0;p&&(f=a-m+1,g=a-r),$(s).attr("disabled")||t.isVIMQty||(r=parseInt(r,10),!h||1>r?i=1===a?t.errTextMap[1]:t.errTextMap[3]:this.disableQtyChk?c=!1:0<o&&r>o?o>a?i=t.errTextMap[4]:(i=t.errTextMap[2],u=o):r>a?i=t.isSupressQty||a>t.availQtyThreshold?t.errTextMap[4]:1===a?t.errTextMap[1]:t.errTextMap[0]:p?m===a&&r<m?(i=t.errTextMap[6],u=m):0<g&&g<m?(i=t.errTextMap[5],u=a,n=f):c=!1:c=!1,i&&(a=$("#"+i).html())&&(a=a.replace(t.dummyQty,u).replace(t.anotherfield,n),$(d).html(a)),$(l).toggle(c),$(d).toggle(c),$(s).attr(t.isValid,c?"false":"true"),e.publish("QTY_VALIDATION_OUTPUT",{isValid:!c,selectedQty:r}))}},isInteger:function(t){if(t){for(var e=0,i=t.length;e<i;e++){var n=t.charAt(e);if(!("0"<=n&&"9">=n))return!1}return!0}return!1}}})),raptor.defineClass("com.ebay.raptor.vi.itemsummary.gotogether.GoTogether",(function(){return{init:function(t){var e=this;e.cfg=t,1<t.quantityTotal&&(e.enbaleGoTogether(),raptor.require("pubsub").subscribe("QTY_VALIDATION_OUTPUT",(function(t){e.enbaleGoTogether(t)}),e),e.clkGoTogetherHandler=function(){e.clkGoTogether()}),$("#"+t.helpIconId).click((function(){$(document).trigger("rover",{sid:"p2047675.l3122"})})),t.showJITMsg&&(t=e.getChild(t.overlayId))&&t.conf&&t.show($("#"+t.conf.trigger))},enbaleGoTogether:function(){var t=this.cfg,e=$("#"+t.qtyBoxId);e&&(this.isValid="true"===$(e).attr(t.isValid),this.selectedQty=$(e).val(),e=this.getChild(t.btnWidgetId),this.isValid&&1<this.selectedQty?e&&(e.enable(),$("#"+t.btnId).bind("click",this.clkGoTogetherHandler)):(e&&e.disable(),$("#"+t.btnId).unbind("click",this.clkGoTogetherHandler)))},clkGoTogether:function(){this.loadGoTogether()},loadGoTogether:function(){var t=this.cfg.btnUrl,e=-1;t&&(e=t.indexOf("?"),t+=(-1===e?"?":"&")+$.param({quantity:this.selectedQty}),window.location.href=t)}}})),raptor.defineClass("com.ebay.raptor.vi.jitmsg.JITMsg",(function(){return{init:function(t){var e=this,i=raptor.require("pubsub");e.cfg=t,e.cfg.pubsub=i,t.showJITMsg&&i&&(e.closeHandler=i.channel(t.olpId).subscribe(t.closeSvcId,(function(){try{e.toggleMsg()}catch(t){}}),e),t.manualShowTrigger&&$(window).load((function(){$("#"+t.triggerId).trigger("mouseenter"),$("#"+t.triggerId).trigger("click")})))},toggleMsg:function(){var t=this.cfg;$("#"+t.jitMsgId).hide(),$("#"+t.helpMsgId).show();try{this.setCookie()}catch(t){}this.closeHandler.unsubscribe();try{t.trackOnClose&&trackingUtil(t.trackingKey)}catch(t){}t.manualShowOnHover&&($("#"+t.triggerId).mouseover((function(){t.pubsub.publish("_OPEN_OLAY",{cmpId:t.olpId,trigger:t.triggerId})})),$("#"+t.triggerId).mouseout((function(){t.pubsub.publish("_CLOSE_OLAY",{cmpId:t.olpId,trigger:t.triggerId})})))},setCookie:function(){var t=this.cfg,e=raptor.require("ebay.cookies"),i=e.readCookie(t.cookieName,t.cookielet);e.writeCookielet(t.cookieName,t.cookielet,e.setBitFlag(i,t.cookieBit,1))}}})),raptor.defineClass("raptor.vi.MapStp",(function(){var t=!1;return{init:function(t){this.pubsub=raptor.require("pubsub"),this.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),this.cfg=t,this.registerPubSubEvents(t),this.addEventListener(t)},registerPubSubEvents:function(){var t=this;t.pubsub.subscribe(t.msgs("UPDATE_MAP_VALUES"),(function(e){t.updateMapOverlay(e)}),this),t.pubsub.publish(t.msgs("VALIDATE_MAPSTP_MODULE_READY"),{})},updateMapOverlay:function(t){var e=this.cfg;e.varId=t.varId,t.binPrice?$("#"+e.qtyBoxId).attr("disabled")||(this.cfg.msku={},this.cfg.msku.rp=t.retailPrice,this.cfg.msku.as=t.amtSaved,this.cfg.msku.bp=t.binPrice,$("#"+e.rpOlpId).html(t.retailPrice?t.retailPrice:""),$("#orgPrc").html(t.retailPrice?t.retailPrice:""),t.retailPrice?$("#orgPrc-lbl").show():$("#orgPrc-lbl").hide(),$("#"+e.asOlpId).html(t.amtSaved?t.amtSaved:""),$("#"+e.bpOlpId).html(t.binPrice?t.binPrice:"")):(this.cfg.msku={},this.setContent(e))},setContent:function(t){t&&(t.msku&&t.msku.bp?($("#"+t.rpOlpId).html(t.msku.rp?t.msku.rp:""),$("#"+t.asOlpId).html(t.msku.as?t.msku.as:""),$("#"+t.bpOlpId).html(t.msku.bp?t.msku.bp:""),$("#orgPrc").html(t.msku.rp?t.msku.rp:""),t.msku.rp?$("#orgPrc-lbl").show():$("#orgPrc-lbl").hide()):($("#"+t.rpOlpId).html(t.rp?t.rp:""),$("#"+t.asOlpId).html(t.as?t.as:""),$("#"+t.bpOlpId).html(t.bp?t.bp:""),$("#orgPrc").html(t.rp?t.rp:""),t.rp?$("#orgPrc-lbl").show():$("#orgPrc-lbl").hide()))},addEventListener:function(e){var i=this,n={binBtnId:e.binBtnId,qtyBoxId:"qtyTextBox",submitURL:e.submitURL,isValid:"isValid",mapStpShowStrmLineBinLayer:e.showStrmLineBinLayer};$("#"+e.binBtnId).click((function(){if(i.pubsub){if(i.pubsub.publish(i.msgs("VALIDATE_MSKU_VARIATIONS"),{}),"t"==e.binEnabled&&(n={binBtnId:e.binBtnId,qtyBoxId:"qtyTextBox",submitURL:e.submitURL,isValid:"isValid",binEnabled:"t"}),e.showStrmLineBinLayer&&i.pubsub.publish("_CLOSE_OLAY",{cmpId:e.mapPCOlyId}),e.enableCustomizationDialog){var s=document.getElementById("customizationSection");s&&(t=!(!(s=s.querySelector("textarea"))||0!==s.value.trim().length))}n={binBtnId:e.binBtnId,qtyBoxId:"qtyTextBox",submitURL:e.submitURL,isValid:"isValid",mapStpShowStrmLineBinLayer:e.showStrmLineBinLayer,binEnabled:"t"==e.binEnabled&&"t",showReminderDialog:t,confirmationDialog:e.confirmationDialog,enableCustomizationDialog:e.enableCustomizationDialog,customizationBinOverlay:e.customizationOverlay},i.pubsub.publish(i.msgs("SUBMIT_BINBTN"),n)}})),$("#"+e.mapPCId).click((function(){i.setContent(e)})),!e.isMsku&&"DURING_CHECKOUT"==e.priceExposure&&"t"==e.binEnabled&&$("#"+e.mapPrcDChkId+" a").each((function(){$(this).attr("href","javascript:;"),$(this).click((function(){return i.pubsub.publish(i.msgs("BIN_SVC_ID"),{vQty:$("#"+n.qtyBoxId).val(),vId:"",dcl:!0}),!1}))})),e.isMsku&&"DURING_CHECKOUT"==e.priceExposure&&$("#"+e.mapPrcDChkId+" a").each((function(){$(this).attr("href","javascript:;"),$(this).click((function(){if(i.pubsub&&(i.pubsub.publish(i.msgs("VALIDATE_MSKU_VARIATIONS"),{}),"true"==$("#"+n.qtyBoxId).attr(n.isValid)&&(-1!=e.varId||0<parseInt($("#"+e.selectedVarDomId).html())))){if((null==e.varId||0>=e.varId)&&(e.varId=$("#"+e.selectedVarDomId).html()),"t"==e.binEnabled)return i.pubsub.publish(i.msgs("BIN_SVC_ID"),{vQty:$("#"+n.qtyBoxId).val(),vId:e.varId,dcl:!0}),!1;i.duringChkoutUrl=e.duringChkoutUrl,e.duringCheckoutGXOUrl&&$("#sh-not-mayBe")&&0<$("#sh-not-mayBe").length&&(i.duringChkoutUrl=e.duringCheckoutGXOUrl),window.location=i.duringChkoutUrl+"&var="+e.varId+"&quantity="+$("#"+n.qtyBoxId).val()}}))}))}}})),raptor.defineClass("com.ebay.raptor.vi.notification",(function(){return{init:function(t){var e=this;e.conf=t,t.startTime&&t.displayTime&&(e.conf.ph1varA?e.sT=e.supportsTransistion():e.bindNotifyCmpEvents(),"0"==t.type?e.interval=e.startCountdown():"1"==t.type&&$(document).bind("scroll.vi.notification",(function(){$(document).unbind("scroll.vi.notification"),e.showMessaging()})))},bindNotifyCmpEvents:function(){var t=this,e=$("#"+t.conf.notificationElm+"_cls_btn");e&&e.bind("click",(function(){trackingUtil("VI_NOTIFICATION_ON_CLOSE"),$("#"+t.conf.notificationElm).hide()}))},setComponentLeftPos:function(){this.conf.cmpWidth=$("#"+this.conf.notificationElm).width();var t=$("#Body").outerWidth(),e=0,i=0;(t=(parseInt(document.documentElement.clientWidth)-t)/2)+2*this.conf.leftPaddingOffset>this.conf.cmpWidth?"1"==this.conf.alignType?i=t-this.conf.cmpWidth-this.conf.leftPaddingOffset:e=this.conf.redesign?t-this.conf.cmpWidth-2*this.conf.leftPaddingOffset:t-this.conf.cmpWidth-this.conf.leftPaddingOffset:"1"==this.conf.alignType?i=0<t?t+this.conf.leftPaddingOffset:this.conf.leftPaddingOffset:e=this.conf.leftPaddingOffset,"1"==this.conf.alignType?$("#"+this.conf.notificationElm).css("right",i+"px"):$("#"+this.conf.notificationElm).css("left",e+"px")},startCountdown:function(){var t=this;return setInterval((function(){t.showMessaging()}),t.conf.startTime)},showMessaging:function(){var t=this;clearInterval(t.interval);var e=$("#"+t.conf.notificationElm);t.conf.ph1varA?t.sT?$(e).css("top","-28px"):$(e).animate({top:-28,height:"20px"},2e3):(t.setComponentLeftPos(),$(e).fadeIn("slow",(function(){t.interval=setTimeout((function(){clearInterval(this),$(e).fadeOut("slow")}),t.conf.displayTime)})))},supportsTransistion:function(){var t=document.createElement("p").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}}})),raptor.defineClass("raptor.vi.OnDemandTransl",(function(){return{init:function(t){this.pubsub=raptor.require("pubsub"),this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.addEventListener(t),this.bSwap=!1,this.lstSelLng={},this.lstLng={}},addEventListener:function(t){for(var e=this,i=0;i<t.tlc.length;i++)$("#tlc_"+t.tlc[i].locale).click((function(){e.menuClick=!0,e.buildUrl(t,this.id)}))},buildUrl:function(t,e){var i,n=e.substr(4,e.length-4);i=t.descUrl,i+="&targetlc="+n,"function"==typeof window.postMessage?($("#"+t.descId).attr("src",i),void 0===t.lstLcl||t.lstLcl!==n||t.isTranslEnabledAll?(i=!t.isTranslEnabledAll,this.makeRequest(t,n,i)):this.pubsub.publish("_RESET_FRAME_RESIZE_FLAG",{})):(i+=t.descParam,$("#"+t.descId).attr("src",i),this.makeRequest(t,n,!1)),this.swapMenu(e,t),this.pubsub.publish("_CLOSE_OLAY",{cmpId:t.odtOlyId})},makeRequest:function(t,e,i){t=t.url+"&targetlc="+e,this.ajaxUtil.getJSON(t+(i?"&slo=1":"&slo=0"),this.handleResponse,this),this.pubsub=raptor.require("pubsub"),this.pubsub.publish("_RESET_FRAME_RESIZE_FLAG",{})},handleResponse:function(t){t&&t.status&&"SUCCESS"==t.status&&(void 0!==t.title&&""!=t.title&&(this.bSwap&&($(".it-icon-pd").insertAfter($("#itemTitle")),this.bSwap=!1),$("#itemTitle").html(t.title),t.title.toString().match(/text-align:right/)&&($("#itemTitle").find("p:first").addClass("it-mrg0"),$(".it-icon-pd")&&($("#itemTitle").find("p:first").prepend($(".it-icon-pd")),this.bSwap=!0))),void 0!==t.subTitle&&""!=t.subTitle&&$("#subTitle").html(t.subTitle))},swapMenu:function(t,e){var i,n,s,r,a,o,l,d=this;vOrigTxt=d.getVal(e.vOrigLng,t),i=$("#"+e.odtLnkId).find("span:first"),l=e.isTranslEnabledAll?0:1,n=$("#"+t).find("span:eq("+l+")"),$("#"+e.odtOlyId).find('span[style="font-weight: bold;"]').css("font-weight","normal"),e.isTranslEnabledAll?(null==d.dfTxt&&(d.dfTxt=$(i).html()),s=$("#"+e.vOrigId),r=$("#"+e.vTranslId),$(e.logoId).hide(),""!==e.dfltLng&&(a=e.dfltLng,t.substring(4)!==a||t.substring(4)===a&&d.menuClick?($(r).hide(),o="tlc_"+a,$(s).unbind("click"),$(s).html(vOrigTxt),$(s).show(),$(s).click((function(){d.menuClick=!1,d.buildUrl(e,o)})),d.setLastLng($(i).html()),$(i).html($(n).html()),d.setLastSel(t)):(t.substring(4),$(s).hide(),vTranslTxt=d.getVal(e.vTranslLng,d.getLastSel()),$(r).unbind("click"),$(r).html(vTranslTxt),$(r).show(),d.menuClick&&$(i).html(d.dfTxt),$(r).click((function(){d.menuClick=!1,d.buildUrl(e,d.getLastSel())}))))):(d.setLastSel(t),$(i).html($(n).html()),i=e.en,$("#tlc_"+e.tlc_en).show(),$(n).text()==i&&$("#tlc_"+e.tlc_en).hide()),$("#"+t).find("span:eq("+l+")").css("font-weight","bold")},setLastSel:function(t){self.lstSelLng=t},getLastSel:function(){return self.lstSelLng},setLastLng:function(t){self.lstLng=t},getLastLng:function(){return self.lstLng},getArr:function(t){for(var e=[0,0],i=[],n=0;n<t.split(",").length;n++){i[n]=t.split(",")[n],e[n]=[];for(var s=0;s<i[n].split(":").length;s++)e[n][s]=i[n].split(":")[s]}return e},getVal:function(t,e){for(var i,n=this.getArr(t),s=0;s<n.length;s++)n[s][0]==e&&(i=n[s][1]);return i}}})),raptor.defineModule("js.sellerinfo.BSIContactDetails",(function(){return{init:function(t){var e=this;e.conf=t,e.isAdded=!1,e.pubsub=raptor.require("pubsub"),e.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),this.pubsub.subscribe(e.msgs("BS_CONTACTDETAILS"),(function(t){t&&t.bsciid&&!e.isAdded&&(t=$("#"+t.bsciid))&&e.decodeContact(t)}),this)},decodeContact:function(t){var e=$("#"+this.conf.bscdid);e&&(e.find("*").each((function(){if(0==this.children.length){var t=$(this).text();t&&$(this).html(t.split("").reverse().join(""))}})),t.append(e),this.isAdded=!0)}}})),raptor.defineModule("js.sellerinfo.BusinessSellerInfo",(function(){return{init:function(t){this.conf=t,this.pubsub=raptor.require("pubsub"),this.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),this.attachClickEvents(),this.rpClicked=this.tcClicked=this.ciClicked=!1},attachClickEvents:function(){var t=this,e=$("#"+t.conf.cid);t.conf.showHideBusinessContactInfo&&$("#"+t.conf.bsiecid+" a").click((function(){if(t.ciClicked||(t.ciClicked=!0,$(document).trigger("vi_modules_loaded",["vi_bsf","ci",!0]),trackingUtil("VI_BSI_CHEVRON_CONTACTINFO")),e.hasClass("bsi-exp"))e.removeClass("bsi-exp");else{e.addClass("bsi-exp");try{t.pubsub.publish(t.msgs("BS_CONTACTDETAILS"),{bsciid:t.conf.bsciid})}catch(t){}}})),t.conf.hideTermsAndConditions&&$("#"+t.conf.textboxLabelId).on("click",(function(){e.toggleClass("bsi-exp-toc"),t.tcClicked||(t.tcClicked=!0,$(document).trigger("vi_modules_loaded",["vi_bsf","tc",!0]))})),$("#bsi-returns-exp").on("click",(function(){$(this).toggleClass("bsi-exp-open"),$("#bsi-returns").toggle(),t.rpClicked||(t.rpClicked=!0,$(document).trigger("vi_modules_loaded",["vi_bsf","rp",!0]))}))}}})),raptor.defineClass("com.ebay.raptor.vi.share.ShareLinks",(function(){return{init:function(t){var e,i=this;if(i.cookie=raptor.require("ebay.cookies"),"SHARE"==t.widgetType){var n=t.shareJsElmId;if(document.getElementById(n))return;(e=document.createElement("script")).id=n,e.async=!0,e.defer=!0,e.src=t.plaModel.shareWidgetJsUrl,$(window).load((function(){document.getElementsByTagName("head")[0].appendChild(e),$("#ebay-scShare-div").on("click",".scTalkPopUpClose",(function(){i.talkOverlayClose()}))}))}"SIGNALS"==t.widgetType&&(n=t.signalsJsElmId,$("head").append('<meta property="fb:app_id" content="102628213125203">'),document.getElementById(n)||((e=document.createElement("script")).id=n,e.async=!0,e.defer=!0,e.src=t.plaModel.socialSignalsJsUrl,$(window).load((function(){document.getElementsByTagName("head")[0].appendChild(e)}))))},talkOverlayClose:function(){var t=this.cookie.readCookie("dp1","pbf");this.cookie.writeCookielet("dp1","pbf",this.cookie.setBitFlag(t,66,1))}}})),raptor.defineClass("com.ebay.raptor.vi.shipping.CalculateImportCharge",(function(){return{init:function(t){this.cfg=t,this.pubsub=raptor.require("pubsub"),this.sendGetRatesCall()},sendGetRatesCall:function(){var t=this,e=t.cfg,i=e.calcImportChargeUrl;t.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),i||(i="http://www.d-sjc-00532519.dev.ebay.com:8080/itm/getrates?item=250002821288&country=3&zipcode=95123"),e.calculateOnLoad?(i=t.appendParameters(i,{co:"1",maxBid:e.maxBidAmt}),t.triggerCall(i)):$("#"+e.impChIdLink).click((function(){var i=e.calcImportChargeUrl;i&&(i=t.appendParameters(i,{co:"1",maxBid:e.maxBidAmt}),t.triggerCall(i))}))},appendParameters:function(t,e){return t?t+"&"+$.param(e):t},triggerCall:function(t){this.ajaxUtil.getJSON(t,this.handleResponse,this)},handleResponse:function(t){var e=this.cfg;e.calculateOnLoad?this.pubsub.publish("IMP_CHARGE_RESPONSE",t):t&&t.impChCost?($("#"+e.impChIdCnt).html(t.impChCost),$("#"+e.impChBidTxtId).show()):($("#"+e.impChIdCnt).html(""),$("#"+e.impChBidTxtId+"Err").show())}}})),raptor.defineClass("raptor.vi.SimilarItems",(function(){return{init:function(t){this.cfg=t,this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.addEventListener(t),this.disableAnchor()},addEventListener:function(t){var e=this;$("#"+t.selView).mouseover((function(){e.showMenu(t)})),$("#"+t.selView).mouseout((function(){e.hideMenu(t)})),$("#"+t.selMenu).mouseout((function(){e.hideMenu(t)})),$("#"+t.selGallery).click((function(){e.request(t.gvUrl)})),$("#"+t.selList).click((function(){e.request(t.lvUrl)}))},disableAnchor:function(){$('a[href="#shId"]').replaceWith($('a[href="#shId"]').text()),$('a[href="#rpdId"]').replaceWith($('a[href="#rpdId"]').text())},showMenu:function(t){$("#"+t.selMenu).show()},hideMenu:function(t){$("#"+t.selMenu).hide()},request:function(t){var e=this.cfg;this.ajaxUtil.getJSON(t,this.response,this),this.hideMenu(e)},response:function(t){var e=this.cfg,i=$("#"+e.siDivId),n=$("#"+e.tglView);t&&i&&(i.html(t.hlpView),$(n).hasClass("vLIST")?($(n).addClass("vGRID"),$(n).removeClass("vLIST"),$("#"+e.selMenu).addClass("lv"),$("#"+e.selMenu).removeClass("gv"),$("#"+e.selList).show(),$("#"+e.selGallery).hide()):($(n).addClass("vLIST"),$(n).removeClass("vGRID"),$("#"+e.selMenu).removeClass("lv"),$("#"+e.selMenu).addClass("gv"),$("#"+e.selGallery).show(),$("#"+e.selList).hide()))}}})),raptor.defineClass("com.ebay.raptor.vi.shipping.ShippingQuoteGigaMove",(function(){return{init:function(t){this.cfg=t,this.pubsub=raptor.require("pubsub"),this.bindClick()},bindClick:function(){var t=this;$("#viTabs_1, #viTabs_2").bind("click",(function(e){"Shipping and payments"==e.target.innerHTML&&t.getshippingUrl()})),$(".vhr_shp").bind("click",(function(){t.getshippingUrl()}))},getshippingUrl:function(){var t=this.cfg;""!=t.shippingUrl&&0==$("#shippingSection #subcontent").length&&(url=t.shippingUrl,this.makeCall(url,this.display,this))},makeCall:function(t,e){this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.ajaxUtil.getJSON(t,e,this)},display:function(t){t&&(t=t.SubContent,$("#shippingSection").html(t))}}})),raptor.defineClass("ebay.viewItem.solt",(function(){return{init:function(t){this.conf=t,this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),t.url&&t.disableInstantSaleLink&&this.makeInstantSaleFrameCall(),this.quickSaleInit()},makeInstantSaleFrameCall:function(){var t=this.conf;t.url&&this.ajaxUtil.getJSON(t.url,this.processInstantSaleResponse,this)},processInstantSaleResponse:function(t){var e=this.conf;t&&t.ins_sale_price&&0<t.ins_sale_price.length&&(t=t.ins_sale_price[0].insSalePrice)&&($("#"+e.instSalePricePH).html(t),$("#"+e.instantSaleCntId).show())},quickSaleInit:function(){var t=this,e=t.conf;0<e.quickSaleVar&&e.soltQuickSaleAjaxUrl&&e.soltQuickSaleUrl&&(1==e.quickSaleVar?t.quickSaleAjaxCall():2==e.quickSaleVar?$(window).on("load",(function(){t.quickSaleAjaxCall()})):10<=e.quickSaleVar&&$(window).on("load",setTimeout((function(){t.quickSaleAjaxCall()}),e.quickSaleVar)))},quickSaleAjaxCall:function(){var t=this,e=t.conf;e.soltQuickSaleAjaxUrl&&e.soltQuickSaleUrl&&$.ajax({url:e.soltQuickSaleAjaxUrl,success:function(e){t.quickSaleAjaxResp(e)}})},quickSaleAjaxResp:function(t){var e=this.conf;t&&t.instantSaleEligible&&t.instantSaleEligible&&((t=$("#inst_sale_btn")).attr("href",e.soltQuickSaleUrl),t.removeAttr("_sp"),t.text(e.soltQuickSaleBtnTxt),$("#"+e.instantSaleMsgId).html("<b>"+e.soltQuickSaleMsg+"</b>"))}}})),raptor.defineClass("raptor.vi.CategoryList",(function(){return{init:function(t){this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.handleRequest(t)},handleRequest:function(t){this.ajaxUtil.getJSON(t.refreshCateUrl)}}})),raptor.defineClass("ui.Tab",(function(){return{events:["select"],init:function(t){var e=this,i=$("#"+t.id),n=0,s=0,r=i.children(".tab"),a=i.children(".content"),o=r.find("a.item");o.each((function(){n+=$(this).width()+10})),i.css("min-width",n+150),0!=a.length&&o.each((function(){var n=$(this);n.attr("idx",s),s++,n.click((function(){t.isDS3DeepLinksV2?1<=n.attr("idx")&&i.children(".content.sel").removeClass("sel"):i.children(".content.sel").removeClass("sel"),r.find(".item.sel").removeClass("sel"),$("#"+this.id+"_cnt").addClass("sel"),$(this).addClass("sel"),e.publish("select",{index:$(this).attr("idx"),source:e})}))}))}}})),raptor.defineClass("com.ebay.raptor.vi.topmessagepanel.ListPanel",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),e.cfg=t,e.listIds=[],e.prevListDetails=[],e.isPanelOpen=!1,e.allListDetails=[],e.pubsub.subscribe(t.listAddSvcId,(function(t){e.updateMsg(t)}),e),e.pubsub.subscribe("STATUS_PANEL_LIST_SVC_INIT",(function(t){e.updateMsg(t)}),e),e.pubsub.subscribe("HIDE_DROPDOWN",(function(){e.hideDropDown()}),e),e.pubsub.subscribe("TRIGGER_LIST_REMOVE",(function(t){e.remove(t)}),e),$("#"+t.remove).click((function(){e.remove()})),$("html").bind("click",(function(){e.hideDropDown()})),t.isShareTextClickable&&$("#socShrSubTxt").click((function(){return e.shareTextConst(),!1})),t.isClts&&e.bindAddToColMsg(),e.pubsub.publish("LIST_PANEL_READY",{})},hideDropDown:function(){this.isPanelOpen&&this.hide()},updateMsg:function(t){var e=this,i=e.cfg;if(e.allListDetails=[],t){if(t.removeWatch)return e.buildMessage(t);if(t.isOnLoad&&(t.isMSKU&&(e.listIds=[]),e.prevListDetails=[],!t.listDetails||!(t.listDetails&&0<t.listDetails.length)))return e.watching=!1,void e.hideMessagePanel();if(e.prevListDetails&&0<e.prevListDetails.length&&(e.addList(e.prevListDetails),e.prevListDetails.length=0),t.listDetails){e.buildMessage(t),t.isOnLoad&&t.listDetails&&1<t.listDetails.length&&e.addList(t.listDetails),e.prevListDetails=t.listDetails;for(var n=0;n<t.listDetails.length;n++)if(t.listDetails[n].isWatchList){e.toggleWatcherViewMsg(!1);break}}e.allListDetails=[],e.allListDetails=t.isOnLoad?e.prevListDetails:e.prevListDetails.concat(e.listIds)}1<e.listIds.length&&(e.toggleBinded=!0,$("#"+i.icon).bind("click",(function(t){t.stopPropagation(),e.togglePanel()})))},togglePanel:function(){this.isPanelOpen?this.hide():(this.show(),this.pubsub.publish(this.msgs("FORCE_CLOSE_OVERLAY"),{hideOnly:!0}))},show:function(){var t,e,i,n,s,r,a=this.cfg;t=$("#"+a.icon),n=$("#"+a.listPanel),r=$("#"+a.msgPanel),t&&n&&r&&($(t).addClass(a.iconCSS),e=$(t).width(),i=$(t).position().left,$(n).offset({top:0,left:0}),s=$(n).width(),r=$(r).height(),$.browser.msie&&8>$.browser.version&&(r-=20),i+e<s?t=i:t=i+(e=$(t).outerWidth())-s-2,a.isRefresh&&(t=i,r-=20),$(n).css({position:"absolute",top:r+"px",left:t+"px",display:"block"}),this.isPanelOpen=!0)},hide:function(){var t=this.cfg;$("#"+t.icon).removeClass(t.iconCSS),$("#"+t.listPanel).hide(),this.isPanelOpen=!1},addList:function(t){var e=!1;if(t&&this.listIds)for(var i=0,n=t.length;i<n;i++){var s=t[i];if(s&&s.listId){for(var r=0,a=this.listIds.length;r<a;r++)if(this.listIds[r].listId&&s.listId===this.listIds[r].listId){e=!0;break}e||this.add(s)}}},add:function(t){var e=this.cfg;t&&($("#"+e.listContainer).append(this.buildNewElem(t)),this.listIds.push(t))},buildNewElem:function(t){var e,i=this.cfg;return t?((e=document.createElement("a")).id=t.listId,e.innerHTML=t.isWatchList?i.watchListName:t.isWishList?i.wishListName:t.listName,e.setAttribute("n",t.listName),e.href=t.listURL,e):""},remove:function(t){var e,i=this.cfg,n=t&&t.watchOnly;this.pubsub&&(n?this.allListDetails.some((function(t){return t.isWatchList&&(e=[t]),t.isWatchList})):e=this.allListDetails,window&&window.$ItemContext&&window.$ItemContext.isVimBuyBox&&i&&!i.userHasList?(!t||t&&!t.isVimPanelUpdate)&&document.dispatchEvent(new CustomEvent("ux__x-watch-action__proxy-watch-click",{detail:{listDetails:e,watchOnly:n,isStatusPanelTrigger:!0}})):this.pubsub.publish(i.triggerRemoveSvcId,{listDetails:e,watchOnly:n})),this.listIds=[],this.prevListDetails=[],this.toggleWatcherViewMsg(!0),this.watching=!1,n&&this.allListDetails.length-1?this.updateMsg({listDetails:e,removeWatch:!0}):($("#"+i.listContainer).empty(),$("#"+i.listMsg).empty(),$("#"+i.removeContainer).hide(),this.hideMessagePanel())},toggleRemove:function(t){var e=this.cfg;0===t?$("#"+e.removeContainer).hide():(1===t?$("#"+e.remove).html(e.REMOVE):1<t&&(e.isNewAddToCustomWatchListEnabled?$("#"+e.remove).replaceWith(e.MANAGER_YOUR_LISTS_IN_MYEBAY):$("#"+e.remove).html(e.REMOVE_ALL)),$("#"+e.removeContainer).show())},hideMessagePanel:function(){var t=this.cfg;this.isPanelOpen&&this.hide(),!this.watching&&this.collection?($("#"+t.listMsg).hide(),$("#"+t.removeContainer).hide(),this.toggleWatcherViewMsg(!0)):!this.watching&&!this.collection&&(t.isHideStatusMsgPanel&&$("#"+t.msgPanel).hide(),$("#listPanel").hide(),$("#s_w_pipe").hide(),$("#"+t.listContainer).empty()),this.showHideColPipe()},showMessagePanel:function(){var t=this.cfg;$("#"+t.listContainer).empty(),$("#"+t.listMsgContainer).show(),t.isHideStatusMsgPanel||$("#s_w_pipe").show(),$("#"+t.msgPanel).show(),$("#listPanel").show(),this.showHideColPipe()},buildMessage:function(t){var e,i,n,s=this.cfg,r="";t&&(i=t.listDetails)&&0<i.length&&(n=i.length,e=this.listIds.length,t.removeWatch?r=s.REMOVEDFROM_WATCHLIST.replace(s.listLinkPH,i[0].listURL):t.isGuestWatchFull?r=s.GUESTWATCH_FULL.replace(s.listLinkPH,i[0].listURL):t.isGuestWatchAlreadyFull?r=s.GUESTWATCH_ALREADY_FULL.replace(s.listLinkPH,i[0].listURL):t.isOnLoad&&t.isSignedIn?r=this.buildShortMsg(i,n,e):1===n?(i=i[0])&&i.listId&&(0===e?r=i.isWatchList?s.ADDEDTO_WATCHLIST.replace(s.listLinkPH,i.listURL):i.isWishList?s.ADDEDTO_WISHLIST.replace(s.listLinkPH,i.listURL):s.ADDEDTO_ONE_LIST.replace(s.listLinkPH,i.listURL).replace(s.listNamePH,i.listName):1===e?(r=this.listIds[0].listURL,r=i.isWatchList?s.ADDEDTO_WATCHLIST_ONE_OTHER.replace(s.listLinkPH,i.listURL).replace(s.otherLinkPH,r):i.isWishList?s.ADDEDTO_WISHLIST_ONE_OTHER.replace(s.listLinkPH,i.listURL).replace(s.otherLinkPH,r):s.ADDEDTO_ONE_LIST_ONE_OTHER.replace(s.listLinkPH,i.listURL).replace(s.otherLinkPH,r).replace(s.listNamePH,i.listName)):1<e&&(r=i.isWatchList?s.ADDEDTO_WATCHLIST_MULTIPLE_OTHER.replace(s.listLinkPH,i.listURL).replace(s.otherLinkPH,"javascript:;").replace(s.listCountPH,e):i.isWishList?s.ADDEDTO_WISHLIST_MULTIPLE_OTHER.replace(s.listLinkPH,i.listURL).replace(s.otherLinkPH,"javascript:;").replace(s.listCountPH,e):s.ADDEDTO_ONE_LIST_MULTIPLE_OTHER.replace(s.listLinkPH,i.listURL).replace(s.otherLinkPH,"javascript:;").replace(s.listCountPH,e).replace(s.listNamePH,i.listName))):0===e?r=s.ADDEDTO_MULIPLE_NEW_LIST.replace(s.newListCountPH,n):1===e?r=s.ADDEDTO_MULIPLE_NEW_LIST_ONE_OTHER.replace(s.newListCountPH,n).replace(s.otherLinkPH,i[0].listURL):1<e&&(r=s.ADDEDTO_MULIPLE_NEW_LIST_MULTIPLE_OTHER.replace(s.newListCountPH,n).replace(s.listCountPH,e).replace(s.otherLinkPH,"javascript:;")),r&&($("#"+s.listMsg).html(r).show(),!t.removeWatch&&!t.isGuestWatchAlreadyFull&&(this.watching=!0),this.showMessagePanel(),t.isSignedIn?this.toggleRemove(n+e):$("#"+s.removeContainer).hide()))},buildShortMsg:function(t,e,i){var n=this.cfg,s="";return t&&(1===e&&0===i?s=(t=t[0]).isWatchList?n.ONLOAD_WATCHLIST.replace(n.listLinkPH,t.listURL):t.isWishList?n.ONLOAD_WISHLIST.replace(n.listLinkPH,t.listURL):n.ONLOAD_SINGLE_LIST.replace(n.listLinkPH,t.listURL).replace(n.listNamePH,t.listName):s=n.ONLOAD_MULITPLE_LIST.replace(n.listLinkPH,"javascript:;").replace(n.listCountPH,e+i)),s},toggleWatcherViewMsg:function(t){var e=this.cfg;t?($("span#"+e.watcherViewMsgElem+" .viWatcherMsg").html(""),$("#"+e.watcherViewMsgElem).hide()):e.watcherViewMsg&&($("span#"+e.watcherViewMsgElem+" .viWatcherMsg").html(e.watcherViewMsg),$("#"+e.watcherViewMsgElem).show())},bindAddToColMsg:function(){var t=this;$(".vi-atc-smsg-s > a, .vi-atc-smsg-m > a").attr("href","javascript:;"),$(".vi-atc-smsg-s > a, .vi-atc-smsg-m > a").bind("click",(function(){$(".clnw-collect").trigger("click")})),t.pubsub.subscribe("ADD_TO_COLLECTION_STATUS_MSG",(function(e){t.updateAddToColMsg(e)}),t)},updateAddToColMsg:function(t){0==t.cnt?(this.collection=!1,this.showHideColMsg()):(this.collection=!0,1<t.cnt?($(".vi-atc-smsg-m > a > span").html(t.cnt),$(".vi-atc-smsg-s").hide(),$(".vi-atc-smsg-m").show()):($(".vi-atc-smsg-m").hide(),$(".vi-atc-smsg-s").show()),this.showHideColMsg(!0))},showHideColMsg:function(t){var e=this.cfg;t?($("#"+e.atcL).show(),this.showMessagePanel()):($("#"+e.atcL).hide(),this.hideMessagePanel())},showHideColPipe:function(){var t=this.cfg;t.isClts&&(this.watching&&this.collection?$("."+t.colPipe).show():$("."+t.colPipe).hide())},shareTextConst:function(){var t,e=this.cfg;t=$("#"+e.socialStatusId+" a").attr("href"),$("#socShrSubTxt").attr("href",t),window.open(t,"","scrollbars,resizable,screeny=top,width=800,screenX=200,screenY=100,height="+e.ssPopHeight,"_blank")}}})),raptor.defineClass("com.ebay.raptor.vi.topmessagepanel.TopMessagePanel",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.cfg=t,e.bindEventListeners(),e.pubsub&&e.pubsub.subscribe(t.autoRefreshSvcId,(function(t){e.setMessage(t)}),e)},bindEventListeners:function(){var t=this;if(this.cfg.transactionId=this.cfg.transactionId?this.cfg.transactionId+"":"0",this.cfg&&this.cfg.shopActionPaynowUrl){var e={submitURL:this.cfg.submitUrl,actionButtonType:"PAY_NOW",shopActionPaynowUrl:this.cfg.shopActionPaynowUrl,itemId:this.cfg.itemId,transactionId:this.cfg.transactionId};$("#"+this.cfg.primaryBtnId).on("click",(function(i){t.pubsub.publish("VAS_CALL_TO_ACTION_PAY_NOW",e),i.preventDefault()}))}$("#_rvwofr").on("click",(function(t){t.preventDefault()})),$("#sio_buyer_review_offer_cta").click((function(t){var e=$("#sio-review-offer-button");e.length&&(t.preventDefault(),e.click())})),t.pubsub.channel("listing_history_panel_overlay").subscribe("_OLY_OPN_SVC",(function(){var t=$("#listing_history_panel_item_iframe"),e=$("#listing_history_panel_loading");t.attr("src")||t.attr("src",t.data("src")).load((function(){e.hide()})).removeData("src")}))},setMessage:function(t){var e,i,n,s=this.cfg,r=!1,a=!1;t&&!s.inlineExp&&(e=t.ViewerItemRelation,this.getTimeLeft(t),"HIGHBIDDER"==e?(i=t.IsReserve&&!t.IsReserveMet?s.CHINESE_BUYER_HIGH_BIDDER_RESERVE_NOT_MET_PC_ON:s.CHINESE_BUYER_HIGH_BIDDER_PC_ON,r=!0,a=!1,$("#"+s.panelId).find(".msg").addClass("msg green")):"OUTBIDDER"==e&&(n=s.CHINESE_BUYER_OUTBIDDER_PC_ON,r=!1,a=!0,$("#"+s.panelId).find(".msg").addClass("msg red")),r?$("#"+s.smId).html(i):a&&$("#"+s.smId).html(n))},getTimeLeft:function(t){var e=0;return(t=t.TimeLeft)&&(e=86400*t.DaysLeft+3600*t.HoursLeft+60*t.MinutesLeft+t.SecondsLeft),e}}})),raptor.defineClass("com.ebay.raptor.vi.MsgHandler",(function(){var t;return t={VALIDATE_MSKU_VARIATIONS:"_VALIDATE_MSKU_VARIATIONS",TRIGGER_MSKU_IMG_GROUPING:"_TRIGGER_MSKU_IMG_GROUPING",VARIATION_EDIT_WATCH_STATUS:"VARIATION_EDIT_WATCH_STATUS",VALIDATE_QTY_MODULE_READY:"VALIDATE_QTY_MODULE_READY",VALIDATE_MAPSTP_MODULE_READY:"VALIDATE_MAPSTP_MODULE_READY",VALIDATE_LIST_MODULE_READY:"VALIDATE_LIST_MODULE_READY",VALIDATE_CART_MODULE_READY:"VALIDATE_CART_MODULE_READY",GROUP_MSKU_IMAGES:"_GROUP_MSKU_IMAGES",TRIGGER_CLICK_ON_MAIN_IMG_FILMSTRIP:"_TRIGGER_CLICK_ON_MAIN_IMG_FILMSTRIP",TOGGLE_QTY_DISPLAY_STATE:"_TOGGLE_QTY_DISPLAY_STATE",UPDATE_MAP_VALUES:"_UPDATE_MAP_VALUES",UPDATE_MAP_VALUES:"_UPDATE_MAP_VALUES",UPDATE_STP_VALUES:"_UPDATE_STP_VALUES",ADD_TO_WATCH_LNK:"_ADD_TO_WATCH_LNK",ADD_TO_WATCH_BTN:"_ADD_TO_WATCH_BTN",HIDE_ADD_TO_CART_LINK:"HIDE_ADD_TO_CART_LINK",VALIDATE_QTY_MSKU:"_VALIDATE_QTY_MSKU",VARIATION_EDIT_WATCH_STATUS:"VARIATION_EDIT_WATCH_STATUS",SUBMIT_BINBTN:"_SUBMIT_BINBTN",SUBMIT_CARTBTN:"_SUBMIT_CARTBTN",REMOVE_LISTS:"_REMOVE_LISTS",LIST_ADD_SVC_ID:"_LIST_ADD_SVC_ID",LIST_REMOVE_SVC_ID:"_LIST_REMOVE_SVC_ID",TRIGGER_REMOVE_SVC_ID:"_TRIGGER_REMOVE_SVC_ID",BEST_OFFER_SVC_ID:"_BEST_OFFER_SVC_ID",REVIEW_OFFER_SVC_ID:"_REVIEW_OFFER_SVC_ID",FORCE_CLOSE_OVERLAY:"FORCE_CLOSE_OVERLAY",BIN_SVC_ID:"_BIN_SVC_ID",AUTO_REFRESH_DISABLE_BTN_SVC:"AUTO_REFRESH_DISABLE_BTN_SVC",SAFE_CUSTOMIZATION_MESSAGE:"SAFE_CUSTOMIZATION_MESSAGE",VI_MSKU_VAR_CHANGE:"VI_MSKU_VAR_CHANGE",ENABLE_BINBTN:"ENABLE_BINBTN"},function(e){return t[e]}})),raptor.defineClass("com.ebay.raptor.vi.overlayHandler",(function(){return{init:function(){var t=this;t.pubsub=raptor.require("pubsub"),t.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler"),t.listOfOverlayIds=[],t.pubsub.subscribe("REGISTER_OVERLAY",(function(e){t.registerOverlay(e)}),t),t.pubsub.subscribe("FORCE_CLOSE_OVERLAY",(function(e){t.forceCloseOverlay(e)}),t)},registerOverlay:function(t){this.listOfOverlayIds.push(t.id)},forceCloseOverlay:function(t){for(i=0;i<this.listOfOverlayIds.length;i++)this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.listOfOverlayIds[i],hideOnly:t.hideOnly})}}})),raptor.defineClass("ui.Overlay",(function(){var t,e,i,n;return t={triggers:null,triggerMode:"click",closers:".oly_close",closeMode:"click",mask:{},modal:!1,width:"auto",height:"auto",hasCloseButton:!1,closeOnEsc:!0,position:"center",top:0,left:0,shiftness:{x:0,y:0},draggable:!1,onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,ajax:null,css3Enabled:!1,ns:"oly",pointerType:null,delay:null,content:null,openSvcId:"_OLY_OPN_SVC",closeSvcId:"_OLY_CLS_SVC",closeOnBodyClick:!1,verticalDefaultX:!1,retainFocusOnTrigger:!1,delayFocusOnEsc:!1,forceVerticalPointerDirection:"",forceRightPointerDirection:"",forceCenterPointerDirection:!1,hideOnMouseOverTrigger:!1,mouseoutTimeout:400,triggerOnReturn:!1,staticPointer:!1,largeCloseButton:!1,maxCntrWidth:0,closeOnEscByLevel:!1,ariaExpandedToggle:!1},e={mask:null,show:function(t,i,n){var s=e.mask;s||(s=$("<div class='oly_mask'><div>"),$("body").append(s),e.mask=s);var r=t.color?t.color:"#808080",a=t.alpha&&"number"===$.type(t.alpha)?t.alpha:.3;t=t.zIndex&&"number"===$.type(t.zIndex)?t.zIndex:999999;s.css({"background-color":r,"z-index":t,opacity:a,filter:"alpha(opacity="+100*a+")",display:"block"}),n&&s.css("background","none"),i.css("z-index",t+10)},hide:function(){var t=e.mask;t&&t.css("display","none")}},i={center:function(t,e){var i=$(window),n=t.outerWidth({margin:!0}),s=t.outerHeight({margin:!0}),r=Math.max((i.height()-s)/2,0),a=Math.max((i.width()-n)/2,0);e&&(r=Math.max(r,(i.height()-s)/2+i.scrollTop()),a=Math.max(a,(i.width()-n)/2+i.scrollLeft())),t.css("top",r+"px"),t.css("left",a+"px")},trigger:function(t,e,i,n){var s=e.outerHeight();e=e.offset();$(document).scrollTop(),$(document).scrollLeft(),t.css("top",s+e.top+n+"px"),t.css("left",e.left+i+"px")},component:function(t,e,i,n){var s=$("#"+e).outerHeight();e=$("#"+e).offset();$(document).scrollTop(),$(document).scrollLeft(),t.css("top",s+e.top+n+"px"),t.css("left",e.left+i+"px")},customize:function(t,e,i,n){t.css("top",e+"px"),t.css("left",i+"px"),n||t.css("position","fixed")},pointer:function(t,e,i,n,s,r,a,o,l,d){var c=t.find(".prt");c.removeClass("vert left right top bottom");var u=$(window).height(),h=$(window).width(),p=$(document).scrollTop(),m=$(document).scrollLeft(),f=e.outerHeight({margin:!0}),g=e.outerWidth({margin:!0}),v=t.outerHeight({margin:!0}),b=t.outerWidth({margin:!0});if(e=e.offset()){var I=0,y=0;e&&("vertical"==i?(c.addClass("vert"),n?0<=e.left+b-m?(I=e.left-50,c.addClass("left")):(I=e.left-b+g,c.addClass("right")):(I=e.left-b+93,c.addClass("right")),e.top-f-p>=v&&""==s||"down"==s?(y=e.top-v,c.addClass("bottom")):(y=e.top+16+f,I+=10,c.addClass("top"))):(i=e.left+g+16+b-m>=h,n=150<=Math.round(100*window.outerWidth/window.innerWidth),i||n||r?n?(I=e.left+g+16,c.addClass("left")):(I=e.left-16-b,r&&(I+=16),c.addClass("right")):(I=e.left+g+16,c.addClass("left")),e.top+f+v-40-p>=u&&!d.staticPointer?(y=e.top-v+70,c.addClass("bottom"),r&&(y-=23)):(y=e.top-40,c.addClass("top"))),I+=o,y+=l,r&&(y+=23),a&&(I+=g/4,c.css("left",b/2-35+"px")),t.css("left",I+"px"),t.css("top",y+"px"))}}},n={register:function(t,e){var i=null;e.mousedown((function(n){var s=t.position().left-$(window).scrollLeft(),r=t.position().top-$(window).scrollTop(),a=n.pageX-s,o=n.pageY-r;i=function(e){t.css("left",e.pageX-a+"px"),t.css("top",e.pageY-o+"px")},$("body").mousemove(i),e.css("cursor","move")})),$("body").mouseup((function(){$("body").unbind("mousemove",i),e.css("cursor","auto")}))}},{events:["show","hide"],init:function(e){var i,n="";e.shiftness={x:parseInt(e.shiftX)||0,y:parseInt(e.shiftY)||0},i=this.conf=$.extend(!0,{},t,e),this.pubsub=raptor.require("pubsub"),this.attachBodyClkEvt=!1,this.content=i.content?$(i.content):$("#"+e.id),this.pubsub.publish("REGISTER_OVERLAY",{id:i.id}),this.body=this.container=null,this.handlrBinded=this.inited=!1,this.olyId="vi_oly_"+i.id;var s=e="",r="",a="",o=n="",l="";i.accessible&&(i.modal&&(n="role='dialog'"),n+=" tabindex='-1'",o="tabindex='0'",i.ariaDesc&&(n=n+" aria-describedby='"+this.olyId+"_desc'",r="<div class='offscreen' id='"+this.olyId+"_desc'>"+i.ariaDesc+"</div>"),i.ariaLable&&(n=n+" aria-labelledby='"+this.olyId+"_lbl'",a="<div class='offscreen' id='"+this.olyId+"_lbl'>"+i.ariaLable+"</div>")),i.hasCloseButton&&(i.closeBtnAria?l='aria-label="'+i.closeBtnAria+'"':i.closeTitle&&(l='aria-label="'+i.closeTitle+'"'),e=i.largeCloseButton?"<div class='lclz'><button class='vi-oly-close-btn' "+o+">x</button><div class='vi-oly-close-txt'>close</div></div>":i.svgCloseBtn?"<div class='clz'><div class='vi_oly_clz_cntr'><div class='' tabindex='0' "+o+" "+l+"><svg id='icon-close' viewBox='0 0 24 24' width='12px' height='12px'> <path d='M23.205 1.79L21.415 0l-9.813 9.812L1.79 0 0 1.79l9.812 9.812L0 21.415l1.79 1.789 9.812-9.811 9.813 9.811 1.79-1.789-9.813-9.813z'></path> </svg></div></div></div>":i.closeButtonTag?"<div class='clz'><div class='vi_oly_clz_cntr'><button class='clzBtn close_button_tag' "+l+"></button></div></div>":"<div class='clz'><div class='vi_oly_clz_cntr'><button class='clzBtn' tabindex='0' "+o+" "+l+"></button></div></div>"),"pointer"==i.position&&(s="<div class='prt'></div>"),i.css3Enabled?(n="<div "+n+" class='"+i.ns+" shadow' id='"+this.olyId+"'>",i.accessible&&i.modal&&(n+="<div role='document'>"),n=n+"<div class='hdr'>"+a+r+s+e+"</div><div class='oly_container'></div>"):(n="<div "+n+" class='"+i.ns+" old' style='display: block; z-index: 10010;'id='"+this.olyId+"'>",i.accessible&&i.modal&&(n+="<div role='document'>"),n=n+a+r+s+e+"<div class='hdr'><b class='bk'></b><div class='inner'></div></div><div class='body'><div class='oly_container'></div></div><div class='clr'></div><div class='ftr bk'><b class='bk'></b><div class='inner bk'>&nbsp;</div></div>"),i.accessible&&i.modal&&(n+="</div>"),this.panel=$(n+"</div>"),this.handlrBinded||this.bindHandlr()},bindHandlr:function(){this.handlrBinded=!0,this.bindTriggerEvent(),this.bindCloserEvent(),this.bindKeyDownEvent()},bindKeyDownEvent:function(){var t=this,e=t.conf;e.accessible&&(e.retainFocusOnTrigger&&$("#"+e.trigger).on("keydown",(function(e){t.showing&&9==e.which&&!e.shiftKey&&setTimeout((function(){t.focusTabbable()}),0)})),e.disablePanelKeydownEvent||t.panel.keydown((function(i){var n=$("#"+t.olyId);if(27==i.which&&e.closeOnEscByLevel)0<$("#"+e.trigger).length&&$("#"+t.panel.attr("id")).is(":visible")&&(e.delayFocusOnEsc?setTimeout((function(){$("#"+e.trigger).focus()}),0):$("#"+e.trigger).focus()),t.hide(),i.stopPropagation();else if(9===i.which){if(!(0>=(s=$('[tabindex="0"],a,input,select,button',n).filter(":visible").not(":disabled")).length)){n=s.filter(":first");var s=s.filter(":last"),r=i.shiftKey,a=i.target;a!==s[0]||r?a===n[0]&&r&&(s.focus(),i.preventDefault()):(n.focus(),i.preventDefault())}}})))},bindTriggerEvent:function(){var t=this,e=null,i=t.conf;"string"===$.type(i.trigger)?(e=[]).push(i.trigger):$.isArray(i.trigger)&&(e=i.trigger),null!=e&&$.each(e,(function(e,n){var s=$("#"+n);"click"==i.triggerMode?$("body").on("click","#"+n,(function(){t.show($(this)),i.roverClickTrackId&&$(document).trigger("rover",{sid:i.roverClickTrackId})})):"ready"==i.triggerMode?s.ready((function(){t.show(s)})):"mouseover"==i.triggerMode&&(s.bind("focus",(function(){s.trigger("mouseover")})),s.bind("focusout",(function(){s.trigger("mouseout")})),s.mouseover((function(){if(0<i.delay){var e=$(this),n=setTimeout((function(){i.hideOnMouseOverTrigger||t.show(e)}),i.delay);s.mouseleave((function(){clearTimeout(n)}))}else i.hideOnMouseOverTrigger||t.show($(this))}))),"mouseout"==i.closeMode&&s.mouseleave((function(){var e,n;e=setTimeout((function(){clearTimeout(e),t.hide()}),i.mouseoutTimeout),t.panel.mouseleave((function(){n=setTimeout((function(){clearTimeout(n),t.hide()}),i.mouseoutTimeout)})),t.panel.mouseover((function(){clearTimeout(e),clearTimeout(n)}))})),i.triggerOnReturn&&s.on("keydown",(function(e){"13"==(e.keyCode||e.which)&&(e.preventDefault(),t.attachBodyClkEvt=!0,t.show($(this)))}))})),t.handleOverlayMessageEvents()},handleOverlayMessageEvents:function(){var t=this;t.pubsub&&(t.pubsub.subscribe("_OPEN_OLAY",(function(e){t.handleOpenOverlayMsg(e.cmpId,e.trigger)})),t.pubsub.subscribe("_CLOSE_OLAY",(function(e){t.handleCloseOverlayMsg(e)})),t.pubsub.subscribe("_BIND_OLAY",(function(e){t.handleBindOverlayMsg(e)})),t.pubsub.subscribe("_CUST_POS_OLAY",(function(e){t.updateCustomPos(e)})),t.pubsub.subscribe("_HIDE_FADE_OLAY",(function(e){t.fadeCloseOly(e)})),t.pubsub.subscribe("_REPAINT_WINDOW",(function(){t.resizeManual()})))},handleBindOverlayMsg:function(t){t.cmpId==this.conf.id&&t.trigger&&(this.conf.trigger=t.trigger,this.bindTriggerEvent(),this.bindCloserEvent())},handleCloseOverlayMsg:function(t){t.cmpId==this.conf.id&&(t.hideOnly?this.panel.css("display","none"):this.hide())},handleOpenOverlayMsg:function(t,e){t==this.conf.id&&(e?this.show($("#"+e)):this.show())},updateCustomPos:function(t){var e=this.conf;t.cmpId==e.id&&(t.top&&(e.top=t.top),t.left&&(e.left=t.left))},fadeCloseOly:function(t){var e=this;t.cmpId==e.conf.id&&e.showing&&e.panel.stop(!0,!0).fadeOut((function(){e.hide()}))},bindCloserEvent:function(){var t=null,e=this,i=e.conf;"string"===$.type(i.closers)?(t=[]).push(i.closers):$.isArray(i.closers)&&(t=i.closers),null!=t&&$.each(t,(function(t,n){"click"==i.closeMode&&$(n).click(e.hide)})),i.closeOnEsc&&$(document).bind("keydown",(function(t){27==t.keyCode&&(0<$("#"+i.trigger).length&&$("#"+e.panel.attr("id")).is(":visible")&&$("#"+i.trigger).focus(),e.inited&&e.hide(),t.preventDefault())})),i.accessible&&e.panel.find(".clz").keydown((function(t){if(13==t.keyCode){e.hide();var n=$("#"+i.trigger);0<n.length&&n.focus(),t.preventDefault()}})).on("click",(function(t){var e=$("#"+i.trigger);0<e.length&&e.focus(),t.preventDefault()}))},resizeManual:function(){$(window).trigger("resize")},resetOnResize:function(t){this.showing&&this.show(t)},show:function(t){var s,r,a=this,o=a.conf;(a.inited||($("body").append(a.panel),a.container=a.panel.find(".oly_container"),a.body=a.panel.find(".body"),null!=a.content&&a.container.append(a.content),o.largeCloseButton?a.panel.find(".lclz").click((function(){a.hide()})):a.panel.find(".clz").click((function(){a.hide()})),$(window).resize((function(){a.resetOnResize($("#"+o.trigger))})),a.inited=!0),a.panel.css("display","block"),t&&t.attr("aria-expanded","true"),null!=a.content)&&(a.content.css("display","block"),"auto"==o.height&&a.content.outerHeight(!0),s="auto"==o.width?a.content.outerWidth(!0):o.width,(r=parseInt(o.maxCntrWidth))&&(s=s>r?r:s),a.body.css({height:"auto",width:s+"px"}),a.container.css({height:"auto",width:"auto"}));o.modal&&(o.darkerMask&&o.mask&&(o.mask.color="#000000",o.mask.alpha=.6),e.show(o.mask,a.panel,o.trBgMask)),"trigger"==o.position?(shiftx=parseInt(o.shiftness.x),shifty=parseInt(o.shiftness.y),i.trigger(a.panel,t,shiftx,shifty)):"component"==o.position?(shiftx=parseInt(o.shiftness.x),shifty=parseInt(o.shiftness.y),i.component(a.panel,o.component,shiftx,shifty)):"customize"==o.position?i.customize(a.panel,o.top,o.left,o.noFixedPos):"pointer"==o.position?(shiftx=parseInt(o.shiftness.x),shifty=parseInt(o.shiftness.y),i.pointer(a.panel,t,o.pointerType,o.verticalDefaultX,o.forceVerticalPointerDirection,o.forceRightPointerDirection,o.forceCenterPointerDirection,shiftx,shifty,o)):i.center(a.panel,o.noFixedPos),o.draggable&&n.register(a.panel,a.panel.find(".hdr")),a.showing=!0,a.notify("show",{source:a}),a.pubsub.channel(o.id).publish(o.openSvcId,{ovlyCntr:a.panel}),o.closeOnBodyClick&&($("html").bind("click.viOlyBodyClk"+o.id+" touchstart.viOlyBodyClk"+o.id,(function(){a.attachBodyClkEvt?a.hide():a.showing&&(a.attachBodyClkEvt=!0)})),$("#"+o.id).bind("click.viOlyBodyClk"+o.id+" touchstart.viOlyBodyClk"+o.id,(function(t){t.stopPropagation()}))),o.accessible&&o.enableAutoFocus&&a.focusTabbable(),o.accessible&&o.modal&&$("body").children(":not(#"+a.olyId+",script,style)").attr("aria-hidden","true"),o.ariaExpandedToggle&&0<o.trigger.length&&a.ariaExpandedTrue("#"+o.trigger)},focusTabbable:function(){var t=$("#"+this.olyId);if(t&&0<t.length){var e=t.find("[autofocus]");e.length||(e=$('[tabindex="0"],a,input,select,button',t).filter(":visible")),e.length||(e=t),e[0].focus()}},hide:function(){var t=this.conf;this.panel.css({display:"none"}),t&&t.trigger&&0<t.trigger.length&&$("#"+t.trigger).attr("aria-expanded","false"),$.browser.msie&&$("#"+this.panel.attr("id")).hide(),this.showing=!1,t.closeOnBodyClick&&(this.attachBodyClkEvt=!1,$("html").unbind("click.viOlyBodyClk"+t.id+" touchstart.viOlyBodyClk"+t.id),$("#"+t.id).unbind("click.viOlyBodyClk"+t.id+" touchstart.viOlyBodyClk"+t.id)),this.conf.modal&&e.hide(),this.notify("hide",{source:this}),this.pubsub.channel(t.id).publish(t.closeSvcId),t.accessible&&t.modal&&$("body").children(":not(#"+this.olyId+",script,style)").removeAttr("aria-hidden"),t.ariaExpandedToggle&&0<t.trigger.length&&this.ariaExpandedFalse("#"+t.trigger),"byrfdbk_modal"===t.id&&setTimeout((function(){var e=document.getElementById(t.trigger);e&&e.firstChild&&e.firstChild.focus()}),150)},ariaExpandedTrue:function(t){(t=document.querySelector(t))&&"false"===t.getAttribute("aria-expanded")&&t.setAttribute("aria-expanded",!0)},ariaExpandedFalse:function(t){(t=document.querySelector(t))&&"true"===t.getAttribute("aria-expanded")&&t.setAttribute("aria-expanded",!1)}}})),raptor.defineClass("com.ebay.raptor.vi.StatusMsg",(function(){return{init:function(t){this.cfg=t,this.commonClz=t.smClz+" "+t.sizeClz},error:function(){this.cfg.isRefresh?this.addClass("vi-VR-msgMrg20-5 sm-co sm-er","gspr icmer"):this.addClass(this.commonClz+" smo-e","sm-me ebg")},notice:function(){this.cfg.isRefresh?this.addClass("vi-VR-msgMrg20-5 sm-co sm-al","gspr icmal"):this.addClass(this.commonClz+" smo-i","sm-mi ibg")},warning:function(){this.cfg.isRefresh?this.addClass("vi-VR-msgMrg20-5 sm-co sm-er","gspr icmer"):this.addClass(this.commonClz+" smo-w","sm-mw wbg")},confirm:function(){this.cfg.isRefresh?this.addClass("vi-VR-msgMrg20-5 sm-co sm-su","gspr icmsu"):this.addClass(this.commonClz+" smo-c","sm-mc cbg")},rmvClass:function(){var t=this.cfg;t.isRefresh?($("#"+t.outer+"_container").removeClass(),$("#"+t.outer+"_icon").removeClass()):($("#"+t.outer).removeClass(),$("#"+t.message).removeClass())},addClass:function(t,e){var i=this.cfg;this.rmvClass(),i.isRefresh?($("#"+i.outer+"_container").addClass(t),$("#"+i.outer+"_icon").addClass(e)):($("#"+i.outer).addClass(t),$("#"+i.message).addClass(e))}}})),raptor.defineClass("com.ebay.raptor.vi.vehiclehistoryreport.VehicleHistoryReport",(function(){return{init:function(t){this.cfg=t,this.pubsub=raptor.require("pubsub"),this.bindClick(),this.isIframeLoaded=!1,0==this.cfg.isVhrEnabled&&$("#vhr-unavailable").show(),2==this.cfg.isVhrEnabled&&this.bindMessageEvents()},bindMessageEvents:function(){var t=document.getElementById("autocheckVhr"),e=function(e){"vhr_resize"==e.data.name&&void 0!==e.data.height?($("#vhr-spinner").hide(),t.height=e.data.height+"px"):"vhr_scroll"==e.data.name&&void 0!==e.data.pos&&(e=e.data.pos,null!=t.offsetParent&&(e+=t.offsetParent.offsetTop),window.scrollTo(0,e))};void 0!==t&&(window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&(window.attachEvent("onvhr_resize",e),window.attachEvent("onvhr_scroll",e)))},bindClick:function(){var t=this,e=t.cfg;""!=e.reportUrl&&(t.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),$("#viTabs_1").click((function(){if(0==$("#vhr_ac_rpt #subcontent").length)if(1==t.cfg.isVhrEnabled)$("#throbber_vhr").show(),url=e.reportUrl,t.makeCall(url,t.display,t);else if(2==t.cfg.isVhrEnabled){var i=document.getElementById("autocheckVhr");null!==i&&!t.isIframeLoaded&&($("#vhr-spinner").show(),i.src=t.cfg.motorsWebURL,t.isIframeLoaded=!0)}})))},makeCall:function(t,e){this.ajaxUtil.getJSON(t,e,this)},display:function(t){t&&("false"===t.IsError?(t=t.SubContent,$("#throbber_vhr").hide(),$("#vhr_ac_rpt > div").css({visibility:"visible"}),t&&(t=t.replace('action="http:','action="https:')),$("#vhr_ac_rpt").append(t)):(t=t.SubContent,$("#throbber_vhr").hide(),$("#vhr_ac_rpt").html(t))),$("#throbber_vhr").hide()}}})),raptor.defineClass("com.ebay.raptor.vi.VIButton",(function(){return{init:function(t){var e=this;e.cfg=t,e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("_VI_BTN_MSGS",(function(i){i.id==t.btnId&&e.enableDisableBtn(i)}),e),$("#"+t.btnId).mousedown((function(){$("#"+t.btnId).hasClass("d")||$("#"+t.btnId).addClass(t.mouseDownClass)})),$("#"+t.btnId).bind("mouseup mouseout",(function(){$("#"+t.btnId).hasClass("d")||$("#"+t.btnId).removeClass(t.mouseDownClass)}))},enableDisableBtn:function(t){var e=this.cfg;t.isDisable?(e.isCSS3||$("#"+e.btnId+"_parent").addClass("d"),$("#"+e.btnId).addClass("d").attr("disabled","disabled")):t.isEnable&&(e.isCSS3||$("#"+e.btnId+"_parent").removeClass("d"),$("#"+e.btnId).removeClass("d").removeAttr("disabled"))},disable:function(){var t=this.cfg;t&&$("#"+t.btnId).addClass("d").attr("disabled","disabled")},enable:function(){var t=this.cfg;t&&$("#"+t.btnId).removeClass("d").removeAttr("disabled")}}})),raptor.defineClass("raptor.vi.GeekSquadWidget",(function(){return{init:function(t){var e=this;e.cfg=t,e.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),e.pubsub=raptor.require("pubsub"),e.reqCt="",e.signin=0,e.wrtyCt=0,e.chkdVals=[],e.pubsub.subscribe("SHOW_ADDON_LABEL",(function(t){e.showAddOnLabel(t)}),this),$("#"+t.cnclLnk).click((function(){e.cancel()})),e.pubsub.channel(t.atcOlyId).subscribe("_OLY_CLS_SVC",(function(){e.onClose()}),e),t.atcOnLoad&&(e.signin=1,$(document).ready((function(){e.handleCart()}))),t.binOnLoad&&(e.signin=1,$(document).ready((function(){e.handleBin()}))),e.addEventListener(t,null),window.getCallBack=function(i){0<i.length?(e.resp=i,e.makeSelect(t,i),e.fillBinOly(i),e.addEventListener(t,i),e.chkdVals=e.getChkdVal(e.resp)):(e.chkdVals=e.getChkdVal(e.resp),e.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!1})),t.cartConfig&&t.cartConfig.hasWrtyIntercept&&(t.cartConfig.hasWrtyIntercept=!1,e.pubsub.publish("_SUBMIT_CARTBTN",t.cartConfig))},$(document).ready((function(){$("<link/>",{rel:"stylesheet",type:"text/css",href:t.aggrCSSURL}).appendTo("head");var i="";void 0!==t.warrantyTerms&&null!==t.warrantyTerms&&""!==t.warrantyTerms&&(i=JSON.parse(t.warrantyTerms));var n=function(){$("#svcGk").services({itemToFetchServicesFor:t.itemId,siteId:t.siteId,categoryId:t.catId,disabled:!1,onSelectionChange:"getCallBack",saleType:t.saleType,serviceURL:t.serviceURL,fetchedServiceItems:i})};e.ajaxUtil.loadScripts(!0,t.widgetJSURL,(function(){e.ajaxUtil.loadScripts(!0,t.aggrJSURL,n)}))}))},showAddOnLabel:function(){$("#addOnlbl")&&0<$("#addOnlbl").length&&$("#addOnlbl").css("display","inline-block")},fillBinOly:function(t){var e,i="";for(e in t)t.hasOwnProperty(e)&&(i+='<div class="ew-bin-cnt"> - '+t[e].warrantyProvider+" "+t[e].warrantyDescription+"</div>");$("#"+this.cfg.wtryCntDiv).html(i)},addEventListener:function(t,e){var i=this;i.pubsub.subscribe("_WARRANTY",(function(t){i.handleMsg(t,e)}),this)},makeSelect:function(t,e){if($("#"+t.addPrId),$("#"+t.addDivId),$("#"+t.addTxtId),e)for(var i=0;i<e.length;i++)e[i].warrantyItemId?this.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!0}):this.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!1})},handleMsg:function(t){this.msg=t,this.cfg.cartConfig=t.cartConfig,void 0===t.btnId?this.handleCart():this.handleBin()},handleBin:function(){var t,e,i=this.cfg;if(0!=(t=this.chkdVals).length||i.warrantyId){if($("#"+i.binTrbrId).show(),$("#"+i.binCntId).hide(),void 0!==i.blrUrl)return t=0!=t.length?t:i.warrantyId,t=i.blrUrl+"%26wid="+t,void 0!==this.msg?e=""!==this.msg.vQty?this.msg.vQty:"":""!==i.quantity&&(e=i.quantity),""!==e&&void 0!==e&&(t=t+"%26quantity="+e+"%26qty="+e),top.location=t,!1;i.wrtyUrl&&((0!=t.length||i.warrantyId)&&""!==i.mapPCOlyId&&this.pubsub.publish("_CLOSE_OLAY",{cmpId:i.mapPCOlyId}),(!i.addOnRedesignEnabled||i.addOnRedesignEnabled&&void 0!==this.signin&&1===this.signin)&&this.pubsub.publish("_OPEN_OLAY",{cmpId:i.binOlyId}),this.buildUrl(!0))}},handleCart:function(){var t,e,i=this.cfg;if(t=this.chkdVals,i.cartConfig&&i.cartConfig.hasWrtyIntercept&&0==t.length||null===t&&!i.warrantyId)this.pubsub.publish("SHOW_WARRANTY_ATC_INTERCEPT",{});else{if(void 0!==i.clrUrl)return t=null!==t?t:i.warrantyId,t=i.clrUrl+"%26wid="+t,void 0!==this.msg?e=""!==this.msg.vQty?this.msg.vQty:"":""!==i.quantity&&(e=i.quantity),""!==e&&void 0!==e&&(t=t+"%26quantity="+e+"%26qty="+e),top.location=t,!1;""!==i.mapPCOlyId&&this.pubsub.publish("_CLOSE_OLAY",{cmpId:i.mapPCOlyId}),(!i.addOnRedesignEnabled||i.addOnRedesignEnabled&&void 0!==this.signin&&1===this.signin)&&this.pubsub.publish("_OPEN_OLAY",{cmpId:i.atcOlyId}),this.buildUrl(!1)}},getChkdVal:function(t){var e=[];if(null!=t)for(var i=0;i<t.length;i++)e.push(t[i].warrantyItemId);return e},buildUrl:function(t){var e,i,n,s=this.cfg,r=s.wrtyUrl,a=0;void 0!==this.msg?i=""!==this.msg.vQty?this.msg.vQty:"":""!==s.quantity&&(i=s.quantity),""!==i&&void 0!==i&&(r=r+"&quantity="+i+"&qty="+i);var o=this.chkdVals,l=this.wrtyCt;if(n=void 0!==s.warrantyId?s.warrantyId.split(",").length:o.length,""!==this.reqCt){if(r+="&item="+s.itemId,!t)return top.location=r.replace("/sc/atc?","/sc/add?"),!1;r+="&restype=json",r+="&rand="+Date.now(),!s.cartConfig||s.cartConfig&&!s.cartConfig.isBulkCart?s.addOnRedesignEnabled||this.makeRequest(r,t):a=s.itemId}else l<n&&(null!==o[l]&&void 0!==o[l]?e=o[l]:void 0!==s.warrantyId&&(e=1<=s.warrantyId.split(",").length?s.warrantyId.split(",")[l]:s.warrantyId),r+="&item="+e,r+="&restype=json",r+="&rand="+Date.now(),!s.cartConfig||s.cartConfig&&!s.cartConfig.isBulkCart?s.addOnRedesignEnabled||this.makeRequest(r,t):a=e,this.wrtyCt++);if(t&&s.addOnRedesignEnabled&&(void 0!==(a=s.itemId)&&0!=a&&void 0!==e&&0!=e))return""!==i&&void 0!==i||(i=1),s.wrtyBulkAddToCartUrl=s.wrtyBulkAddToCartUrl+"&item=iid:"+a+",qty:"+i+"&item=iid:"+e+",qty:"+i,this.wrtyCt>=n&&(top.location=s.wrtyBulkAddToCartUrl),!1;s.cartConfig&&s.cartConfig.isBulkCart&&0!=a&&(""!==i&&void 0!==i||(i=1),s.cartConfig.bulkCartItemIdAppended&&a==s.itemId||(s.cartConfig.submitURL=s.cartConfig.submitURL+"&item=iid:"+a+",qty:"+i),s.cartConfig&&s.cartConfig.hasWrtyIntercept&&(s.cartConfig.hasWrtyIntercept=!1),s.cartConfig.wrtyflow=!0,this.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!1}),this.pubsub.publish("_SUBMIT_CARTBTN",s.cartConfig))},makeRequest:function(t,e){this.bBin=e;var i=0<t.indexOf("/sc/atc?")?"callback":null;this.ajaxUtil.getJSON(t,this.handleResponse,this,null,i)},handleResponse:function(t){var e=this.cfg;t&&(t.status&&"SUCCESS"==t.status?""===this.reqCt?(t=void 0!==e.warrantyId?e.warrantyId.split(",").length:this.chkdVals.length,this.wrtyCt>=t&&(this.reqCt=1),this.buildUrl(this.bBin)):e.removeWarrantyBinLayer?top.location=e.crtUrl:this.bBin?($("#"+e.binTrbrId).hide(),$("#"+e.binCntId).show()):(this.pubsub.publish("_CLOSE_OLAY",{cmpId:e.atcOlyId}),top.location=e.crtUrl):this.pubsub.publish("_CLOSE_OLAY",{cmpId:e.binOlyId}))},cancel:function(){var t=this.cfg;raptor.require("raptor.vi.ActionPanel"),this.pubsub.publish("_CLOSE_OLAY",{cmpId:t.binOlyId}),this.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!1}),$("#"+t.binBtnId).trigger("click")},onClose:function(){var t=(t=window.location.href).replace(/[?\&]w[b|c]olp=1/,"");top.location=t}}})),raptor.defineClass("raptor.vi.Warranty",(function(){return{init:function(t){this.pubsub=raptor.require("pubsub"),this.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil"),this.cnts=this.getArr(t.contIds),this.lbls=this.getArr(t.lblIds),this.desc=this.getArr(t.descIds),this.reqCt=this.curWrty="",this.addEventListener(t)},addEventListener:function(t){var e=this;e.cfg=t,$("#"+t.lmDivId).click((function(){e.toggleList(t)})),$("#"+t.hdDivId).click((function(){e.toggleList(t)}));for(var i=0;i<=e.lbls.length;i++)$("#"+e.lbls[i]).click((function(){e.resetChkBox(this,t)}));$("#"+t.cfmBtnId).click((function(){e.makeSelect(t)})),$("#"+t.cnclLnk).click((function(){e.cancel()})),e.pubsub.subscribe("_WARRANTY",(function(t){e.handleMsg(t)}),this),e.pubsub.channel(t.binOlyId).subscribe("_OLY_CLS_SVC",(function(){e.onClose()}),e),e.pubsub.channel(t.atcOlyId).subscribe("_OLY_CLS_SVC",(function(){e.onClose()}),e),t.atcOnLoad&&$(document).ready((function(){e.handleCart()})),t.binOnLoad&&$(document).ready((function(){e.handleBin()}))},handleMsg:function(t){this.msg=t,void 0===t.btnId?this.handleCart():this.handleBin()},getArr:function(t){for(var e=[],i=0;i<t.split(",").length;i++)e[i]=t.split(",")[i];return e},toggleList:function(t){$("#"+t.lmDivId).toggle(),$("#"+t.hdDivId).toggle(),$("#"+t.lstDivId).toggle(),$("#"+t.dtlsDivId).toggle()},resetList:function(t){$("#"+t.lmDivId).show(),$("#"+t.hdDivId).hide(),$("#"+t.lstDivId).hide(),$("#"+t.dtlsDivId).hide()},resetChkBox:function(t,e){for(var i in"t"==$(t).attr("chk")?($(t).attr("chk","f"),$(t).addClass(e.lblCls),$(t).removeClass(e.lblChkCls),$(t).next().css("font-weight","normal")):($(t).attr("chk","t"),$(t).removeClass(e.lblCls),$(t).addClass(e.lblChkCls),$(t).next().css("font-weight","bold")),this.lbls)if(this.lbls.hasOwnProperty(i)&&t.id!=this.lbls[i]){var n=$("#"+this.lbls[i]);"t"==n.attr("chk")&&(n.attr("chk","f"),n.addClass(e.lblCls),n.removeClass(e.lblChkCls),n.next().css("font-weight","normal"))}},makeSelect:function(t){var e=$("#"+t.addPrId),i=$("#"+t.addDivId),n=$("#"+t.addTxtId);for(var s in this.pubsub.publish("_CLOSE_OLAY",{cmpId:t.addOlyId}),this.lbls)if(this.lbls.hasOwnProperty(s)){var r=$("#"+this.lbls[s]);if("t"==r.attr("chk")){e.html(r.siblings(t.prcCls).html()),e.addClass(t.addCls),n.html(r.next().html()),i.show(),this.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!0});break}e.html(t.addFrPrxTxt),e.removeClass(t.addCls),this.pubsub.publish("_WARRANTY_SELECTED",{isWrty:!1}),i.hide()}this.resetList(t)},saveState:function(t){this.curWrty=""!==t?t:""},getChkdVal:function(){var t;for(t=0;t<this.lbls.length;t++){var e=$("#"+this.lbls[t]);if("t"==e.attr("chk"))return e.attr("v")}return null},handleBin:function(){var t,e=this.cfg;if(null!==(t=this.getChkdVal())||e.warrantyId){if($("#"+e.binTrbrId).show(),$("#"+e.binCntId).hide(),void 0!==e.blrUrl)return t=e.blrUrl+"%26wid="+t,void 0!==this.msg?vQty=""!==this.msg.vQty?this.msg.vQty:"":""!==e.quantity&&(vQty=e.quantity),""!==vQty&&(t+="%26quantity="+vQty,t+="%26qty="+vQty),window.location.replace(t),!1;e.wrtyUrl&&(this.pubsub.publish("_OPEN_OLAY",{cmpId:e.binOlyId}),this.buildUrl(!0))}},handleCart:function(){var t,e=this.cfg;if(null!==(t=this.getChkdVal())||e.warrantyId){if(void 0!==e.clrUrl)return t=e.clrUrl+"%26wid="+t,void 0!==this.msg?vQty=""!==this.msg.vQty?this.msg.vQty:"":""!==e.quantity&&(vQty=e.quantity),""!==vQty&&(t+="%26quantity="+vQty,t+="%26qty="+vQty),window.location.replace(t),!1;this.pubsub.publish("_OPEN_OLAY",{cmpId:e.atcOlyId}),this.buildUrl(!1)}},buildUrl:function(t){var e,i=this.cfg,n=i.wrtyUrl;if(void 0!==this.msg?e=""!==this.msg.vQty?this.msg.vQty:"":""!==i.quantity&&(e=i.quantity),""!==e&&(n=n+"&quantity="+e+"&qty="+e),e=this.getChkdVal(),""!==this.reqCt){if(n+="&item="+i.itemId,!t)return top.location=n.replace("/sc/atc?","/sc/add?"),!1}else n+="&item="+(i=null!==e?e:i.warrantyId);n+="&restype=json",n+="&rand="+Date.now(),this.makeRequest(n,t)},makeRequest:function(t,e){this.bBin=e;var i=0<t.indexOf("/sc/atc?")?"callback":null;this.ajaxUtil.getJSON(t,this.handleResponse,this,null,i)},handleResponse:function(t){var e=this.cfg;t&&(t.status&&"SUCCESS"==t.status?""===this.reqCt?(this.reqCt=1,this.buildUrl(this.bBin)):this.bBin?($("#"+e.binTrbrId).hide(),$("#"+e.binCntId).show()):(this.pubsub.publish("_CLOSE_OLAY",{cmpId:e.atcOlyId}),top.location=e.crtUrl):this.pubsub.publish("_CLOSE_OLAY",{cmpId:e.binOlyId}))},cancel:function(){this.pubsub.publish("_CLOSE_OLAY",{cmpId:this.cfg.binOlyId})},onClose:function(){var t=(t=window.location.href).replace(/[?\&]w[b|c]olp=1/,"");top.location=t}}})),raptor.defineClass("ebay.viewItem.enlargeLayerv2",(function(){return{init:function(t){this.conf=t,this.pubsub=raptor.require("pubsub"),this.regLyrPubsub()},regLyrPubsub:function(){var t=this,e=t.conf;t.pubsub.subscribe("_TRIGGER_ENLARGE",(function(e){"true"==t.conf.suppressRebinding?t.bound||(t.trgEnLyr(e),t.bound=!0):t.trgEnLyr(e)}),t),t.pubsub.subscribe(e.id+"_SHOW_ENLARGE_IMG",(function(e){var i=parseInt($("#icImg").attr("clk"));t.currImgId=e&&e.id||i,(!t.isTouchEvent||!e.isTouchEvent)&&(t.isZoom||e&&e.img&&e.img.videoMedia)&&t.showEnLyr()}),t),t.pubsub.subscribe("_SHOW_ENLARGE_IMG_FOR_BTF_CMP",(function(e){e.setDefaultImgId&&(t.currImgId=0),t.showEnLyr()}),t),t.pubsub.subscribe(e.id+"_VI_P_LAYER_CLOSED",(function(i){i.id==e.id&&t.pubsub.publish("_IMG_CAROUSEL_CLS",{id:e.id})}),t),t.pubsub.subscribe("_SHOW_ENLARGE_IMG_VERT_IMG_STRIP",(function(i){var n=e.id;i&&i.targetId&&i.targetId==n&&(void 0===t.currImgId&&(t.currImgId=0),i.setDefaultImgId&&(t.currImgId=0),t.isTouchEvent||t.showEnLyr())}))},trgEnLyr:function(t){this.currImgId=t.id,this.isZoom=t.img.zoomEnabled,this.isTouchEvent=t.isTouch,this.unbindEvts(),this.bindEvts()},bindEvts:function(){var t=this,e=t.conf;t.isTouchEvent?$("#"+e.mainImgHldrId).bind("click",(function(e){t.currImgId=parseInt($("#icImg").attr("clk")),t.isHandleFSClk=!1,e.stopPropagation(),t.showEnLyr()})):t.isZoom||$("#"+e.mainImgHldrId).bind("click",(function(){t.currImgId=parseInt($("#icImg").attr("clk")),t.isHandleFSClk=!1,t.showEnLyr()}))},unbindEvts:function(){var t=this.conf;$("#"+t.mainImgHldrId).unbind("touchstart"),$("#"+t.mainImgHldrId).unbind("click")},showEnLyr:function(){var t=this.conf;this.pubsub.publish(t.id+"_OPEN_VI_P_LAYER",{id:t.id}),this.pubsub.publish("_IMG_CAROUSEL_OPN",{id:t.id,imgid:this.currImgId})}}})),raptor.defineModule("com.ebay.raptor.vi.utils",(function(){return{scrollPageToTop:function(t){if(t&&0!=t)return $("html, body").animate({scrollTop:0},300),!1},getDomText:function(t){return document.querySelector(t)&&document.querySelector(t).textContent}}})),raptor.defineClass("com.ebay.raptor.vi.pagelayer",(function(){var t,e;return{init:function(i){this.conf=i,t=i.cmpId+"_CLOSE_VI_P_LAYER",e=i.cmpId+"_OPEN_VI_P_LAYER",this.suffix={CLOSE_LAYER:"_CLOSE_VI_P_LAYER",OPEN_LAYER:"_OPEN_VI_P_LAYER",LAYER_CLOSED:"_VI_P_LAYER_CLOSED"},this.showing=this.inited=!1,this.pubsub=raptor.require("pubsub"),this.bindLayerEvents()},bindLayerEvents:function(){var i=this;i.pubsub&&(i.pubsub.subscribe(e,(function(t){t.id==i.conf.cmpId&&i.openLayer()})),i.pubsub.subscribe(t,(function(t){t.id==i.conf.cmpId&&i.closeLayer()}))),$(document).bind("keydown",(function(t){27==t.keyCode&&i.closeLayer()})),$(".vi_pl_panel .vi_pl_cls_btn").bind("click",(function(){i.closeLayer()})),i.conf.isBckBtnSupport&&"function"==typeof window.history.pushState&&(window.onpopstate=function(){i.closeLayer(!0)}),this.onKeyboardEvents=this.onKeyboardEvents.bind(this)},openLayer:function(){!0===this.showing&&$("#"+this.conf.cmpId).is(":visible")||(this.showing=!0,this.conf.isHideScroll&&(this.bodyMinH=$("body").css("min-height"),$("html").css("overflow-x","hidden"),$("html").css("overflow-y","hidden")),this.inited||$("body").append($("#"+this.conf.cmpId)),this.conf.isFade?$("#"+this.conf.cmpId).fadeIn("slow",(function(){$(".vi_pl_panel .vi_pl_cls_btn").focus()})):($("#"+this.conf.cmpId).show(),$(".vi_pl_panel .vi_pl_cls_btn").focus()),$("body").children(":not(#"+this.conf.cmpId+",script,style)").attr("aria-hidden","true"),this.conf.isBckBtnSupport&&"function"==typeof window.history.pushState&&window.history.pushState({},null,window.location.href),$(document).bind("keydown",this.onKeyboardEvents))},closeLayer:function(t){function e(){$("button.gh-hide-if-nocss").removeAttr("tabindex"),$(document).unbind("keydown",i.onKeyboardEvents)}var i=this;i.showing&&(i.showing=!1,i.conf.isHideScroll&&($("html").css("overflow-x",""),$("html").css("overflow-y","")),i.conf.isFade?$("#"+i.conf.cmpId).fadeOut(150,e):($("#"+i.conf.cmpId).hide(),e()),i.conf.returnFocusId?$("#"+i.conf.cmpId).parent().find(i.conf.returnFocusId).focus():$("#mainImgHldr").parent().focus(),i.pubsub.publish(i.conf.cmpId+i.suffix.LAYER_CLOSED,{id:i.conf.cmpId}),$("body").children(":not(#"+i.conf.cmpId+",script,style)").removeAttr("aria-hidden"),!t&&i.conf.isBckBtnSupport&&"function"==typeof window.history.pushState&&window.history.go(-1))},onKeyboardEvents:function(t){9==t.keyCode&&$("button.gh-hide-if-nocss").attr({"aria-hidden":"true",tabindex:"-1"})}}})),raptor.defineClass("ebay.viewItem.imageCarousel",(function(){return{init:function(t){var e=this;e.conf=t,e.touchGestures="touch dragleft dragright drag transform dragend swipeleft swiperight",e.imgArray=t.imgArr,null!=e.imgArray&&(1<e.imgArray.length&&(e.hasNavArr=!0),e.enlargeImageCnt=$("#"+t.imgCntId),e.enlargeImageCntWrapper=e.enlargeImageCnt.parent("button"),e.pubsub=raptor.require("pubsub"),e.regPubsub(),e.conf.isVideoPresent&&$(window).load((function(){setTimeout((function(){document.addEventListener("shaka-ui-load-failed",e.loadPlayerFailed),e.loadPlayer()}),50)})))},regPubsub:function(){var t=this,e=t.conf;t.pubsub.subscribe("_IMG_CAROUSEL_OPN",(function(i){i.id==e.layerId&&(t.isHandleFSClk=!1,t.currImgId=t.initImgId=i.imgid,t.dialogOpen=!0,t.imgArray&&t.imgArray[t.currImgId]&&t.imgArray[t.currImgId].videoMedia&&setTimeout((function(){trackingUtil("VIDEO_IMG_CLICK")}),500),t.showCmp())}),t),t.pubsub.subscribe("_IMG_CAROUSEL_CLS",(function(e){t.dialogOpen=!1;for(var i=document.querySelectorAll("#viEnlargeImgLayer video"),n=0;n<i.length;n++){var s=i[n].getAttribute("data-idx");t.stopNonImageItem(s)}e.id==t.conf.layerId&&t.onCmpCls()}),t),e.isFS&&t.pubsub.subscribe("_VI_FS_CLK_EVT_"+e.fsId,(function(e){t.isHandleFSClk?(t.stopNonImageItem(t.currImgId),t.currImgId=t.prevImgId=e.currentImgIndex,t.changeImg(!1),t.onSlideChange()):t.isHandleFSClk=!0}),t)},bindCmpEvts:function(){var t=this,e=t.conf;setTimeout((function(){t.bindWinEvt(!0)}),0),e.isFS&&!e.isEnableTouch&&$(".vi_img_crsl_fspl").removeAttr("style"),t.hasNavArr&&!t.isBodyBound&&($("body").bind("keydown."+e.layerId,(function(i){-1<[32,37,38,39,40].indexOf(i.keyCode)&&i.preventDefault(),37==i.keyCode?document.activeElement&&/shaka/.test(document.activeElement.className)?document.activeElement.classList.contains("shaka-volume-bar")&&(i=document.querySelector("#video-carousel-"+t.currImgId))&&(i.volume=Math.max(0,Math.min(i.volume-.1,1))):$("#"+e.layerId+" .vi_img_crsl_imgpl .pntrArrPrev").click():39==i.keyCode&&(document.activeElement&&/shaka/.test(document.activeElement.className)?document.activeElement.classList.contains("shaka-volume-bar")&&(i=document.querySelector("#video-carousel-"+t.currImgId))&&(i.volume=Math.max(0,Math.min(i.volume+.1,1))):$("#"+e.layerId+" .vi_img_crsl_imgpl .pntrArrNext").click())})),t.isBodyBound=!0),e.isEnableTouch&&"ontouchstart"in document.documentElement&&!t.bindedTouch&&t.bindTouchEvts(),document.querySelector(".vi_img_crsl_fspl_trg")&&t.tabKeyHandleImgFocus()},unbindCmpEvts:function(){var t=this.conf;this.bindWinEvt(!1),t.isFS&&!t.isEnableTouch&&($("#"+t.layerId+" .vi_img_crsl_fspl_trg").unbind("mouseenter"),$("#"+t.layerId+" .vi_img_crsl_fspl_trg").bind("mouseleave")),this.hasNavArr&&$("body").unbind("keydown."+t.layerId),this.isBodyBound=!1},bindWinEvt:function(t){var e=this;t?$(window).bind("resize.ebayvipgevt",(function(){e.setImgSize()})):$(window).unbind("resize.ebayvipgevt")},toggleFs:function(t){var e=this.conf,i=t?0:108;t=t?0:.95;void 0!==this.fsSlideTimer&&clearTimeout(this.fsSlideTimer),$("#"+e.layerId+" .vi_img_crsl_fspl").stop(),$("#"+e.layerId+" .vi_img_crsl_fspl").animate({height:i+"px",opacity:t},{duration:350})},showCmp:function(){var t=this.conf;if(this.bindCmpEvts(),trackingUtil(t.opnTrk),this.initiated)i=this.getFsCfg(),this.pubsub.publish("_SETUP_VI_FS_"+i.fsId,i),t.isVideoPresent&&0<$(".vi_img_crsl_fspl_trg").find(".mediaTabs").length&&$(".vi_img_crsl_fspl_trg").find(".mediaTabs").addClass("hide");else{if(t.isFS){var e=raptor.require("ebay.viewItem.utils.filmstrip"),i=this.getFsCfg();this.filmstrip=new e(i),t.isVideoPresent&&0<$(".vi_img_crsl_fspl_trg").find(".mediaTabs").length&&$(".vi_img_crsl_fspl_trg").find(".mediaTabs").addClass("hide")}this.initiated=!0}t.isEnableTouch&&($("#"+t.layerId+" .vi_img_crsl_cmp").css("margin-top","-52px"),$("#"+t.layerId+" .vi_img_crsl_imgpl .pntrArr").css("margin-top","-52px")),this.changeImg(!0)},getFsCfg:function(){var t=this.conf,e=parseInt($("#Body").css("min-width")),i=$(window).width();return i<e&&(e=500>i?500:i),t.cellNumber=parseInt((e-40)/t.cellWidth),t.cellNumber=t.cellNumber>this.imgArray.length?this.imgArray.length:t.cellNumber,(e={}).sliderId=t.sliderId,e.fsId=t.fsId,e.cellNumber=t.cellNumber,e.cellWidth=t.cellWidth,e.cellHeight=t.cellHeight,e.fsARRTrk=t.fsARRTrk,e.fsTHBTrk=t.fsTHBTrk,e.filmstripEnhanced=t.filmstripEnhanced,e},changeImg:function(t){var e=this,i=e.conf;if(e.enlargeImageCnt.css({width:30,height:30}),e.enlargeImageCnt.attr("src","//q.ebaystatic.com/aw/pics/cmp/img/imgThrobber_30x30.gif"),e.cmpImg=document.createElement("img"),void 0!==e.currImgId){var n={};n.id=e.currImgId,n.src=i.islarge?e.cmpImg.src=e.imgArray[e.currImgId].enlargeEnabled?e.imgArray[e.currImgId].maxImageUrl:e.imgArray[e.currImgId].displayImgUrl:e.cmpImg.src=e.imgArray[e.currImgId].displayImgUrl,e.cmpImg.complete||4===e.cmpImg.readyState?e.setCmpImg(n,t):(e.cmpImg.onload=function(){e.setCmpImg(n,t)},e.cmpImg.onerror=function(){n.src="//p.ebaystatic.com/aw/pics/nextGenVit/imgNoImg.gif",e.cmpImg.width=500,e.cmpImg.height=500,e.setCmpImg(n,t)}),i.isFS&&t&&e.pubsub.publish("_TRIGGER_CLK_VI_FS_IMG_"+i.fsId,{index:e.currImgId}),e.hasNavArr&&e.setImgArrs(),e.imgArray[e.currImgId]&&e.imgArray[e.currImgId].videoMedia?(e.enlargeImageCntWrapper.hide(),this.loadVideoManifest(e.currImgId)):$("#viEnlargeImgLayer_img_ctr").show(),e.pubsub.publish("_TRIGGER_IMG_PRELOAD",{id:e.currImgId})}},setImgArrs:function(){var t=this,e=t.conf,i=t.imgArray.length,n=$("#"+e.layerId+" .vi_img_crsl_imgpl .pntrArrPrev"),s=$("#"+e.layerId+" .vi_img_crsl_imgpl .pntrArrNext");0==t.currImgId?(n.addClass("disablePrev"),n.removeClass("activePrev"),n.attr("aria-disabled","true"),n.unbind("click"),t.bindPrevArrwKey=!1):(n.addClass("activePrev"),n.removeClass("disablePrev"),n.attr("aria-disabled","false"),t.bindPrevArrwKey||(n.bind("click",(function(){t.stopNonImageItem(t.currImgId),t.isHandleFSClk=!1,e.arrTrk&&trackingUtil(e.arrTrk),--t.currImgId,t.changeImg(!0),t.pubsub.publish("_IMG_CAROUSEL_CHNG_IMG",{id:t.conf.layerId,curImg:t.currImgId}),t.onSlideChange()})),t.bindPrevArrwKey=!0)),t.currImgId==i-1?(s.addClass("disableNext"),s.removeClass("activeNext"),s.attr("aria-disabled","true"),s.unbind("click"),t.bindNxtArrwKey=!1):(s.addClass("activeNext"),s.removeClass("disableNext"),s.attr("aria-disabled","false"),t.bindNxtArrwKey||(s.bind("click",(function(){t.stopNonImageItem(t.currImgId),t.isHandleFSClk=!1,e.arrTrk&&trackingUtil(e.arrTrk),++t.currImgId,t.changeImg(!0),t.pubsub.publish("_IMG_CAROUSEL_CHNG_IMG",{id:t.conf.layerId,curImg:t.currImgId}),t.onSlideChange()})),t.bindNxtArrwKey=!0)),n.show(),s.show()},setCmpImg:function(t){if(t.id==this.currImgId){var e=(e=this.conf).imageAccessibilityText+" "+(this.currImgId+1)+" - "+e.imgAlt;this.setImgSize(),this.enlargeImageCnt.attr({src:t.src,alt:e})}},onSlideChange:function(){this.updateStatus()},updateStatus:function(){var t=this.conf,e=$("#"+t.layerId),i=(e=$('[role="status"]',e)).data("space-added");e.html(t.statusMessage+(i?"":"&#8203;")),e.data("space-added",!i)},setImgSize:function(t,e){var i=this.conf,n=0,s=0,r=0;r=0;this.imgPanelWidth=$("#"+i.layerId).width(),this.imgPanelHeight=$("#"+i.layerId).height(),this.imgPanelHeight=i.isEnableTouch?this.imgPanelHeight-$("#"+i.layerId+" .vi_img_crsl_fspl").height():this.imgPanelHeight,this.imgPanelHeight-=108,t=t&&0<t?t:this.cmpImg.width,e=e&&0<e?e:this.cmpImg.height,t>this.imgPanelWidth||e>this.imgPanelHeight?(r=this.imgPanelHeight/e,(r=this.imgPanelWidth/t>r?this.imgPanelHeight/e:this.imgPanelWidth/t)&&(n=e*r,s=t*r)):(n=e,s=t),this.enlargeImageCnt.css({width:s,height:n})},onCmpCls:function(){var t=this.conf;t.clsTrk&&trackingUtil(t.clsTrk),this.unbindCmpEvts(),this.isHandleFSClk=!1,this.currImgId=this.initImgId},bindTouchEvts:function(){var t=this.conf,e=0,i=0,n=1,s=1,r=0,a=0,o=document.getElementById(t.imgCntId);new Hammer($("#"+t.layerId)[0],{transform_always_block:!0,transform_min_scale:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_min_distance:0}).on(this.touchGestures,(function(l){switch(l.type){case"touch":s=n;break;case"drag":1!=n?(e=0+l.gesture.deltaX,i=0+l.gesture.deltaY,e>r&&(e=r),e<-r&&(e=-r),i>a&&(i=a),i<-a&&(i=-a)):saved_posY=saved_posX=i=e=0;break;case"transform":n=Math.max(1,Math.min(s*l.gesture.scale,10)),r=Math.ceil((n-1)*o.clientWidth/2),a=Math.ceil((n-1)*o.clientHeight/2),e>r&&(e=r),e<-r&&(e=-r),i>a&&(i=a),i<-a&&(i=-a);break;case"dragleft":1==n&&60<l.gesture.distance&&(l.gesture.stopDetect(),$("#"+t.layerId+" .vi_img_crsl_imgpl .pntrArrNext").click());break;case"swipeleft":l.gesture.stopDetect(),n=1,$("#"+t.layerId+" .vi_img_crsl_imgpl .pntrArrNext").click();break;case"dragright":1==n&&60<l.gesture.distance&&(l.gesture.stopDetect(),$("#"+t.layerId+" .vi_img_crsl_imgpl .pntrArrPrev").click());break;case"swiperight":l.gesture.stopDetect(),n=1,$("#"+t.layerId+" .vi_img_crsl_imgpl .pntrArrPrev").click()}l="initial",1!=n&&(l="translate3d("+e+"px,"+i+"px, 0) scale3d("+n+","+n+", 0) "),o.style.transform=l,o.style.oTransform=l,o.style.msTransform=l,o.style.mozTransform=l,o.style.webkitTransform=l})),this.bindedTouch=!0},tabKeyHandleImgFocus:function(){var t=this,e=document.querySelector(".vi_img_crsl_fspl_trg"),i=document.querySelector(".vi_img_crsl_fspl_trg .vi_img_crsl_fspl");e.addEventListener("keyup",(function(e){var n="0px"!==i.style.height;9!==e.keyCode||n||t.toggleFs(!1)}))},loadPlayerFailed:function(){console.error("Unable to load the UI library!")},onPlayerErrorEvent:function(t){this.onPlayerError(t.detail)},onPlayerError:function(t){console.error("Error code",t)},videoControls:{addBigPlayButton:!1,addSeekBar:!0,controlPanelElements:"play_pause time_and_duration spacer mute volume report".split(" ")},createVideoDomEL:function(t,e){var i=document.createElement("div");i.classList.add("vi-gallery-hidden","video-player__container"),i.setAttribute("data-shaka-player-container",""),i.id="video-player-container-"+e;var n=document.createElement("video");if(n.id="video-carousel-"+e,n.setAttribute("data-idx",e),i.appendChild(n),t.appendChild(i),i=this.conf.videoHelper.attachVideoPlayer.call(this,i,n),window.videoPlayers=window.videoPlayers||[],window.videoUI=window.videoUI||[],window.videoPlayers[e]=i,n.addEventListener("play",this.handlePlaying.bind(this,i)),n.addEventListener("volumechange",this.handleVolumeChange.bind(this,n)),n.addEventListener("timeupdate",this.handleTimeUpdate.bind(this,n)),n=t.querySelector("#video-player-container-"+e+" .shaka-spinner-container .shaka-spinner"),(i=document.createElement("span")).classList.add("progress-spinner"),!this.conf||!this.conf.videoConfig||!this.conf.videoConfig.loadingText)for(var s=0;this.conf&&this.conf.imgArr&&s<this.conf.imgArr.length;s++)if(this.conf.imgArr[s].videoMedia&&this.conf.imgArr[s].videoMedia.videoControlsMap&&this.conf.imgArr[s].videoMedia.videoControlsMap.LOADING&&this.conf.imgArr[s].videoMedia.videoControlsMap.LOADING.accessibilityText){this.conf.videoConfig.loadingText=this.conf.imgArr[s].videoMedia.videoControlsMap.LOADING.accessibilityText;break}i.setAttribute("aria-label",this.conf.videoConfig.loadingText||"Loading"),n&&n.appendChild(i),(n=n.querySelector("svg.shaka-spinner-svg"))&&n.classList.add("clipped"),(n=t.querySelector("#video-player-container-"+e+" .shaka-current-time"))&&(n.ariaHidden="true")},setupPlayer:function(){var t=this;if(shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()){shaka.Player.probeSupport().then((function(e){t.videoSupport=e}));var e,i=document.querySelector("#viEnlargeImgLayer .vi_img_crsl_ctr");for(e in this.imgArray)this.imgArray[e]&&this.imgArray[e].videoMedia&&this.createVideoDomEL(i,e);$("#viEnlargeImgLayer-progress-spinner").remove()}else console.error("shaka: Browser not supported!")},loadPlayer:function(){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("script");e.async=!0,t.append(e);var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",t.append(i),e.addEventListener("load",this.setupPlayer.bind(this)),e.src=this.conf&&this.conf.videoConfig&&this.conf.videoConfig.js,i.href=this.conf&&this.conf.videoConfig&&this.conf.videoConfig.css},loadVideoManifest:function(t){var e=this;if(t==e.currImgId){var i=document.querySelector("#video-player-container-"+this.currImgId);if(e.imgArray[e.currImgId].videoLoaded)e.playVideo(e.currImgId,!0);else{var n="DASH";e.videoSupport&&e.videoSupport.manifest&&e.videoSupport.manifest.m3u8&&!e.videoSupport.manifest.mpd&&(n="HLS");var s=e.imgArray[e.currImgId].videoMedia&&e.imgArray[e.currImgId].videoMedia.playlistMap&&e.imgArray[e.currImgId].videoMedia.playlistMap;if(s){if(n=s[n],!window.videoPlayers||!window.videoPlayers[e.currImgId])return $("#viEnlargeImgLayer_img_ctr").css("display","block"),i&&i.classList.add("vi-gallery-hidden"),void setTimeout(this.loadVideoManifest.bind(this,t),50);$("#viEnlargeImgLayer_img_ctr").css("display","none"),i&&i.classList.remove("vi-gallery-hidden");try{window.videoPlayers[e.currImgId].load(n).then((function(){e.imgArray[e.currImgId].videoLoaded=!0,e.playVideo(e.currImgId,!0);var t=i.querySelector(".shaka-seek-bar");t&&t.setAttribute("aria-label",e.conf.progressBarLabel)})).catch((function(t){e.onPlayerError(t)}))}catch(t){console.error("Video error, manifest:",n),e.onPlayerError(t)}}}$("#viEnlargeImgLayer_img_ctr").hide(),i&&((t=i.querySelector("video"))&&this.volume&&this.volume!==t.volume&&(t.volume=this.volume),i.classList.remove("vi-gallery-hidden"))}},stopNonImageItem:function(t){var e=this.imgArray&&this.imgArray[t];e&&e.videoMedia&&(this.playVideo(t,!1),(t=document.querySelector("#video-player-container-"+t))&&t.classList.add("vi-gallery-hidden"))},handlePlaying:function(t){t&&t.isBuffering&&t.isBuffering()&&setTimeout((function(){trackingUtil("VIDEO_BUFFERING")}),500)},handleVolumeChange:function(t){t&&t.volume&&(this.volume=t.volume,this.updateVolumeLevel(t))},updateVolumeLevel:function(t){var e=document.querySelector("#video-player-container-"+this.currImgId+" .shaka-volume-bar");e&&(t=1>t.volume?t.volume.toFixed(1):t.volume,t=this.conf.volumeLevelTemplate.replace("{level}",t).replace("{max}","1"),e.setAttribute("aria-valuetext",t))},handleTimeUpdate:function(t){this.updateVolumeLevel(t);var e=document.querySelector("#video-player-container-"+this.currImgId+" .shaka-seek-bar");if(e){var i=Math.round(t.currentTime);t=Math.round(t.duration),i=this.conf.playbackTimeTemplate.replace("{elapsed}",i).replace("{duration}",t);e.setAttribute("aria-valuetext",i)}},handleReportBtnClick:function(){trackingUtil("VIDEO_REPORT_CLICK");var t=this.imgArray&&this.imgArray[this.currImgId];t&&t.videoViewerInfo&&t.videoViewerInfo.report&&t.videoViewerInfo.report.text&&t.videoViewerInfo.report.text.action&&t.videoViewerInfo.report.text.action.URL&&window.open(t.videoViewerInfo.report.text.action.URL,"","resizable,scrollbars,status")},playVideo:function(t,e){var i=document.querySelector("#video-carousel-"+t);if(i)try{e&&this.dialogOpen&&i.play(),e||i.pause()}catch(t){trackingUtil("VIDEO_ERROR")}}}})),raptor.defineClass("com.ebay.raptor.vi.bid.powerbid.PowerBid",{superclass:"com.ebay.raptor.vi.bid.Bid"},(function(){var t=function(e){this.variant=e.variant,this.trending_tracked_outbid=this.trending_tracked=this.ovV4=this.userAction=!1,this.sPTBflOld=null,this.evtNS=e.evtNS,this.amountUtils=raptor.require("com.ebay.raptor.vi.powerbid.AmountUtils"),t.superclass.init.apply(this,arguments),this.invalidBidAmountErr=null};return t.prototype={bidClick:function(e){var i,n,s=this.cfg;t.superclass.bidVars.apply(this),e&&(i=e.maxbid,this.shipping=e.shipping,this.impCharge=e.impCharge,this.sPTBflOld=e.sPTBflOld,n=e.isRedirect),i=i||s.maxBidDefVal,this.triggerCall(s.powerBidInitURL,i,!0,n,!0)},triggerCall:function(t,e,i,n,s){var r=this.cfg;t&&(this.invalidBidAmountErr=null,this.callFromPage=s,this.callFromPage||(this.userAction=!0,2==this.variant&&$("#"+r.rgtBubbleId).hide(),this.pubsub.publish("_CLOSE_OLAY",{cmpId:"powerBidSurveyOly"}),5<this.variant&&15>this.variant&&(this.pubsub.publish("_CLOSE_OLAY",{cmpId:"helpLayerOly1"}),this.pubsub.publish("_CLOSE_OLAY",{cmpId:"helpLayerOly2"}))),e=i&&e?e:null,s||!this.valiadteInput(e))&&(this.hideAll(s),$("#"+r.layerWrapper).hide(),this.throbber(!0),(this.maxBidAmt=e)&&(n?(s=-1!==t.indexOf("?")?"&":"?",s+=$.param({maxbid:e}),t+=encodeURIComponent(s)):(t+=-1!==t.indexOf("?")?"&":"?",t+=$.param({maxbid:e}))),n?top.location.href=t:this.ajaxUtil&&this.ajaxUtil.getJSON(t,this.processResponse,this))},processResponse:function(e){var i,n,s=this,r=s.cfg;if(e&&(s.callFromPage||!e.isAutoRefresh||!s.userAction)&&(!(i=s.BidError.valueOf(e.Error))||!s.isRedirectErrors(i,e.ErrorUrl)))if(e.IsEnded)setTimeout((function(){t.superclass.closeLayer.apply(s)}),2500);else{if((n=e.isAutoRefresh?s.status:s.BidStatus.valueOf(e.Status))&&!e.isAutoRefresh&&e.ViewerItemRelation&&n!=s.BidStatus.valueOf("REVIEWBID")&&(s.BidderStatus.valueOf(e.ViewerItemRelation)==s.BidderStatus.HIGHBIDDER?n=s.BidStatus.valueOf("CONFIRMBID"):s.BidderStatus.valueOf(e.ViewerItemRelation)==s.BidderStatus.OUTBIDDER&&(n=s.BidStatus.valueOf("PLACEBID"))),n&&(s.updateCurrBidColor(e,n),s.defaultFields(e),n==s.BidStatus.PLACEBID?s.placeBid(e):n==s.BidStatus.REVIEWBID?s.reviewBid(e):n==s.BidStatus.CONFIRMBID&&s.confirmBid(e),!e.isAutoRefresh&&s.callFromPage&&s.attachPowerBidEvts(),s.status=n),(!e.isAutoRefresh||!s.trending_tracked)&&e&&e.CurrentPrice&&e.CurrentPrice.CleanAmount&&r.trendingPrice)if(e.CurrentPrice.CleanAmount>r.trendingPrice)$(".trending_help_info").hide(),$(".trendingPriceOnBidLayer").hide(),s.trending_tracked=!1;else{$(".trending_help_info").show(),$(".trendingPriceOnBidLayer").show(),s.trending_tracked=!0;var a={sid:"p2047675.l9019"};if(r.trendingPrice&&(a.tprice=r.trendingPrice),e.CurrentPrice&&(e.CurrentPrice.CleanAmount&&(a.curprice=e.CurrentPrice.CleanAmount),e.CurrentPrice.CurrencyCode&&(a.currency=e.CurrentPrice.CurrencyCode)),a.bl=e.ViewerItemRelation&&s.BidderStatus.valueOf(e.ViewerItemRelation)==s.BidderStatus.HIGHBIDDER&&s.trending_tracked?"hl":"pl",e.TimeLeft){var o=0;e.TimeLeft.DaysLeft&&(o+=864e5*e.TimeLeft.DaysLeft),e.TimeLeft.HoursLeft&&(o+=36e5*e.TimeLeft.HoursLeft),e.TimeLeft.MinutesLeft&&(o+=6e4*e.TimeLeft.MinutesLeft),e.TimeLeft.SecondsLeft&&(o+=1e3*e.TimeLeft.SecondsLeft),a.timeLeft=o}n._name!=s.BidStatus.REVIEWBID._name&&!e.isAutoRefresh&&(setTimeout((function(){$(document).trigger("rover",a)}),0),!s.trending_tracked_outbid&&e.ViewerItemRelation&&s.BidderStatus.valueOf(e.ViewerItemRelation)==s.BidderStatus.OUTBIDDER&&e.OutbidBySmartBid&&(setTimeout((function(){$(document).trigger("rover",{sid:"p2047675.l9053"})}),0),s.trending_tracked_outbid=!0))}e.ViewerItemRelation&&s.BidderStatus.valueOf(e.ViewerItemRelation)==s.BidderStatus.HIGHBIDDER&&s.trending_tracked?$(".trendingPriceOnBidLayer_high").show():$(".trendingPriceOnBidLayer_high").hide(),s.updateBidAmtError(i,e),s.postProcessResponse(e),e.isAutoRefresh||(s.throbber(!1),$("#"+r.layerWrapper).show(),s.setTextFocus(e),e.isNewUser?(r=$("#vi_oly_powerBid").position(),$("#vi_oly_newuserOly").css({left:r.left+385,top:r.top+90})):($("#vi_oly_newuserOly").hide(),$("#vi_oly_newuserOly_layer1").hide(),$("#vi_oly_newuserOly_layer2").hide()),s.setTimer()),s.userAction=!1,!e.isAutoRefresh&&e.ROIUrls&&s.bidUtil.preload(e.ROIUrls)}},setTimer:function(){try{if(void 0!==this.sPTBflOld){var t=(new Date).getTime()-this.sPTBflOld;$(document).trigger("BflTimer",{type:"placebid",diff:t,kind:"Old",sid:"m5028"})}}catch(t){window.console&&window.console.log(t)}},setTextFocus:function(t){var e,i=this.cfg;t.isAutoRefresh||(this.BidStatus.valueOf(t.Status)!=this.BidStatus.valueOf("REVIEWBID")?((2==this.variant||6<=this.variant&&15>this.variant)&&(e=i.ebayBidSectionId+i.value),e&&0<$("#"+e).length&&$("#"+e).focus()):(2==this.variant||6<=this.variant&&15>this.variant)&&$("#"+i.reviewSectionId+i.btn).focus())},setCursorPos:function(t,e){if(10>e)try{if(t.createTextRange){var i=t.createTextRange();i.move("character",e),i.select()}else t.setSelectionRange&&t.setSelectionRange(e,e)}catch(t){}},postProcessResponse:function(t){this.cfg.showBanner&&this.showOrHideBanner(t)},showOrHideBanner:function(t){this.BidderStatus.valueOf(t.ViewerItemRelation)===this.BidderStatus.HIGHBIDDER?$("#vi_oly_powerBid .layerWrap .mobBan").show():$("#vi_oly_powerBid .layerWrap .mobBan").hide()},placeBid:function(t){var e=this.cfg;this.addRemoveClasses($("#"+e.layerWrapper),["conB","revB"],["plaB"]),this.updateMaximumBid(t,!1),this.updateMinToBid(t,!1),this.populateNextIncrementValue(t),!t.isAutoRefresh&&0<$("#"+e.ebayBidSectionId+e.value).length&&$("#"+e.ebayBidSectionId+e.value).val(""),t.isAutoRefresh||this.cfg.isGsp&&this.updateImportCharge(!1),(14==this.variant||!t.isAutoRefresh)&&this.updateEbaySectionTxt(t,!0),14==this.variant&&!t.isAutoRefresh&&this.updateHelpContent(t),this.confirmBidMsg(t),t.isAutoRefresh||this.updateLegalText(1),this.showOrHideEle([e.topPanelId,e.placeBidSectionId,e.bidSectionId+e.wrapper,e.disclaimerId+"_txt",e.disclaimerId],!0)},reviewBid:function(t){var e=this.cfg;if(this.addRemoveClasses($("#"+e.layerWrapper),["conB","plaB"],["revB"]),!t.isAutoRefresh&&(t.MaximumBid&&($("#"+e.reviewSectionId+e.value).html(t.MaximumBid.MoneyStandard),$("#"+e.reviewSectionId+e.value+"_hdn").val(t.MaximumBid.CleanAmount)),t.MaximumBidLocal&&$("#"+e.reviewSectionId+e.approx).html($("#"+e.approxAmtNewId).html().replace("##2##",t.MaximumBidLocal.MoneyStandard)),2==this.variant||6<=this.variant&&15>this.variant)){var i=$("#"+e.reviewSectionId+e.btn).html(),n=$("#"+e.reviewSectionId+e.value).html();i&&$("#"+e.reviewSectionId+e.btn).html(i+"<span class='offscreen'>"+n+"</span>")}!t.isAutoRefresh&&this.cfg.isGsp&&this.updateImportCharge(!0),t.isAutoRefresh||this.updateLegalText(2),this.showOrHideEle([e.topPanelId,e.reviewSectionId+e.wrapper,e.disclaimerId+"_txt",e.disclaimerId],!0)},confirmBid:function(t){var e=this.cfg,i=this.BidderStatus.valueOf(t.ViewerItemRelation)===this.BidderStatus.HIGHBIDDER;this.addRemoveClasses($("#"+e.layerWrapper),["revB","plaB"],["conB"]),this.updateMaximumBid(t,!0),t.isAutoRefresh?!i&&(10==this.variant||11==this.variant||12==this.variant||13==this.variant||14==this.variant)&&$("#"+e.highBidTopSectionId).hide():this.cfg.isGsp&&this.updateImportCharge(!1),10==this.variant||11==this.variant||12==this.variant||13==this.variant||14==this.variant?this.updateMinToBid(t,!0):(this.updateMinToBid(t,!0),$("#"+e.placeBidSectionId+e.value).val(t.MaxBidPlusOneIncrement?t.MaxBidPlusOneIncrement.CleanAmount:t.MinimumToBid.CleanAmount)),this.confirmBidMsg(t),(10==this.variant||11==this.variant||12==this.variant||13==this.variant||14==this.variant)&&this.populateNextIncrementValue(t),(14==this.variant||!t.isAutoRefresh)&&this.updateEbaySectionTxt(t,!1),14==this.variant&&!t.isAutoRefresh&&this.updateHelpContent(t),t.isAutoRefresh||this.updateLegalText(3),this.showOrHideEle([e.topPanelId,e.bidSectionId+e.wrapper,e.disclaimerId+"_txt",e.disclaimerId],!0),!t.isAutoRefresh&&0<$("#"+e.ebayBidSectionId+e.value).length&&($("#"+e.ebayBidSectionId+e.value).val(""),$("#"+e.ebayBidSectionId+e.value).focus())},updateHelpContent:function(t){var e=this.cfg;t&&this.BidderStatus.valueOf(t.ViewerItemRelation)==this.BidderStatus.OUTBIDDER&&t.OutbidBySmartBid&&(this.expandCnt(e.topHelpTxtId),$("#"+e.seeMoreHelpId).show(),$("#"+e.seeMoreHelpId+"_cnt").hide())},updateLegalText:function(t){var e=this.cfg;1==t||3==t?($(".layerWrap .rev_gsp").hide(),$(".layerWrap .rev_noGsp").hide(),e.isGsp?($(".layerWrap .noGsp").hide(),$(".layerWrap .gsp").show()):($(".layerWrap .gsp").hide(),$(".layerWrap .noGsp").show())):2==t&&($(".layerWrap .gsp").hide(),$(".layerWrap .noGsp").hide(),e.isGsp?($(".layerWrap .rev_noGsp").hide(),$(".layerWrap .rev_gsp").show()):($(".layerWrap .rev_gsp").hide(),$(".layerWrap .rev_noGsp").show()))},populateNextIncrementValue:function(t){var e=this.cfg,i=t.MaxBidPlusOneIncrement?t.MaxBidPlusOneIncrement:t.MinimumToBid,n=t.MinimumToBidLocal;bidderStatus=this.BidderStatus.valueOf(t.ViewerItemRelation);var s=bidderStatus===this.BidderStatus.HIGHBIDDER,r=e.bidBtnTxt,a=e.nowTxt;2==this.variant?($("#"+e.placeBidSectionId+e.btn).html(r+" "+i.MoneyStandard),$("#"+e.placeBidSectionId+e.value).val(i.CleanAmount)):6==this.variant||7==this.variant||8==this.variant||9==this.variant?(6==this.variant?$("#"+e.placeBidSectionId+e.btn).html($("#"+e.bidBtnTxtNowNewId).html().replace("##3##",i.MoneyStandard)):$("#"+e.placeBidSectionId+e.btn).html(r+" "+i.MoneyStandard+" "+a),$("#"+e.placeBidSectionId+e.value).val(i.CleanAmount)):10==this.variant||11==this.variant?s?(t.isAutoRefresh?(i=this.getNextIncrementAmount(t),t.LocalCurrentPrice&&(n=this.amountUtils.getLocalPrice(t,i))):t.MaximumBid?(i=t.PowerBidVal1,t.LocalCurrentPrice&&(n=t.PowerBidVal1Local)):(i=t.PowerBidVal2,t.LocalCurrentPrice&&(n=t.PowerBidVal2Local)),$("#"+e.placeBidSectionId+e.btn).html(r+" "+i.MoneyStandard),$("#"+e.placeBidSectionId+e.value).val(i.CleanAmount)):($("#"+e.placeBidSectionId+e.btn).html(r+" "+i.MoneyStandard+" "+a),$("#"+e.placeBidSectionId+e.value).val(i.CleanAmount),t.isAutoRefresh&&t.LocalCurrentPrice&&!n&&(n=this.amountUtils.getLocalPrice(t,i))):(12==this.variant||13==this.variant||14==this.variant)&&this.populateValuesforGamfc1(t),14!=this.variant&&t.LocalCurrentPrice&&(n||(n=this.amountUtils.getLocalPrice(t,i)),n?($("#"+e.placeBidSectionId+e.approx).html(n.MoneyStandard),$("#"+e.placeBidSectionId+e.approx).show()):$("#"+e.placeBidSectionId+e.approx).hide())},getNextIncrementAmount:function(t){return this.amountUtils&&t?this.amountUtils.getMaxPlusOneIncrementPrice(t):null},getNextIncrementLocalAmount:function(t){return this.amountUtils&&t?this.amountUtils.getMaxPlusOneIncrementLocalPrice(t):null},showOnlyTwoButtons:function(t){return 33<$(t+"_1").text().length+$(t+"_2").text().length+$(t+"_3").text().length},IsResponseRounded:function(t){return!!(t&&t.PowerBidVal1&&t.PowerBidVal2&&t.PowerBidVal3&&t.PowerBidVal1.MoneyStandardNoDecimals&&t.PowerBidVal2.MoneyStandardNoDecimals&&t.PowerBidVal3.MoneyStandardNoDecimals)},populateValuesforGamfc1:function(t){try{var e=this.cfg,i=e.bidBtnTxt,n=!1;if(14==this.variant&&(n=this.IsResponseRounded(t)),n)$("#"+e.placeBidSectionId+e.btn+"_1").html($("#"+e.bidBtnTxtNewId).html().replace("##3##",t.PowerBidVal1.MoneyStandardNoDecimals)),$("#"+e.placeBidSectionId+e.btn+"_2").html($("#"+e.bidBtnTxtNewId).html().replace("##3##",t.PowerBidVal2.MoneyStandardNoDecimals)),$("#"+e.placeBidSectionId+e.btn+"_3").html($("#"+e.bidBtnTxtNewId).html().replace("##3##",t.PowerBidVal3.MoneyStandardNoDecimals));else{t=t.isAutoRefresh?this.amountUtils.setPowerBidVal(t):this.amountUtils.roundingMakeQuickBid(t);var s=this.amountUtils.removeDecimalDigits(t.PowerBidVal1.MoneyStandard,t.decimalSeparator),r=this.amountUtils.removeDecimalDigits(t.PowerBidVal2.MoneyStandard,t.decimalSeparator),a=this.amountUtils.removeDecimalDigits(t.PowerBidVal3.MoneyStandard,t.decimalSeparator);$("#"+e.placeBidSectionId+e.btn+"_1").html(i+" "+s),$("#"+e.placeBidSectionId+e.btn+"_2").html(i+" "+r),$("#"+e.placeBidSectionId+e.btn+"_3").html(i+" "+a)}var o=this.showOnlyTwoButtons("#"+e.placeBidSectionId+e.btn);14==this.variant?o?$(".bidSecTabWrap .wholeWrap .btnsWrap").addClass("twoBtn"):$(".bidSecTabWrap .wholeWrap .btnsWrap").removeClass("twoBtn"):o?$("#"+e.placeBidSectionId+e.btn+"_3").css({display:"none"}):$("#"+e.placeBidSectionId+e.btn+"_3").css({display:"inline-block"}),$("#"+e.placeBidSectionId+e.btn+"_1"+e.value).val(t.PowerBidVal1.CleanAmount),$("#"+e.placeBidSectionId+e.btn+"_2"+e.value).val(t.PowerBidVal2.CleanAmount),$("#"+e.placeBidSectionId+e.btn+"_3"+e.value).val(t.PowerBidVal3.CleanAmount),14==this.variant?t.LocalCurrentPrice&&(o?($("#"+e.placeBidSectionId+e.approx+"_1").html(t.PowerBidVal1Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_2").html(t.PowerBidVal2Local.MoneyStandard)):($("#"+e.placeBidSectionId+e.approx+"_1").html(t.PowerBidVal1Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_2").html(t.PowerBidVal2Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_3").html(t.PowerBidVal3Local.MoneyStandard))):t.MinimumToBidLocal&&(o?($("#"+e.placeBidSectionId+e.approx+"_4").html(t.PowerBidVal1Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_5").html(t.PowerBidVal2Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_3btn").hide(),$("#"+e.placeBidSectionId+e.approx+"_2btn").show()):($("#"+e.placeBidSectionId+e.approx+"_1").html(t.PowerBidVal1Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_2").html(t.PowerBidVal2Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_3").html(t.PowerBidVal3Local.MoneyStandard),$("#"+e.placeBidSectionId+e.approx+"_2btn").hide(),$("#"+e.placeBidSectionId+e.approx+"_3btn").show()))}catch(t){}},updateEbaySectionTxt:function(t,e){var i,n,s=this.cfg;n=(i=this.BidderStatus.valueOf(t.ViewerItemRelation))&&i===this.BidderStatus.HIGHBIDDER,isOutBidder=i&&i===this.BidderStatus.OUTBIDDER,isError=t.Error,2==this.variant?e?($("#"+s.ebayBidSectionId+s.txt1).hide(),$("#"+s.ebayBidSectionId+s.txt2).show(),this.showOrHideEle([s.preBidId+s.wrapper],!1),this.showOrHideEle([s.placeBidSectionId,s.seperatorId],!0)):(n&&($("#"+s.ebayBidSectionId+s.txt1).show(),$("#"+s.ebayBidSectionId+s.txt2).show(),this.showOrHideEle([s.preBidId+s.wrapper],!0)),this.showOrHideEle([s.placeBidSectionId,s.seperatorId],!1)):6==this.variant||7==this.variant||8==this.variant||9==this.variant?e?($("#"+s.ebayBidSectionId+s.txt0).hide(),$("#"+s.ebayBidSectionId+s.txt1).hide(),$("#"+s.ebayBidSectionId+s.txt2).show(),$("#"+s.ebayBidSectionId+s.txt1_btn).hide(),$("#"+s.ebayBidSectionId+s.txt2_btn).show(),this.showOrHideEle([s.preBidId+s.wrapper],!1),this.showOrHideEle([s.placeBidSectionId,s.seperatorId],!0)):(n&&($("#"+s.ebayBidSectionId+s.txt0).show(),$("#"+s.ebayBidSectionId+s.txt2).hide(),$("#"+s.ebayBidSectionId+s.txt1).show(),$("#"+s.ebayBidSectionId+s.txt2_btn).hide(),$("#"+s.ebayBidSectionId+s.txt1_btn).show()),this.showOrHideEle([s.placeBidSectionId,s.seperatorId],!1)):10!=this.variant&&11!=this.variant&&12!=this.variant&&13!=this.variant&&14!=this.variant||(e?(10==this.variant||13==this.variant||14==this.variant?($("#vi_oly_powerBid .V"+this.variant+" .placeBidSectionTr").find("td:first").removeClass("placebidsec_pdn_hb").addClass("placebidsec_pdn_ob"),$("#vi_oly_powerBid .V"+this.variant+" .ebayBidSectionCnt").removeClass("ebaybidsec_pdn_hb").addClass("ebaybidsec_pdn_ob")):($("#vi_oly_powerBid .V"+this.variant+" .placeBidSectionTr").find("td:first").removeClass("placebidsec_pdn_hb_rev").addClass("placebidsec_pdn_ob_rev"),$("#vi_oly_powerBid .V"+this.variant+" .ebayBidSectionCnt").removeClass("ebaybidsec_pdn_hb_rev").addClass("ebaybidsec_pdn_ob_rev")),14!=this.variant&&$("#vi_oly_powerBid .V"+this.variant+" .inpWrap").css({margin:"10px"}),$("#"+s.placeBidSectionId+s.txt_gamf_1+"_1").removeClass("ttl1_hb").addClass("ttl1"),$("#"+s.highBidTopSectionId).hide(),14!=this.variant&&($("#"+s.placeBidSectionId+s.txt0).hide(),$("#"+s.seperatorId+s.txt0).hide(),$("#"+s.ebayBidSectionId+s.txt1).hide(),$("#"+s.ebayBidSectionId+s.txt2).show(),$("#"+s.ebayBidSectionId+s.txt1_btn).hide()),$("#"+s.ebayBidSectionId+s.txt2_btn).show(),this.showOrHideEle([s.preBidId+s.wrapper],!1),this.showOrHideEle([s.placeBidSectionId,s.seperatorId],!0)):n?(10==this.variant||13==this.variant||14==this.variant?($("#vi_oly_powerBid .V"+this.variant+" .placeBidSectionTr").find("td:first").removeClass("placebidsec_pdn_ob").addClass("placebidsec_pdn_hb"),$("#vi_oly_powerBid .V"+this.variant+" .ebayBidSectionCnt").removeClass("ebaybidsec_pdn_ob").addClass("ebaybidsec_pdn_hb")):($("#vi_oly_powerBid .V"+this.variant+" .placeBidSectionTr").find("td:first").removeClass("placebidsec_pdn_ob_rev").addClass("placebidsec_pdn_hb_rev"),$("#vi_oly_powerBid .V"+this.variant+" .ebayBidSectionCnt").removeClass("ebaybidsec_pdn_ob_rev").addClass("ebaybidsec_pdn_hb_rev")),$("#"+s.placeBidSectionId+s.txt_gamf_1+"_1").removeClass("ttl1").addClass("ttl1_hb"),$(".hb_or").hide(),$("#"+s.seperatorId).hide(),14==this.variant?($("#"+s.highBidTopSectionId).show(),this.showOrHideEle([s.seperatorId],!1),this.showOrHideEle([s.placeBidSectionId],!1)):($("#"+s.ebayBidSectionId+s.txt2).hide(),$("#"+s.ebayBidSectionId+s.txt2_btn).hide(),$("#"+s.highBidTopSectionId).show(),this.showOrHideEle([s.seperatorId],!1),this.showOrHideEle([s.placeBidSectionId],!1),$("#"+s.ebayBidSectionId+s.txt1).show(),$("#"+s.ebayBidSectionId+s.txt1_btn).show())):($("#"+s.highBidTopSectionId).hide(),this.showOrHideEle([s.seperatorId],!0),this.showOrHideEle([s.placeBidSectionId],!0)))},updateBidCount:function(t){var e=this.cfg;14==this.variant?1==t.BidCount?$("#"+e.bidCountId+e.value).html(e.bidCountDynTxt.replace("##2##",t.BidCount)):$("#"+e.bidCountId+e.value).html(e.bidsCountDynTxt.replace("##2##",t.BidCount)):(1==t.BidCount?$("#"+e.belowBidsTxtId).html(e.belowBidTxt):$("#"+e.belowBidsTxtId).html(e.belowBidsTxt),$("#"+this.cfg.bidCountId+e.value).html(t.BidCount))},defaultFields:function(e){var i;i=e.isAutoRefresh&&!e.TimeLeft?this.bidUtil.timeLeftV({}):this.bidUtil.timeLeftV(e.TimeLeft),this.updateBidCount(e),this.updateTimeLeft(i),t.superclass.startCounter.apply(this,[i,e.AccessedDate,e.ViewerItemRelation]),this.callFromPage&&(this.updateScope(e),this.updateShipping()),this.updateCurrBid(e.CurrentPrice,e.LocalCurrentPrice),this.updateSymbol(e)},updateScope:function(t){var e=this.cfg;t&&t.LocalCurrentPrice?(this.addRemoveClasses($("#"+e.layerWrapper),[],["ap"]),this.addRemoveClasses($("#"+e.layerWrapper+" .topWrap tr.approxTr"),["dn"],[])):(this.addRemoveClasses($("#"+e.layerWrapper),["ap"],[]),this.addRemoveClasses($("#"+e.layerWrapper+" .topWrap tr.approxTr"),[],["dn"])),this.impCharge&&((impChTxt=$("#"+this.impCharge).css("display"))&&"none"!=impChTxt?(this.cfg.isGsp=!0,this.addRemoveClasses($("#"+e.layerWrapper),[],["ic"])):(this.cfg.isGsp=!1,this.addRemoveClasses($("#"+e.layerWrapper),["ic"],[])))},updateSymbol:function(t){var e=this.cfg;t&&t.MinimumToBid&&t.MinimumToBid.CurrencySymbol&&$("#"+e.ebayBidSectionId+"_symb").html(t.MinimumToBid.CurrencySymbol)},updateImportCharge:function(t){var e=this.cfg,i=$("#"+this.impCharge).css("display");this.cfg.isGsp&&(t?(t=raptor.require("com.ebay.raptor.vi.shipping.CalculateImportCharge"),14==this.variant?new t({maxBidAmt:this.maxBidAmt,calcImportChargeUrl:e.calcImportChargeUrl,calculateOnLoad:!0}):($("#"+e.impChId+"_topPIC"+e.wrapper).hide(),i=$("#"+e.defaultImpChargeTxt).html(),$("#"+e.impChBidTxtId+e.value).hide(),$("#"+e.impChBidTxtId+e.value+"Err").hide(),this.util.displayContent(e.impChId,i,e.value,e.wrapper),new t({impChIdLink:e.impChId+"Lnk",maxBidAmt:this.maxBidAmt,impChIdCnt:e.impChId+e.value,calcImportChargeUrl:e.calcImportChargeUrl,impChBidTxtId:e.impChBidTxtId+e.value}))):($("#"+e.impChId+e.wrapper).hide(),this.impCharge?((i=$("#"+this.impCharge+" #impchCost ").html())&&""!=i?14==this.variant?$("#"+e.impChId+"_topPIC"+e.value).html($("#"+e.aprroxTopICId).html().replace("##2##",i)):($("#"+e.impChId+"_topPIC"+e.value).html(i),$("#"+e.impChBidTxtId+"_topPIC"+e.value).show()):($("#"+e.impChId+"_topPIC"+e.value).hide(),14!=this.variant&&$("#"+e.impChBidTxtId+"_topPIC"+e.value).hide(),$("#"+e.impChId+"_topPICErr").show()),$("#"+e.impChId+"_topPIC"+e.wrapper).show()):$("#"+e.impChId+"_topPIC"+e.wrapper).hide()))},isFreeShipping:function(){var t=this.cfg;return 0<$(".sh-CostBB").size()&&$(".sh-CostBB").html()==t.freeShipLabel},updateShipping:function(){var t=this.cfg,e=this.shipping;e?($("#"+t.layerWrapper).removeClass("sErr"),t.shippingId&&e&&($("#"+t.olyId+" .dummy").html(e),(e=$("#"+t.olyId+" .dummy span:first-child").html())&&(14==this.variant?this.isFreeShipping()?$("#"+t.shippingId+t.value).html($("#"+t.freeShippingNewId).html()):$("#"+t.shippingId+t.value).html($("#"+t.shipAmtNewId).html().replace("##2##",e)):6==this.variant&&this.isFreeShipping()?$("#"+t.shippingId+t.value).html(t.freeTxt):$("#"+t.shippingId+t.value).html(e)),(e=$("#"+t.olyId+" .dummy"))&&e.find("#convetedPriceId").html()?14==this.variant?$("#"+t.shippingId+t.approx).html(this.appendApproxTxt(e.find("#convetedPriceId").html())):$("#"+t.shippingId+t.approx).html(e.find("#convetedPriceId").html()):14==this.variant&&$("#"+t.layerWrapper+" .shipApproxTop").hide(),$("#"+t.shippingId+t.wrapper).show())):(e=14==this.variant?$("#"+t.defaultShpTxtNew).html():$("#"+t.defaultShpTxt).html(),$("#"+t.shippingId+t.value).html(e),$("#"+t.layerWrapper).addClass("sErr"),14==this.variant?$("#"+t.layerWrapper+" .shipApproxTop").hide():$("#"+t.shippingId+"_acc_approx").hide())},updateTimeLeft:function(t,e){var i=this.cfg,n="";$("#"+i.timeLeftId+i.value).removeClass(i.lessTimeCss),$("#"+i.timeLeftId+i.value).removeClass("medHotRedTime"),$("#"+i.timeLeftId+i.value).removeClass("hotRedTime"),t&&(formatCfg={dayTxt:i.dayTxt,dayCharTxt:i.dayCharTxt,hourTxt:i.hourTxt,hoursTxt:i.hoursTxt,hourCharTxt:i.hourCharTxt,minuteCharTxt:i.minuteCharTxt,secondCharTxt:i.secondCharTxt,cssElemId:i.timeLeftId+i.value,css:i.lessTimeCss},3>t.hour&&(formatCfg.css="medHotRedTime",1>t.hour&&(formatCfg.css="hotRedTime")),n=this.bidUtil.timeLeftFormat(t,formatCfg,!1,i.enableAFAlways),14==this.variant&&(n=i.timeLeftDynTxt.replace("##2##",n)),e?this.util.displayContent(i.timeLeftId,n,i.value):this.util.displayContent(i.timeLeftId,n,i.value,i.wrapper),this.pubsub=raptor.require("pubsub"),i.isAccessibilityOffScreenTimerOn&&this.pubsub.publish("OFFSCREEN_BID",{timerId:"offscreenTimerLayer",isOffScreenOnBidLayer:1,insertionPoint:$(".bidWrap"),timeLeft:t,sourceOfTimer:$(".timeLeftVal")}))},updateMaximumBid:function(t,e){var i=this.cfg;if(bidderStatus=this.BidderStatus.valueOf(t.ViewerItemRelation),e&&t&&t.MaximumBid){if(14==this.variant)$("#"+i.ebayBidSectionId+"_currMax"+i.value).html(t.MaximumBid.MoneyStandard);else{var n=(s=t.MaximumBid.MoneyStandard).indexOf(t.MaximumBid.CleanAmount),s=s.substring(0,n);$("#"+i.ebayBidSectionId+"_currMax"+i.value).html(t.MaximumBid.MoneyStandard),$("#"+i.ebayBidSectionId+"_currMax"+i.value+"1").html(s),$("#"+i.ebayBidSectionId+"_currMax"+i.value+"2").html(t.MaximumBid.CleanAmount)}t.MaximumBidLocal&&(14==this.variant?$("#"+i.ebayBidSectionId+"_currMax"+i.value+i.approx).html($("#"+i.approxAmtNewId).html().replace("##2##",t.MaximumBidLocal.MoneyStandard)):$("#"+i.ebayBidSectionId+"_currMax"+i.value+i.approx).html(t.MaximumBidLocal.MoneyStandard)),$("#"+i.ebayBidSectionId+"_currMax").show()}else $("#"+i.ebayBidSectionId+"_currMax").hide()},updateMinToBid:function(t){this.BidderStatus.valueOf(t.ViewerItemRelation)===this.BidderStatus.HIGHBIDDER?$(".minToBid_14").show():$(".minToBid_14").hide()},updateMinToBidOld:function(t,e){var i,n=this.cfg,s="",r=this.BidderStatus.valueOf(t.ViewerItemRelation),a=t.MaximumBid,o=t.MinimumToBid;r=r===this.BidderStatus.HIGHBIDDER;t.IsAdminView||(t.isAutoRefresh&&r&&a&&o&&this.amountUtils.parseCurrencyByCleanAmt(o.CleanAmount)>this.amountUtils.parseCurrencyByCleanAmt(a.CleanAmount)?(i=14==this.variant?n.minToBidHBDynTxtId:n.minBidHBTxt,s=o.MoneyStandard):(a||o)&&(r&&a?(i=14==this.variant?n.minToBidHBDynTxtId:n.minBidHBTxt,s=a.MoneyStandard):o&&(i=14==this.variant?n.minToBidOBDynTxtId:n.minBidTxt,s=o.MoneyStandard)),s&&(e||12==this.variant||13==this.variant||14==this.variant)?(14==this.variant?$("#"+n.olyId+" .minToBid_14").html($("#"+i).html().replace("##2##",s)).show():$("#"+n.olyId+" .minimumToBid").html($("#"+i).html().replace(n.dummy,s)).show(),$("#"+n.olyId+" .minToBidWrap").show()):$("#"+n.olyId+" .minToBidWrap").hide())},updateCurrBid:function(t,e,i){var n=this.cfg;t&&(this.util.displayContent(n.curBidId,t.MoneyStandard,n.value,n.wrapper),i&&$("#"+n.curBidId+n.lable).html(i)),this.updateApprox(e,n.curBidId)},updateApprox:function(t,e){var i,n=this.cfg;t&&t.MoneyStandard&&e&&(i=t.MoneyStandard,14==this.variant?$("#"+e+n.approx).html(this.appendApproxTxt(i)).show():$("#"+e+n.approx).html(i).show())},appendApproxTxt:function(t){var e=this.cfg;return t?$("#"+e.approxAmtNewId).html().replace("##2##",t):""},confirmBidMsg:function(t){var e=this.cfg,i=null,n=null,s=-1,r=this.BidderStatus.valueOf(t.ViewerItemRelation);r&&(6<=this.variant&&15>this.variant?(r==this.BidderStatus.OUTBIDDER?(t.OutbidBySmartBid?(t.OutbidByMatchingBid?(i=e.maxbid_OUTBIDDER_BY_MATCHING_BID_1,n=e.maxbid_OUTBIDDER_BY_MATCHING_BID_2):(i=e.maxbid_OUTBIDDER_BY_MAX_BID_1,n=e.maxbid_OUTBIDDER_BY_MAX_BID_2),t.isAutoRefresh||(this.smartOutbid=!0)):(i=e.maxbid_OUTBIDDER_BY_INC_BID_1,n=e.maxbid_OUTBIDDER_BY_INC_BID_2,t.isAutoRefresh||(this.smartOutbid=!1)),this.smartOutbid&&t.isAutoRefresh&&(t.OutbidByMatchingBid?(i=e.maxbid_OUTBIDDER_BY_MATCHING_BID_1,n=e.maxbid_OUTBIDDER_BY_MATCHING_BID_2):(i=e.maxbid_OUTBIDDER_BY_MAX_BID_1,n=e.maxbid_OUTBIDDER_BY_MAX_BID_2)),s=0):r==this.BidderStatus.HIGHBIDDER&&(s=3,t.IsReserve&&!t.IsReserveMet?i=e.HIGHBIDDER_RESERVE_NOT_MET:t.IsFirstBid?i=e.maxbid_HIGHBIDDER_FIRST:t.IsOneMaxBidAway?i=e.HIGHBIDDER_1_MAX_BID_AWAY:this.lessThanHour(t.TimeLeft)?i=e.HIGHBIDDER_60_MIN_LEFT:6<=this.variant&&15>this.variant&&t.HighBidderAgain?(i=e.maxbid_HIGHBIDDER_AGAIN_1,n=e.maxbid_HIGHBIDDER_AGAIN_2):i=e.maxbid_HIGHBIDDER_1,this.smartOutbid=!1),i&&-1!==s?(this.updateStatusMsg(s),6<=this.variant&&15>this.variant&&t.HighBidderAgain&&i==e.maxbid_HIGHBIDDER_AGAIN_1?this.displayMsg_maxbid(!0,$("#"+i).html(),null):this.displayMsg_maxbid(!0,$("#"+i).html(),$("#"+n).html())):this.displayMsg(!1),e.bidSmsEnabled&&(6==this.variant||9==this.variant||10==this.variant||11==this.variant||12==this.variant||13==this.variant||7==this.variant&&(r==this.BidderStatus.OUTBIDDER||r==this.BidderStatus.HIGHBIDDER)||8==this.variant&&r==this.BidderStatus.HIGHBIDDER)&&t.BidSmsLayer&&((t=$.parseJSON(t.BidSmsLayer)).doNotShowSMSOptIn||($("#"+e.bidSmsId).show(),$("#"+e.bidSmsCollapseId).show(),t.result&&t.result.mobileNumber&&1==t.result.itemEndingSubscription?(i=t.result.mobileNumber,$("#"+e.bidSmsNumId).html(i.substring(i.indexOf("-")+1,i.length)),$("#"+e.bidSmsImgMb).hide(),$("#"+e.bidSmsImgSc).show(),r==this.BidderStatus.HIGHBIDDER?($("#"+e.bidSmsExpId).hide(),$("#"+e.bidSmsRemExpId).hide(),$("#"+e.bidSmsSuccExpId).show()):r==this.BidderStatus.OUTBIDDER&&($("#"+e.bidSmsExpId).hide(),$("#"+e.bidSmsRemExpId).hide(),$("#"+e.bidSmsSuccExpId).hide())):(t.result&&t.result.mobileNumber&&0==t.result.itemEndingSubscription&&(0!=(i=t.result.mobileNumber).length&&(4==(i=i.split("-")).length&&($("#"+e.bidSmsCty).html("+"+i[0]),$("#"+e.bidSmsCity).val(i[1]),$("#"+e.bidSmsPhone1).val(i[2]),$("#"+e.bidSmsPhone2).val(i[3])))),r==this.BidderStatus.HIGHBIDDER?($("#"+e.bidSmsSuccExpId).hide(),$("#"+e.bidSmsRemExpId).hide(),$("#"+e.bidSmsExpId).show()):r==this.BidderStatus.OUTBIDDER&&($("#"+e.bidSmsExpId).hide(),$("#"+e.bidSmsRemExpId).hide(),$("#"+e.bidSmsSuccExpId).hide()))),t.delayTimeInMinutes&&$("#"+e.bidSmsElapTime).html(t.delayTimeInMinutes),t.countryISDCode&&$("#"+e.bidSmsCty).html("+"+t.countryISDCode))):(r==this.BidderStatus.OUTBIDDER?(t.OutbidBySmartBid?(i=e.OUTBIDDER_BY_SMART_BID,t.isAutoRefresh||(this.smartOutbid=!0)):(i=e.OUTBIDDER,t.isAutoRefresh||(this.smartOutbid=!1)),this.smartOutbid&&t.isAutoRefresh&&(i=e.OUTBIDDER_BY_SMART_BID),s=0):r==this.BidderStatus.HIGHBIDDER&&(s=3,i=t.IsReserve&&!t.IsReserveMet?e.HIGHBIDDER_RESERVE_NOT_MET:t.IsFirstBid?e.HIGHBIDDER_FIRST:t.IsOneMaxBidAway?e.HIGHBIDDER_1_MAX_BID_AWAY:this.lessThanHour(t.TimeLeft)?e.HIGHBIDDER_60_MIN_LEFT:e.HIGHBIDDER,this.smartOutbid=!1),i&&-1!==s?5==this.variant?(this.util.updateStatusMsg(s,this.statusMsg),this.util.displayContent(e.statusMsgId,$("#"+i).html(),e.value,e.wrapper)):(this.updateStatusMsg(s),this.displayMsg(!0,$("#"+i).html())):this.displayMsg(!1)))},isRedirectErrors:function(e,i){return e===this.BidError.REDIRECT?(top.location.href=i,!0):(e===this.BidError.REFRESH||e===this.BidError.AUCTION_ENDED)&&(t.superclass.closeLayer.apply(this),!0)},updateBidAmtError:function(t,e){var i,n=this.cfg,s=-1;t===this.BidError.DECSEP?(i=n.DECSEP,s=0):t===this.BidError.INVALID_BIDAMOUNT?(i=n.INVALID_BIDAMOUNT,s=0):t===this.BidError.OFFER_AMOUNT_ZERO?(i=n.MIN_BID_ERROR_STATUS,s=0):t===this.BidError.LOW_BIDAMOUNT?(i=6<=this.variant&&15>this.variant?n.maxbid_LOW_BIDAMOUNT:n.LOW_BIDAMOUNT,s=0):t===this.BidError.INVALID_BIDAMOUNT_OF_HIGH_BIDDER?(i=n.INVALID_BIDAMOUNT_OF_HIGH_BIDDER,s=0):t===this.BidError.BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT?(i=n.BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT,s=1):t===this.BidError.BID_GREATER_THAN_BIN&&(i=n.BID_GREATER_THAN_BIN,s=1),i&&-1!==s&&(6<=this.variant&&15>this.variant?(this.updateStatusMsg(s),i==n.maxbid_LOW_BIDAMOUNT?this.displayMsg_maxbid(!0,$("#"+i).html()+e.MinimumToBid.MoneyStandard,null):this.displayMsg_maxbid(!0,$("#"+i).html(),null)):(this.updateStatusMsg(s),this.displayMsg(!0,$("#"+i).html())))},throbber:function(t){var e=this.cfg;this.util.showHide([e.loadingId,e.resumeBidId],t),t&&$("#"+e.resumeBidId+"_ttl").focus()},hideAll:function(t){var e=[(e=this.cfg).loadingId,e.resumeBidId,e.statusMsgId+e.wrapper,e.disclaimerId,e.disclaimerGspId,e.bidSectionId+e.wrapper,e.reviewSectionId+e.wrapper];this.updateHideArray(t,e),this.util.showHide(e,!1)},updateHideArray:function(t,e){var i=this.cfg;t?e.push(i.topPanelId):14==this.variant&&(e.push(i.topHelpTxtId+"_cnt"),$("#"+i.topHelpTxtId).data("exp","0"))},lessThanHour:function(t){return!(!(t=this.bidUtil.timeLeftV(t))||0<t.day||1<t.hour||1===t.hour&&(1<t.minute||1<t.second))},showOrHideEle:function(t,e){$.each(t,(function(){e?$("#"+this).show():$("#"+this).hide()}))},displayMsg:function(t,e){var i=this.cfg;t?($("#"+i.olyId+" .sMsgWrap p").html(e),$("#"+i.olyId+" .sMsgWrap").show()):$("#"+i.olyId+" .sMsgWrap").hide()},displayMsg_maxbid:function(t,e,i){var n=this.cfg;t?($("#"+n.olyId+" .sMsgWrap p.first").html(e),$("#"+n.olyId+" .sMsgWrap p.second").html(i),$("#"+n.olyId+" .sMsgWrap").show()):$("#"+n.olyId+" .sMsgWrap").hide()},updateStatusMsg:function(t){var e=this.cfg;if(-1!==t){var i=$("#"+e.olyId+" .sMsgWrap p"),n=$("#"+e.olyId+" .sMsgWrap i");switch(1==this.variant&&$("#"+e.olyId+" .sMsgWrap div:first-child"),t){case 0:this.addRemoveClasses(i,["mi-su","mi-in","mi-al"],["mi-er"]),this.addRemoveClasses(n,["icmsu","icmin","icmal"],["icmer"]);break;case 1:this.addRemoveClasses(i,["mi-su","mi-er","mi-al"],["mi-in"]),this.addRemoveClasses(n,["icmsu","icmer","icmal"],["icmin"]);break;case 2:this.addRemoveClasses(i,["mi-su","mi-er","mi-in"],["mi-al"]),this.addRemoveClasses(n,["icmsu","icmer","icmin"],["icmal"]);break;case 3:this.addRemoveClasses(i,["mi-al","mi-er","mi-in"],["mi-su"]),this.addRemoveClasses(n,["icmal","icmer","icmin"],["icmsu"])}}},addRemoveClasses:function(t,e,i){for(var n=0;n<e.length;n++)t.removeClass(e[n]);for(n=0;n<i.length;n++)t.addClass(i[n])},getBidValue:function(t){var e,i=this.cfg;return 1==t?(2==this.variant||6<=this.variant&&11>=this.variant)&&(e=$("#"+i.placeBidSectionId+i.value).val(),e=this.amountUtils.sanitizeAmt(e)):2==t?e=$("#"+i.ebayBidSectionId+i.value).val():3==t&&(e=$("#"+i.reviewSectionId+i.value+"_hdn").val(),e=this.amountUtils.sanitizeAmt(e)),e},getBidValue_gamfc:function(t,e){var i,n=this.cfg;return 1==t?(i=$("#"+e+n.value).val(),i=this.amountUtils.sanitizeAmt(i)):2==t?i=$("#"+n.ebayBidSectionId+n.value).val():3==t&&(i=$("#"+n.reviewSectionId+n.value+"_hdn").val(),i=this.amountUtils.sanitizeAmt(i)),i},attachEvt:function(t,e,i,n){var s=this,r=s.cfg,a=n?"keypress":"click",o=function(a){var o=!1;if(n?13==(a.keyCode?a.keyCode:a.which)&&(o=!0):o=!0,o)return r.showReviewScreen&&s.status==s.BidStatus.valueOf("CONFIRMBID")&&(10!=s.variant&&11!=s.variant||1!=e?12==s.variant&&13==s.variant||12==s.variant||13==s.variant||(i=r.bidAgainUrl):i=r.quickBidAgainUrl),12==s.variant||13==s.variant||14==s.variant?s.triggerCall(i,s.getBidValue_gamfc(e,t),!0,null):s.triggerCall(i,s.getBidValue(e),!0,null),!1};$(".pow").off(a+s.evtNS,"#"+t,o),$(".pow").on(a+s.evtNS,"#"+t,o)},focusHdlr:function(){$("#"+this.cfg.olyId+" .inpWrap").addClass("inpFocus")},blurHdlr:function(){$("#"+this.cfg.olyId+" .inpWrap").removeClass("inpFocus")},attachTextBoxEvts:function(){var t=this,e=t.cfg,i=function(){t.focusHdlr()},n=function(){t.blurHdlr()},s=function(){return t.focusHdlr(),$("#"+e.olyId+" .inpWrapSection .inpWrap input").focus(),!1};14==t.variant&&($(".pow").off("click"+t.evtNS,".inpWrapSection .inpWrap",s),$(".pow").on("click"+t.evtNS,".inpWrapSection .inpWrap",s)),$(".pow").off("focus"+t.evtNS,".inpWrap .inpVal",i),$(".pow").on("focus"+t.evtNS,".inpWrap .inpVal",i),$(".pow").off("blur"+t.evtNS,".inpWrap .inpVal",n),$(".pow").on("blur"+t.evtNS,".inpWrap .inpVal",n),$(".pow").on("click"+t.evtNS,".inpWrap .symb",(function(){$("#"+e.olyId+" .inpWrap .inpVal").focus()}))},attachBubbleEvts:function(){var t=this,e=t.cfg,i=function(){2==t.variant&&($("#"+e.rgtBubbleId).show(),$("#"+e.rgtBubbleId+" .closeBut").focus())},n=function(){2==t.variant&&$("#"+e.rgtBubbleId).hide()},s=function(i){var n=i.keyCode?i.keyCode:i.which;i.target&&(13==n?2==t.variant&&"closeBut"==i.target.className&&($("#"+e.rgtBubbleId).hide(),$(".pow #powHlp").focus(),i.preventDefault()):9==n?"closeBut"==i.target.className&&($(".pow .smartBidIns a").focus(),i.preventDefault()):27==n&&($("#"+e.rgtBubbleId).hide(),$(".pow #powHlp").focus(),i.stopPropagation()))};$(".pow").off("click"+t.evtNS,".sh-bubble #powHlp",i),$(".pow").on("click"+t.evtNS,".sh-bubble #powHlp",i),$(".pow").off("click"+t.evtNS,".sh-bubble .hlpOly .closeBut",n),$(".pow").on("click"+t.evtNS,".sh-bubble .hlpOly .closeBut",n),$(".pow").off("keydown"+t.evtNS," #vi_oly_powHelpRightOly",s),$(".pow").on("keydown"+t.evtNS," #vi_oly_powHelpRightOly",s)},layerCleanUp:function(t,e){if($(".pow").off(this.evtNS),this.util&&this.olyCloseHandle&&(this.olyCloseHandle.unsubscribe(),this.olyCloseHandle=null),t&&e){var i=this.removeMaxBidParamPowerbid(e);setTimeout((function(){top.location.href=i}),1)}},removeMaxBidParamPowerbid:function(e){return t.superclass.removeMaxBidParam.apply(this,arguments)},attachCloseButtonEvents:function(){var t=this,e=function(){t.pubsub.publish("_CLOSE_OLAY",{cmpId:"powerBid"})};$(".pow").off("click"+t.evtNS,".powClz",e),$(".pow").on("click"+t.evtNS,".powClz",e),e=function(e){13==e.keyCode&&(t.pubsub.publish("_CLOSE_OLAY",{cmpId:"powerBid"}),e.preventDefault())},$(".pow").off("keydown"+t.evtNS,".powClz",e),$(".pow").on("keydown"+t.evtNS,".powClz",e)},subscribeEvents:function(){var t=this.cfg;this.pubsub.subscribe("IMP_CHARGE_RESPONSE",(function(e){e&&e.impChCost?$("#"+t.impChId+t.value).html($("#"+t.aprroxTopICId).html().replace("##2##",e.impChCost)):($("#"+t.impChId+t.value).hide(),$("#"+t.impChBidTxtId+t.value+"Err").show())}))},attachPowerBidEvts:function(){var e=this.cfg;12==this.variant||13==this.variant||14==this.variant?(this.attachEvt(e.placeBidSectionId+e.btn+"_1",1,e.oneXConfirmUrl),this.attachEvt(e.placeBidSectionId+e.btn+"_2",1,e.twoXConfirmUrl),this.attachEvt(e.placeBidSectionId+e.btn+"_3",1,e.fiveXConfirmUrl)):this.attachEvt(e.placeBidSectionId+e.btn,1,e.powerBidConfirmURL),2!=this.variant&&14!=this.variant?(this.attachEvt(e.ebayBidSectionId+e.btn+"_tx1",2,e.maxbidUrl),this.attachEvt(e.ebayBidSectionId+e.btn+"_tx2",2,e.maxbidUrl)):this.attachEvt(e.ebayBidSectionId+e.btn,2,e.maxbidUrl),this.attachEvt(e.ebayBidSectionId+e.value,2,e.maxbidUrl,!0),this.attachEvt(e.reviewSectionId+e.btn,3,e.reviewConfirmUrl),this.attachTextBoxEvts(),this.attachBubbleEvts(),this.olyCloseHandle||t.superclass.subscribeOlyClose.apply(this),14==this.variant&&(this.subscribeEvents(),this.attachHelpTxtEvts())},collapseCnt:function(t){t&&1==$("#"+t).data("exp")&&($("#"+t+"_cnt").slideUp("fast"),$("#"+t).data("exp","0"),$("#"+t).attr("aria-expanded","false"))},expandCnt:function(t){t&&0==$("#"+t).data("exp")&&($("#"+t+"_cnt").slideDown("fast"),$("#"+t).data("exp","1"),$("#"+t).attr("aria-expanded","true")),this.trending_tracked&&!this.trending_tracked_outbid?$(document).trigger("rover",{sid:"p2047675.l9053"}):this.trending_tracked_outbid=!1},attachHelpTxtEvts:function(){var t=this,e=t.cfg,i=function(){var i=$(this)[0].id;return i&&(i==e.seeMoreHelpId&&($("#"+e.seeMoreHelpId).data("exp","0"),$("#"+e.seeMoreHelpId).hide()),1==$("#"+i).data("exp")?t.collapseCnt(i):t.expandCnt(i)),!1};$(".pow").off("click"+t.evtNS,"#"+e.topHelpTxtId,i),$(".pow").on("click"+t.evtNS,"#"+e.topHelpTxtId,i),$(".pow").off("click"+t.evtNS,"#"+e.seeMoreHelpId,i),$(".pow").on("click"+t.evtNS,"#"+e.seeMoreHelpId,i)},updateCurrBidColor:function(t,e){var i=this.cfg,n=this.BidderStatus.valueOf(t.ViewerItemRelation);t&&e&&(n&&n===this.BidderStatus.HIGHBIDDER?($("#"+i.curBidId+i.value).removeClass("errCol"),$("#"+i.curBidId+i.value).addClass("sucCol")):n&&n===this.BidderStatus.OUTBIDDER?($("#"+i.curBidId+i.value).removeClass("sucCol"),$("#"+i.curBidId+i.value).addClass("errCol")):($("#"+i.curBidId+i.value).removeClass("sucCol"),$("#"+i.curBidId+i.value).removeClass("errCol")))},valiadteInput:function(t){return t&&0!=this.hasNumbers(t)?(this.invalidBidAmountErr=null,!1):(this.invalidBidAmountErr=this.BidError.valueOf("INVALID_BIDAMOUNT"),this.updateBidAmtError(this.invalidBidAmountErr),this.userAction=!1,!0)},hasNumbers:function(t){return!!t&&/\d/g.test(t)}},t})),raptor.defineClass("com.ebay.raptor.vi.bid.powerbid.inlineSurvey.inlineSurvey",{},(function(){var t=function(t){this.cfg=t,this.initValues(),this.subscribeEvents(),this.attachSurveyEvents(".inlineFeedback")};return t.prototype={initValues:function(){this.pubsub=raptor.require("pubsub"),this.submitClicked=this.surveySubmitted=!1},subscribeEvents:function(){var t=this,e=t.cfg;t.pubsub.channel(e.linkId+"Oly").subscribe("_OLY_CLS_SVC",(function(){t.submitClicked?($("#"+e.inlineFeedbackId+"_result").show(),$("#"+e.inlineFeedbackId+"_result").focus()):$("#"+e.linkId).focus(),t.submitClicked=!1}),t)},attachSurveyEvents:function(t){var e=this,i=e.cfg;$("#"+i.inlineFeedbackId+"_submit").bind("click"+t,(function(){var t=i.inlineFeedbackId+"_frm",n=e.getFmDoc(t);n&&(n.open(),n.write('<html><head></head><body><form id="surveySubmitForm" action="'+i.surveyUrl+'" method="post"><input type="hidden" name="rate" id="rateHidden" value=""/><input type="hidden" name="guid" id="guidHidden" value=""/><input type="hidden" name="userComments" id="userCommentsHidden" value=""/><input type="hidden" name="surveyName" id="surveyNameHidden" value=""/><input type="hidden" name="surveyDate" id="surveyDateHidden" value=""/><input type="hidden" name="treatments" id="treatmentsHidden" value=""/><input type="hidden" name="dom" id="domHidden" value=""/><input type="hidden" name="page_url" id="pageUrlHidden" value=""/></form></body></html>'),n.close()),e.submitClicked=!0,e.pubsub.publish("_CLOSE_OLAY",{cmpId:i.linkId+"Oly"}),e.submitForm(t),$("#powerBidSurvey").hide()}));var n=i.defaultTxt;$("#"+i.inlineFeedbackId+"_comments").focus((function(){$(this).val()==n&&$(this).val("")})).blur((function(){""==$(this).val()&&$(this).val(n)})),$("#"+i.inlineFeedbackId+"_cancel").bind("click",(function(){e.pubsub.publish("_CLOSE_OLAY",{cmpId:i.linkId+"Oly"}),$("#"+i.inlineFeedbackId+"_comments").val(n)}))},encodePageDom:function(){var t=document.getElementsByTagName("html")[0].innerHTML;return encodeURIComponent("<html>"+t+"</html>")},submitForm:function(t){var e=this.cfg,i=e.surveyName;try{iDoc=this.getFmDoc(t),iDoc.getElementById("surveyNameHidden").value=i}catch(t){return}t=raptor.require("ebay.cookies");var n=this.convertDateToUTC(new Date);iDoc.getElementById("rateHidden").value=$("input[name="+e.inlineFeedbackId+"_radio]:checked").val(),iDoc.getElementById("guidHidden").value=t.readCookie("npii","tguid"),iDoc.getElementById("surveyDateHidden").value=n,iDoc.getElementById("surveyNameHidden").value=i,iDoc.getElementById("domHidden").value=this.encodePageDom(),iDoc.getElementById("pageUrlHidden").value=encodeURIComponent(location.href),e.treatments&&(iDoc.getElementById("treatmentsHidden").value=e.treatments),(i=encodeURIComponent($("#"+e.inlineFeedbackId+"_comments").val()))==encodeURIComponent(e.defaultTxt)&&(i=""),iDoc.getElementById("userCommentsHidden").value=i,iDoc.getElementById("surveySubmitForm").submit()},convertDateToUTC:function(t){return t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDate()+"-"+t.getUTCHours()+"-"+t.getUTCMinutes()+"-"+t.getUTCSeconds()},getFmDoc:function(t){var e,i=$("#"+t)[0];return i.contentDocument?e=i.contentDocument:i.contentWindow?e=i.contentWindow.document:window.frames[t]&&(e=window.frames[t].document),e},encodePageDom:function(){var t=document.getElementsByTagName("html")[0].innerHTML;return encodeURIComponent("<html>"+t+"</html>")}},t})),raptor.defineClass("raptor.merch.MerchManager",(function(){return{init:function(t){var e=this;e.m=t,e.url=t.url,e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("MERCH_RE_TRIGGER",(function(t){e.trigger(t)}),this),e.profiler=raptor.require("ebay.profiler.Profiler"),e.sbfFlagValue=raptor.require("ebay.cookies").getBitFlag(raptor.require("ebay.cookies").readCookie("ebay","sbf"),20),e.customCallbackHandler?e.pubsub.subscribe("MERCH_INIT",(function(){e.sendUrl()}),this):e.m.enableOnScroll?(e.scrollHandler=function(){e.callMerchOnScroll()},$(window).bind("scroll",e.scrollHandler)):$(document).ready((function(){window.setTimeout((function(){e.sendUrl()}),0)}))},trigger:function(t){this.m=t,this.url=t.url,this.sendUrl()},callMerchOnScroll:function(){var t=this.m.pids,e=this.m.th,i=$(window).scrollTop();void 0!==(t=$("#merch_html_"+t[0]))&&null!=t&&(void 0!==(t=t.offset())&&null!=t)&&((t=t.top)<=i+$(window).height()+e&&this.sendUrl())},sendUrl:function(){var t=this.url,e=encodeURIComponent(window.location.href);this.startTime=(new Date).getTime(),(t+="&srcUrl="+(e=e.replace(/'/g,"%27")))&&(this.getJson(t),this.m.enableOnScroll&&$(window).unbind("scroll",this.scrollHandler))},getJson:function(t){var e=this;window.merchCallBack=function(t){e.render(t)},e.m.loadJsAsync?e.loadJSAsync(t+"&callback=parent.window.merchCallBack"):$.getJSON(t+"&callback=?",(function(t){e.render(t)}),e)},render:function(t){var e=this.m.merchRaptorEnabled?t:t.data.map;if(this.customCallbackHandler)this.pubsub.publish("MERCH_RESPONSE",{data:t});else for(var i in e)if(t=e[i]){var n=document.getElementById("merch_html_"+i);n&&void 0!==t.html&&""!=t.html&&(this.loadCss(t.cssUrl),n.style.display="none",n.innerHTML=t.html,n.style.display="block",this.loadJs(t.jsUrl),this.executeScripts(t.html))}this.setSBFFlag(),t=(new Date).getTime()-this.startTime,"undefined"!=typeof oGaugeInfo&&this.profiler.addParam("i_5i",t)},executeScripts:function(t){for(var e,i=/<script\b[\s\S]*?>([\s\S]*?)<\/script>/gi;e=i.exec(t);)if(e=e[1]){var n=this.getHead(),s=this.createScript();s.type="text/javascript",s.text=e,n.appendChild(s)}},setSBFFlag:function(){if(this.sbfFlagValue){var t=raptor.require("ebay.cookies").setBitFlag(raptor.require("ebay.cookies").readCookie("ebay","sbf"),20,this.sbfFlagValue);raptor.require("ebay.cookies").writeCookielet("ebay","sbf",t)}},getHead:function(){return document.getElementsByTagName("head")[0]},createScript:function(){return document.createElement("script")},loadJSAsync:function(t){var e,i=document.createElement("iframe");(i.frameElement||i).style.cssText="width: 0; height: 0; border: 0",(i.frameElement||i).src="javascript:false",(e=(e=document.getElementsByTagName("script"))[e.length-1]).parentNode.insertBefore(i,e),(i=i.contentWindow.document).open().write("<body onload=\"var js = document.createElement('script');js.src = '"+t+"';document.body.appendChild(js);\">"),i.close()},loadCss:function(t){if(void 0!==t&&t)for(var e=0;e<t.length;e++)this.loadCssHelper(t[e])},loadCssHelper:function(t){t&&("undefined"!=typeof spf&&spf&&"function"==typeof spf.loadStyle?spf.loadStyle(t):$("head").append($("<link/>").attr({type:"text/css",rel:"stylesheet",href:t})))},loadJs:function(t){if(void 0!==t&&t)for(var e=0;e<t.length;e++)this.loadJsHelper(t[e])},loadJsHelper:function(t){t&&("undefined"!=typeof spf&&spf&&"function"==typeof spf.loadScript?spf.loadScript(t,(function(){})):$.ajax({type:"GET",url:t,success:function(){},dataType:"script",cache:!0}))}}})),raptor.defineClass("raptor.ads.AdsManager",(function(){return{init:function(t){var e=this;if(e.m=t,e.url=t.url,e.mskuVarId=null,e.mskuVarTimerId=null,e.mskuVarRefreshRequest=null,e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("Ads_RE_TRIGGER",(function(t){e.trigger(t)}),this),e.profiler=raptor.require("ebay.profiler.Profiler"),e.sbfFlagValue=raptor.require("ebay.cookies").getBitFlag(raptor.require("ebay.cookies").readCookie("ebay","sbf"),20),e.url&&(e.customCallbackHandler?e.pubsub.subscribe("Ads_INIT",(function(){e.sendUrl()}),this):e.m.enableOnScroll?(e.scrollHandler=function(){e.callAdsOnScroll()},$(window).bind("scroll",e.scrollHandler)):$(document).ready((function(){window.setTimeout((function(){e.sendUrl()}),0)}))),t&&t.isAsyncEnabled&&window.merch){$(document).on("_ADS_NAPKIN_RESPONSE",(function(){e.processNapkinResponse(e)})),window.merch.napkinResponseHandler?window.merch.napkinResponseHandler(!0):window.merch.napkinResponseRequested=!0;var i=function(){window.merch&&window.merch.collapsePlmtArray&&0<window.merch.collapsePlmtArray.length&&window.merch.collapsePlacement({pIds:window.merch.collapsePlmtArray})};$(window).on("load",(function(){i()})),i()}e.refreshPlacements=e.refreshPlacements.bind(e),e.onMskuMerchRefresh=e.onMskuMerchRefresh.bind(e),t.enableAtfMskuVarRefresh&&e.pubsub.subscribe("VI_MSKU_VAR_CHANGE",e.onMskuMerchRefresh),e.handleVimRefresh=e.handleVimRefresh.bind(e),t.enableMerchRefresh&&document.addEventListener("vim:merch-refresh-nori",e.handleVimRefresh)},handleVimRefresh:function(t){(t=t&&t.detail)&&t.modules&&this.render(t)},onMskuMerchRefresh:function(t){(t=String(t))!==this.mskuVarId&&(this.mskuVarId=t,clearTimeout(this.mskuVarTimerId),this.mskuVarTimerId=setTimeout(this.refreshPlacements,this.m.atfMskuVarRefreshDelay),this.mskuVarRefreshRequest&&(this.mskuVarRefreshRequest.abort(),this.mskuVarRefreshRequest=null))},refreshPlacements:function(){var t=this.m.atfPlacementIds;t&&t.length&&((t=this.getVisiblePlacementsIds(t)).length&&(this.renderPlaceholders(t),this.loadPlacements(t)))},hidePlaceholder:function(t){$("#"+this.pidToDomId(t)).removeClass("merch-placement-loading")},renderPlaceholders:function(t){var e=this;t.forEach((function(t){$("#"+e.pidToDomId(t)).addClass("merch-placement-loading")}))},getVisiblePlacementsIds:function(t){var e=this;t=t.map((function(t){return"#"+e.pidToDomId(t)})).join(",");return $(t).toArray().filter((function(t){return 0<$(".carousel",t).size()})).map((function(t){return t=$(t).attr("id").match(/\d+/)[0],Number(t)}))},loadPlacements:function(t){var e=t.map((function(t){return"PLACEMENT_"+t})).join(","),i=this,n=i.createUrl(e),s=(e=i.prepareRequestContext(i.m.body,"ATF_MSKU_REFRESH",e),i.getVarIdFromPayload(e));n=i.postJson(n,e,{timeout:i.m.atfMskuVarRefreshTimeout,success:function(e){i.onLoadPlacementsSuccess(t,e,s)},failure:function(e,n){i.onLoadPlacementsError(t,n,s)}});i.mskuVarRefreshRequest=n},getVarIdFromPayload:function(t){try{return JSON.parse(t).context.msku_variant_id}catch(t){return null}},onLoadPlacementsError:function(t,e){if("abort"!==e)for(var i=0;i<t.length;i++)this.hidePlaceholder(t[i])},onLoadPlacementsSuccess:function(t,e){for(var i,n,s=e.modules,r={},a=this,o=0;o<t.length;o++){var l=t[o],d=s&&s["PLACEMENT_"+l];if(d)for(var c in d){var u=d[c];u[0]&&"CSS_URL"==u[0].type&&""!==u[0].content&&!i?i=u[0].content:"HTML"==u.type?r[l]=u.content:u[0]&&"JS_URL"==u[0].type&&""!==u[0].content&&!n&&(n=u[0].content)}else a.hidePlaceholder(l)}a.loadCss(i,(function(){for(var t in r)$("#"+a.pidToDomId(t)).removeClass("merch-placement-loading").html(r[t]);a.loadJs(n,(function(){for(var t in r)a.executeScripts(r[t]);"undefined"!=typeof $_mod_merch&&$_mod_merch.ready()}))}))},pidToDomId:function(t){return"placement_html_"+t},processNapkinResponse:function(t){$(document).ready((function(){if(window.merch&&window.merch.napkinResponseArray&&0<window.merch.napkinResponseArray.length)for(;0<window.merch.napkinResponseArray.length;){var e=window.merch.napkinResponseArray[0];try{t.render(JSON.parse(e.responseText),e.pIds)}catch(t){}window.merch.napkinResponseArray.splice(0,1)}}))},trigger:function(t){this.m=t,this.url=t.url,this.sendUrl()},callAdsOnScroll:function(){var t=this.m.adIds,e=this.m.threshold,i=$(window).scrollTop();void 0!==(t=$("#placement_html_"+t[0]))&&null!=t&&(void 0!==(t=t.offset())&&null!=t)&&((t=t.top)<=i+$(window).height()+e&&this.sendUrl(!0))},prepareRequestContext:function(t,e,i){try{var n=$("#sel-msku-variation").text(),s=JSON.parse(t);if(n&&"-1"!==n){var r=window.getVariationByVariationId(n,!0);Object.assign(s.context,{msku_variant_id:n,selected_msku_aspects:JSON.stringify(r)})}else delete s.context.msku_variant_id,delete s.context.selected_msku_aspects;return e&&(s.context.call_type=e),i&&(s.context.modules=i),JSON.stringify(s)}catch(e){return t}},createUrl:function(t){return t?this.url+"?modules="+t:""},sendUrl:function(t){var e=JSON.parse(this.m.body),i=this.createUrl(e.context.modules);e=e.context.item_id;this.startTime=(new Date).getTime(),this.m.enableBtfFetch?this.getJson(e):i&&(e=this.m.body,t&&this.m.enableBtfMskuVariationContext&&(e=this.prepareRequestContext(e)),this.postJson(i,e)),this.m.enableOnScroll&&$(window).unbind("scroll",this.scrollHandler)},getJson:function(t){if(!t)return!1;var e=this;return e.startAjaxTimer=(new Date).getTime(),$.ajax({url:"/itemmodules/"+t+"?modules=ADS,ADS_MERCH&ads_group=MERCH_BTF",type:"GET",headers:JSON.parse(e.m.headers),dataType:"json",contentType:"application/json",success:function(t){e.ajaxResponseTime=(new Date).getTime()-e.startAjaxTimer,e.render(t)},error:function(t){console.info(t)}})},postJson:function(t,e,i){i=i||{};var n=this;if(window.adsCallBack=function(t){n.render(t)},n.m.loadJsAsync)n.loadJSAsync(url+"&callback=parent.window.adsCallBack");else if(null!=e&&null!=n.m.headers)return n.startAjaxTimer=(new Date).getTime(),$.ajax({timeout:i.timeout,url:t,type:"POST",data:e,headers:JSON.parse(n.m.headers),dataType:"json",contentType:"application/json",success:function(t){n.ajaxResponseTime=(new Date).getTime()-n.startAjaxTimer,i.success?i.success(t):n.render(t)},error:function(t,e){i.failure?i.failure(t,e):console.info(t)}})},render:function(t,e){var i=this,n=i.ajaxResponseTime,s=window.merch&&window.merch.trackingJson?window.merch.trackingJson:void 0;if(t.states&&t.states[0]&&t.states[0].state&&t.states[0].state.model&&(t.modules=t.states[0].state.model),i.customCallbackHandler)i.pubsub.publish("Ads_RESPONSE",{data:t});else if(t.modules&&"undefined"!=t.modules){var r,a,o,l=/\d+/g,d={},c={};for(o in t.modules){var u=o.match(l),h="placement_html_"+u,p=document.getElementById(h);if(p){for(var m in t.modules[o])(p=t.modules[o][m])[0]&&"CSS_URL"==p[0].type&&""!==p[0].content&&void 0===a?a=p[0].content:"HTML"==p.type?d[h]=p.content:p[0]&&"JS_URL"==p[0].type&&""!==p[0].content&&void 0===r&&(r=p[0].content);e&&t.modules[o]&&t.modules[o].meta&&t.modules[o].meta.trackingList&&t.modules[o].meta.trackingList[0]&&(c[u]=t.modules[o].meta.trackingList[0])}}if(e&&window.merch)for(var f in e)h="placement_html_"+e[f],d[h]||(window.merch.collapsePlacement({pIds:[e[f]]}),i.appendTrackingClientData(e[f],"|data:empty"));for(var g in d)p=document.getElementById(g),e?p.style.visibility="hidden":p.style.display="none",p.innerHTML=d[g];i.loadCss(a,(function(){for(var a in d){var o=document.getElementById(a);e?o.style.visibility="visible":o.style.display="block"}i.m.customCallbackHandler&&i.pubsub.publish("Ads_NORI_RESPONSE",{response:t,duration:n}),i.loadJs(r,(function(){for(var t in d)i.executeScripts(d[t]);"undefined"!=typeof $_mod_merch&&$_mod_merch.ready()}));try{if(c&&s)for(a in c){var l=c[a],u=s[a]&&s[a][0]?s[a][0].eventProperty:void 0;l&&u&&(l.eventProperty||(l.eventProperty={}),u.serverdata&&(l.eventProperty.serverdata=u.serverdata),u.clientdata&&(l.eventProperty.clientdata=u.clientdata),u.noridata&&(l.eventProperty.noridata=u.noridata)),i.updateTrackingInfo(a,l)}}catch(t){}}))}else e&&window.merch&&window.merch.collapsePlacement({pIds:e});i.setSBFFlag(),l=(new Date).getTime()-i.startTime,"undefined"!=typeof oGaugeInfo&&i.profiler.addParam("i_5i",l)},executeScripts:function(t){for(var e,i=/<script\b[\s\S]*?>([\s\S]*?)<\/script>/gi;e=i.exec(t);)if(e=e[1]){var n=this.getHead(),s=this.createScript();s.type="text/javascript",s.text=e,n.appendChild(s)}},setSBFFlag:function(){if(this.sbfFlagValue){var t=raptor.require("ebay.cookies").setBitFlag(raptor.require("ebay.cookies").readCookie("ebay","sbf"),20,this.sbfFlagValue);raptor.require("ebay.cookies").writeCookielet("ebay","sbf",t)}},getHead:function(){return document.getElementsByTagName("head")[0]},createScript:function(){return document.createElement("script")},loadJSAsync:function(t){var e,i=document.createElement("iframe");(i.frameElement||i).style.cssText="width: 0; height: 0; border: 0",(i.frameElement||i).src="javascript:false",(e=(e=document.getElementsByTagName("script"))[e.length-1]).parentNode.insertBefore(i,e),(i=i.contentWindow.document).open().write("<body onload=\"var js = document.createElement('script');js.src = '"+t+"';document.body.appendChild(js);\">"),i.close()},loadCss:function(t,e){void 0!==t&&t&&this.loadCssHelper(t,e)},loadCssHelper:function(t,e){t&&(this.isCssAlreadyLoaded(t)?e():"undefined"!=typeof spf&&spf&&"function"==typeof spf.loadStyle?spf.loadStyle(t):$.ajax({url:t,success:function(t){$("head").append("<style>"+t+"</style>"),e()}}))},loadJs:function(t,e){void 0!==t&&t&&this.loadJsHelper(t,e)},loadJsHelper:function(t,e){t&&(this.isJsAlreadyLoaded(t)?e():"undefined"!=typeof spf&&spf&&"function"==typeof spf.loadScript?spf.loadScript(t,(function(){})):"undefined"==typeof $_mod_merch?$.ajax({type:"GET",url:t,success:function(){},complete:function(){e()},dataType:"script",cache:!0}):e())},isJsAlreadyLoaded:function(t){return this.isResourceAlreadyLoaded(t,"script","src")},isCssAlreadyLoaded:function(t){return this.isResourceAlreadyLoaded(t,"link","href")},isResourceAlreadyLoaded:function(t,e,i){if(t){for(var n=(e=document.getElementsByTagName(e)).length;n--;)if(e[n][i]==t)return!0;return!1}},updateTrackingInfo:function(t,e){window.merch&&window.merch.trackingJson&&(window.merch.trackingJson[t]=[e])},appendTrackingClientData:function(t,e){if(window.merch&&window.merch.trackingJson){var i=window.merch.trackingJson;i[t]&&i[t][0]&&i[t][0].eventProperty&&i[t][0].eventProperty.clientdata&&(i[t][0].eventProperty.clientdata+=e)}}}})),function(){var t=raptor.require("raptor.rtm.RtmManager",!1,null,!0);t&&(t.loadJSViaNonBlockingAndAsync=function(t){var e,i,n=document.createElement("iframe");n.src="javascript:false",n.title="",n.role="presentation",(n.frameElement||n).style.cssText="width: 0; height: 0; border: 0",$("body").append(n);try{i=n.contentWindow.document}catch(t){e=document.domain,n.src="javascript:var d=document.open();d.domain='"+e+"';void(0);",i=n.contentWindow.document}i.open()._l=function(){var i=this.createElement("script");e&&(this.domain=e),i.id="js-iframe-async",i.src=t,this.body.appendChild(i)},i.write('<body onload="document._l();">'),i.close()})}(),define("raptor/domProxy",["raptor"],(function(t,e){var i=function(e){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))throw t.createError(Error('Target element not found: "'+i+'"'))}return e},n=function(t){var i=e.find("raptor/pubsub");i&&i.publish("dom/beforeRemove",{el:t})},s={forEachChildEl:function(t,e,i){s.forEachChild(t,e,i,1)},forEachChild:function(t,e,i,n){if(t)for(var s=0,r=(t=t.childNodes).length;s<r;s++){var a=t[s];a&&(null===n||n===a.nodeType)&&e.call(i,a)}},detach:function(t){(t=i(t)).parentNode.removeChild(t)},appendTo:function(t,e){i(e).appendChild(i(t))},remove:function(t){t=i(t),n(t),t.parentNode&&t.parentNode.removeChild(t)},removeChildren:function(t){t=i(t),s.forEachChildEl(t,(function(t){n(t)})),t.innerHTML=""},replace:function(t,e){e=i(e),n(e),e.parentNode.replaceChild(i(t),e)},replaceChildrenOf:function(t,e){e=i(e),s.forEachChildEl(e,(function(t){n(t)})),e.innerHTML="",e.appendChild(i(t))},insertBefore:function(t,e){(e=i(e)).parentNode.insertBefore(i(t),e)},insertAfter:function(t,e){e=i(e),t=i(t);var n=e.nextSibling,s=e.parentNode;n?s.insertBefore(t,n):s.appendChild(t)},prependTo:function(t,e){(e=i(e)).insertBefore(i(t),e.firstChild||null)}};return s})),define("raptor/renderer/RenderResultProxy",(function(t){var e=t("raptor/domProxy"),i=function(t,e){this.html=t,this.context=e,this._node=null};return i.prototype={getWidget:function(){if(!this.widgetDefs)throw Error("Cannot call getWidget() until after HTML fragment is added to DOM.");return this.widgetDefs.length?this.widgetDefs[0].widget:void 0},getWidgets:function(t){if(!this.widgetDefs)throw Error("Cannot call getWidgets() until after HTML fragment is added to DOM.");var e,i;if(t)for(e=[],i=0;i<this.widgetDefs.length;i++){var n=this.widgetDefs[i].widget;t(n)&&e.push(n)}else for(e=Array(this.widgetDefs.length),i=0;i<this.widgetDefs.length;i++)e[i]=this.widgetDefs[i].widget;return e},_afterInsert:function(){var e=t.find("raptor/widgets");return e&&(this.widgetDefs=e.getWidgetsContext(this.context).widgets),(e=t.find("raptor/pubsub"))&&e.publish("raptor/renderer/renderedToDOM",{node:this.getNode(),context:this.context}),this},appendTo:function(t){return e.appendTo(this.getNode(),t),this._afterInsert()},replace:function(t){return e.replace(this.getNode(),t),this._afterInsert()},replaceChildrenOf:function(t){return e.replaceChildrenOf(this.getNode(),t),this._afterInsert()},insertBefore:function(t){return e.insertBefore(this.getNode(),t),this._afterInsert()},insertAfter:function(t){return e.insertAfter(this.getNode(),t),this._afterInsert()},prependTo:function(t){return e.prependTo(this.getNode(),t),this._afterInsert()},getNode:function(){var t,e,i=this._node;if(!i){if((e=document.createElement("body")).innerHTML=this.html,1===e.childNodes.length)i=e.childNodes[0];else for(i=document.createDocumentFragment();t=e.firstChild;)i.appendChild(t);this._node=i}return i}},i})),define("raptor/renderer",["raptor"],(function(t,e){var i=e("raptor/render-context"),n=e("raptor/renderer/RenderResultProxy");return{render:function(e,s,r){if("string"==typeof e){if(!(l=t.find(e))&&(e.endsWith("Renderer")||(l=e.lastIndexOf("/"),l=t.find(e+"/"+e.substring(l+1)+"Renderer")),!l))throw t.createError(Error('Renderer not found with name "'+e+'"'));e=l}var a=e.render||e.process||e;if("function"!=typeof a)throw t.createError(Error('Not a valid renderer: "'+e+'". Renderer must be an object with "render" or "process" function or renderer must be a function.'));var o,l=function(){o=a.call(e,s||{},r)};return r?o=r.captureString(l)||o:(r=i.createContext(),l(),o||(o=r.getOutput())),new n(o,r)},renderTemplate:function(t,i,n){return this.render((function(n,s){e("raptor/templating").render(t,i,s)}),{},n)}}})),define.extend("raptor/widgets",(function(t,e){var i=t("raptor/logging").logger("raptor/widgets"),n={},s=t("raptor"),r=Array.isArray,a=s.createError,o=t("raptor/widgets/Widget"),l=function(){};l.prototype={_remove:function(t,e){var i=this[e];r(i)?this[e]=i.filter((function(e){return e!==t})):delete this[e]},_add:function(t,e,i){var n=this[e];n?r(n)?n.push(t):this[e]=[n,t]:this[e]=i?[t]:t},getWidget:function(t){return this[t]},getWidgets:function(t){return(t=this[t])?r(t)?t:[t]:[]}};var d=function(r,d,c,u,h,p,m,f){if(!t.exists(r))throw a(Error('Unable to initialize widget of type "'+r+'". The class for the widget was not found.'));var g,v=t(r);if(i.debug('Creating widget of type "'+r+'" ('+d+")"),v.initWidget)u.elId=d,u.events=p,g=v,v.onReady||(v.onReady=e.onReady);else{var b,I=function(){};if(I.prototype=b=v.prototype,g=new I,o.makeWidget(g,b),g.registerMessages(["beforeDestroy","destroy"],!1),(I=b.events||v.events)&&g.registerMessages(I,!1),d&&(g._id=d,g.el=g.getEl()),v.getName||(v.getName=function(){return r}),b.constructor=v,o.legacy&&(g._parentWidget=m),p&&(g._events=function(t){var e={};return s.forEach(t,(function(t){e[t[0]]={target:t[1],props:t[2]}}),this),e}(p)),g.widgets=new l,n[d]=g,c&&h){var y;if(c.endsWith("[]")&&(c=c.slice(0,-2),y=!0),g._assignedId=c,g._scope=h,!(d=n[h]))throw a(Error("Parent scope not found: "+h));d.widgets._add(g,c,y),o.legacy&&(d[c]=g)}}return{widget:g,init:function(){var t=function(){try{g.initWidget?g.initWidget(u):v.call(g,u)}catch(e){var t='Unable to initialize widget of type "'+r+"'. Exception: "+e;if(!f)throw e;i.error(t,e)}};!0===g.initBeforeOnDomReady?t():g.onReady(t)}}};return t("raptor/pubsub").subscribe({"dom/beforeRemove":function(t){(t=e.get(t.el.id))&&t.destroy({removeNode:!1,recursive:!0})},"raptor/renderer/renderedToDOM":function(t){e.getWidgetsContext(t.context).initWidgets()}}),{initWidget:function(t){var e=d(t.type,t.id,t.assignedId,t.config,t.scope?t.scope.id:null,t.events);t.widget=e.widget,t.children.length&&t.children.forEach(this.initWidget,this),e.init()},_serverInit:function(t){var e=function(t,i){if(t)for(var n=0,s=t.length;n<s;n++){var r=(h=t[n])[0],a=h[1],o=h[2]||{},l=h[3],c=h[4],u=h[5]||{},h=h.slice(6);0===l&&(l=void 0),0===c&&(c=void 0),0===o&&(o=void 0),r=d(r,a,c,o,l,u,i,1),h&&h.length&&e(h,r.widget),r.init()}};e(t)},get:function(t){return n[t]},_remove:function(t){delete n[t]}}})),raptor.defineClass("com.ebay.raptor.vi.lockedheader.LockedHeaderCore",(function(){return{init:function(t){var e=this;if($("#TopPanelDF").position(),e.conf=t,e.conf.lkhdrImpressionTracked=!1,e.viUtils=raptor.require("com.ebay.raptor.vi.utils"),e.lkdHdr=$("#"+e.conf.lockedHeaderId),e.lkdHdr&&(!e.lkdHdr||0!=e.lkdHdr.length)){e.pubsub=raptor.require("pubsub"),e.pubsub&&(e.pubsub.subscribe("ADD_TO_WATCH_MSG_STATUS_TRIGGERED",(function(t){e.handleWatchLinkClick(t)}),e),e.pubsub.subscribe("LKDHDR_MOVETO_TOP",(function(t){e.viUtils.scrollPageToTop(t.ts)}),e),e.pubsub.subscribe("HIDE_ADD_TO_CART_LINK",(function(t){e.handleAddedToCartLink(t)}),e),$(".lkdr-imgCr").bind("click",(function(){e.conf.isV4Version?e.pubsub.publish("_SHOW_ENLARGE_IMG_FOR_BTF_CMP",{setDefaultImgId:!0}):e.pubsub.publish("_LKHR_THB_IMG_CLK",{})}))),e.open=!1;var i=function(){e.showHide()};e.pubsub.subscribe("VI_TIME_LEFT_UPDATE",(function(t){e.updateTimeLeft(t.content,t.className)}),e),$(window).resize((function(){e.positionLkdhdrContent()})),$(e.conf.lkTitleId).click((function(){$(document).trigger("rover",{sid:"p2047675.l6301"}),e.scrollToTop()})),$(".lhdr-thumb-td").click((function(){$(document).trigger("rover",{sid:"p2047675.l6302"})})),$(document).ready((function(){e.positionLkdhdrContent(),e.lkdHdrHt=e.lkdHdr.outerHeight(),e.lkdFtr=$("#lkd-ftr"),$(e.conf.lkAddToWatchListBtnId).on("click",(function(){$(document).trigger("rover",{sid:"p2047675.l4608"}),window&&window.$ItemContext&&window.$ItemContext.isVimBuyBox&&e.conf&&!e.conf.userHasList?document.dispatchEvent(new CustomEvent("ux__x-watch-action__proxy-watch-click",{detail:{removeVimWatch:!0}})):$(e.conf.origWatchListBtnId).click()})),$(e.conf.lkAddToCartBtnId).on("click",(function(){$(document).trigger("rover",{sid:"p2047675.l4607"}),$(e.conf.origCartBtnId).click()})),$(e.conf.lkBinBtnId).on("click",(function(){$(document).trigger("rover",{sid:"p2047675.l5155"}),window&&window.$ItemContext&&window.$ItemContext.isVimBuyBox?document.dispatchEvent(new CustomEvent("vi__x-bin-action__proxy-bin-click",{})):$(e.conf.origBinBtnId).click()})),$(e.conf.lkBidBtnId).on("click",(function(){$(document).trigger("rover",{sid:"p2047675.l5156"}),$(e.conf.origBidBtnId).click()})),($.browser.msie&&!t.disableLkhdrForIE||!$.browser.msie)&&($("body").addClass("vi-lkdhdr-trmt"),$(window).bind("load",i),$(window).bind("scroll",i));var n=$("#"+e.conf.bidPriceId),s=$("#"+e.conf.binPriceId);!(s&&0<s.length)&&n&&0<n.length&&e.updateTimeLeft($("#vi-cdown_timeLeft").html(),$("#vi-cdown_timeLeft").attr("class"));try{var r=encodeURIComponent($("#vi-lkhdr-itmTitl").text()),a=(n=r,e.getCutoffThreshold(80,n));n.length>a?(n=n.substr(0,a)+"...",$("#lhdr-ttl a.lhdr-ttl-main").html(decodeURIComponent(n))):$("#lhdr-ttl a.lhdr-ttl-main").html($("#vi-lkhdr-itmTitl").html()),n=55,t.isGeo&&(n=30),a=e.getCutoffThreshold(n,r),r.length>a?(r=r.substr(0,a)+"...",$("#lhdr-ttl a.lhdr-ttl-ellip").html(decodeURIComponent(r))):$("#lhdr-ttl a.lhdr-ellip-main").html($("#vi-lkhdr-itmTitl").html())}catch(t){}try{if(e.conf.isMSKU&&-1!=e.conf.itemVariationsModel.selectedVariationId){var o=e.conf.itemVariationsModel.selectedVariationId;e.conf.itemVariationsModel.itemVariationsMap[o].varationInCart&&e.handleAddedToCartLink({toHide:!1}),e.conf.itemVariationsModel.itemVariationsMap[o].variationWatched&&e.handleWatchLinkClick({display:!0})}}catch(t){}}))}},getCutoffThreshold:function(t,e){return t+2*e.split("%").length},updateTimeLeft:function(t,e){$("#"+this.conf.lkTimeLeftId).html(t),$("#"+this.conf.lkTimeLeftId).attr("class",e)},positionLkdhdrContent:function(){var t=$("#TopPanelDF").position().left;this.lkdHdr.css("padding-left",t+"px");var e=100-100*t/$(document).width();$("#"+this.conf.lockedHeaderId+" table").width(e+"%"),$("#"+this.conf.buttonsCntrId).css("padding-right",t+"px")},scrollToTop:function(){return $("html, body").animate({scrollTop:0},300),!1},handleWatchLinkClick:function(t){t.display?($(this.conf.lkAddToWatchListBtnId).hide(),$(this.conf.lkAddToWatchListAddedBtnId).show(),$("#lhdr-tick-icon").addClass("lhdr-tick-icon"),0<$("#vi-lkdhdr-cart-btn").length&&"none"!=$("#vi-lkdhdr-cart-btn").parent().css("display")?$("#lhdr-tick-icon").css("top","8px"):$("#lhdr-tick-icon").css("top","0px")):($(this.conf.lkAddToWatchListAddedBtnId).hide(),$("#lhdr-tick-icon").removeClass("lhdr-tick-icon"),$(this.conf.lkAddToWatchListBtnId).show())},handleAddedToCartLink:function(t){t.toHide?($(this.conf.lkAddedToCartlnkId).parent().removeClass("lhdr-tick-icon"),$(this.conf.lkAddedToCartlnkId).hide(),$(this.conf.lkAddToCartBtnId).parent().show()):($(this.conf.lkAddToCartBtnId).parent().hide(),$(this.conf.lkAddedToCartlnkId).show(),$(this.conf.lkAddedToCartlnkId).parent().addClass("lhdr-tick-icon"))},showHide:function(){var t=$(window).scrollTop()+8,e=$(this.conf.tabId).offset().top;0>e&&(e=9),$("#pse-pdfview-main-wrapper").is(":visible")?(this.lkdHdr.stop(!0,!0).fadeOut(),this.pubsub.publish("_LKHR_FADE_OUT",{}),this.open=!1,0<this.lkdFtr.length&&this.lkdFtr.hide()):t>=e&&!this.open?(this.open=!0,this.pubsub.publish("SHOW_BROWSE_TRIGGER",{}),this.lkdHdr.stop(!0,!0).fadeIn(),this.updateItemInfo(),0<this.lkdFtr.length&&this.lkdFtr.show(),this.conf.lkhdrImpressionTracked||($(document).trigger("rover",{sid:"p2047675.l5331"}),this.conf.lkhdrImpressionTracked=!0)):t<e&&this.open&&(this.lkdHdr.stop(!0,!0).fadeOut(),this.pubsub.publish("_LKHR_FADE_OUT",{}),this.open=!1,0<this.lkdFtr.length&&this.lkdFtr.hide())},updateItemInfo:function(){var t=$("#lhdr-prcfmt");$("#"+this.conf.timeLeftId);var e=$("#"+this.conf.bidPriceId),i=$("#"+this.conf.binPriceId),n=$("#"+this.conf.mapOriginalPriceId),s=$("#"+this.conf.mmBinPriceId),r=$("#"+this.conf.mmOriginalPriceId),a=$(".vi-binConvPrc"),o=i&&0<i.length,l=e&&0<e.length;this.itemInfoHTML="",l&&!o&&this.addToItemInfo(e.html(),"lhdr-prc",this.conf.discounPricetAriaLabel),0<i.length?this.conf.isMAPItem||this.addToItemInfo(i.html(),"lhdr-prc",this.conf.discounPricetAriaLabel):0<n.length?(this.addToItemInfo(n.html(),"lhdr-prc-strk",this.conf.originalPriceAriaLabel),this.conf.isMAPItem||this.addToItemInfo(this.conf.mapBinPrice,"lhdr-prc",this.conf.discounPricetAriaLabel)):0<s.length&&(this.addToItemInfo(r.html(),"lhdr-prc-strk",this.conf.originalPriceAriaLabel),this.conf.isMAPItem||this.addToItemInfo(s.html(),"lhdr-prc",this.conf.discounPricetAriaLabel)),this.conf.isMAPItem||(0<a.length?this.addToItemInfo(a.html(),"vi-lkhdr-convPrc"):0<(a=$("#prcIsumConv")).length&&this.addToItemInfo(a.html(),"vi-lkhdr-convPrc")),e=$("#CenterPanelInternal .sh-CostBB").html(),0<$("#fshippingCost").length?($("#lkhdr-comma").show(),$("#lkd_hdr .sh-CostBB-lkdhdr").html(e)):$("#lkhdr-comma").hide(),this.conf.isV4Version||(this.conf.freeShipLabel==e?$("#lkd_hdr .sh-CostBB-lkdhdr").addClass("vi-greenlabel"):$("#lkd_hdr .sh-CostBB-lkdhdr").removeClass("vi-greenlabel")),t.html(this.itemInfoHTML),0<a.length&&$(".lhdr-prc").attr("style","font-size:14px !important;")},addToItemInfo:function(t,e,i){this.itemInfoHTML+=t?(i?"<span class='clipped'>"+i+"</span>":"")+"<span class='"+(e||"")+"'>"+t+"</span>":""}}})),function(t){function e(e){this.$element=t(e),this.original_text=this.$element.html(),this.settings=t.extend({},t.fn.trunk8.defaults)}function i(){var e,i,n,a,o=(e=this.data("trunk8")).settings,l=o.width,d=o.side,c=o.fill,u=s.getLineHeight(this)*o.lines,h=(e=e.original_text).length,p="";if(this.html(e),l===r.auto){if(!(this.height()<=u)){for(l=0,i=h-1;l<=i;)n=l+(i-l>>1),a=s.eatStr(e,d,h-n,c),this.html(a),this.height()>u?i=n-1:(l=n+1,p=p.length>a.length?p:a);this.html(""),this.html(p),o.tooltip&&this.attr("title",e)}}else isNaN(l)?t.error('Invalid width "'+l+'".'):(a=s.eatStr(e,d,h-l,c),this.html(a),o.tooltip&&this.attr("title",e))}var n,s,r={auto:"auto"};e.prototype.updateSettings=function(e){this.settings=t.extend(this.settings,e)},n={init:function(n){return this.each((function(){var s=t(this),r=s.data("trunk8");r||s.data("trunk8",r=new e(this)),r.updateSettings(n),i.call(s)}))},update:function(e){return this.each((function(){var n=t(this);e&&(n.data("trunk8").original_text=e),i.call(n)}))},revert:function(){return this.each((function(){var e=t(this).data("trunk8").original_text;t(this).html(e)}))},getSettings:function(){return this.get(0).data("trunk8").settings}},(s={eatStr:function(e,i,n,r){var a,o,l=e.length,d=s.eatStr.generateKey.apply(null,arguments);if(s.eatStr.cache[d])return s.eatStr.cache[d];if(("string"!=typeof e||0===l)&&t.error('Invalid source string "'+e+'".'),0>n||n>l)t.error('Invalid bite size "'+n+'".');else if(0===n)return e;switch("string"!=typeof(r+"")&&t.error("Fill unable to be converted to a string."),i){case"right":return s.eatStr.cache[d]=t.trim(e.substr(0,l-n))+r;case"left":return s.eatStr.cache[d]=r+t.trim(e.substr(n));case"center":return a=l>>1,o=n>>1,s.eatStr.cache[d]=t.trim(s.eatStr(e.substr(0,l-a),"right",n-o,""))+r+t.trim(s.eatStr(e.substr(l-a),"left",o,""));default:t.error('Invalid side "'+i+'".')}},getLineHeight:function(e){var i,n=(e=t(e)).css("float"),s=e.css("position"),r=e.html();return"none"!==n&&e.css("float","none"),"absolute"===s&&e.css("position","static"),e.html("i").wrap('<div id="line-height-test" />'),i=t("#line-height-test").innerHeight(),e.html(r).css({float:n,position:s}).unwrap(),i}}).eatStr.cache={},s.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},t.fn.trunk8=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.trunk8"):n.init.apply(this,arguments)},t.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:"right",tooltip:!0,width:r.auto}}(jQuery),raptor.defineClass("com.ebay.raptor.vi.reviews.ProductReviewRedesignV2",(function(){return{init:function(t){function e(){h=null;var e=(i=$(".rvws_container")).offset().top,i=i.height(),n=$(document).scrollTop();!d&&n+500>e?(d=!0,a=(new Date).getTime(),$(".ebay-review-section").each((function(t,e){u.push($(e).attr("id").split("_")[1])})),u=u&&u.join(",")):d&&(n>e+i||n+500<e)&&(l=!0,$(document).trigger("rover",{sid:"p2047675.m3945.l7016",startTime:a,endTime:(new Date).getTime(),reviewIds:u,listingid:t.itemId,username:t.username}))}function i(){$("#histogramid").hide().attr("aria-hidden",!0)}function n(){$("#histogramid").show().attr({"aria-hidden":!1,tabindex:"0"}).focus()}function s(t){27===t.which&&r()}function r(){$(document).off("keyup",s),i(),c=!1}var a,o=this,l=!1,d=!1,c=!1,u=[];o.cfg=t,o.pubsub=raptor.require("pubsub");try{window.ebay&&window.ebay.auth&&window.ebay.client&&(window.ebay.auth.init(window.ebayAuthTokens),ebay.client.initialize(t.cosgrcEndpoint))}catch(t){}var h=null;$(document).click((function(){$(".inapp-success-overlay").is(":visible")&&$(".inapp-success-overlay").hide()})),$(window).unload((function(){d&&!l&&$(document).trigger("rover",{sid:"p2047675.m3945.l7016",startTime:a,endTime:(new Date).getTime(),reviewIds:u,listingid:t.itemId,username:t.username})})),t.isReviewsMediaImagesEnabled&&(o.pubsub&&o.pubsub.publish("_REVIEWS_LAZYLOAD_IMAGES",$(".reviews-images .review-pic img")),$("[id^=review-media-image_]").on("click",(function(){o.pubsub&&o.pubsub.publish("_REVIEWS_IMAGES_LAYER_OPEN",$(this))}))),$(window).scroll((function(){l||(h&&clearTimeout(h),h=setTimeout(e,500))})),$(".rc").hover((function(){c||($(document).trigger("rover",{sid:"p2047675.m3945.l7014"}),c=!0),n(),$(document).on("keyup",s)}),(function(){r()})),$(".rc").mouseleave((function(){i()})),$(".review-ratings-cntr").focus((function(){n()})),$(".review-ratings-cntr").keydown((function(t){9===t.which&&t.shiftKey&&i()})),$("#histogramid .btn").focusout((function(){i()})),$(".prodreview, #_rvwlnk, .ebay-content-wrapper a").click((function(){$(document).trigger("rover",{sid:"p2047675.m3945.l7015"}),$("html,body").animate({scrollTop:$("#rwid").offset().top},1e3)})),$(".review-item-content").trunk8({fill:'<a class="show-full-review-link" href="#">'+t.readFullReviewTxt+"&hellip;</a>",tooltip:!1,lines:5}),$(".show-full-review-link").on("click",(function(){var e=$(this),i=o.getPosition(e),n=-1,s="",r=(e=e.closest(".ebay-review-section")).attr("class").split(" ");try{n=e.attr("id").split("_")[1],s=Array.isArray(r)&&(~r.indexOf("topFavorable")?"favorable":~r.indexOf("topCritical")?"critical":"")}catch(t){}return $(document).trigger("rover",{sid:"p2047675.m3946.l7021",position:i,rvwid:n,listingid:t.itemId,type:s}),$(this).parent().trunk8("revert"),!1})),$(".ebay-review-section").on("click",".vote-up-link",(function(){var e=$(this),i=e.data("value"),n="p2047675.m3946.l7023",s=o.getPosition($(this)),r=e.closest(".ebay-review-section"),a="",l=r.attr("class").split(" "),d=-1;try{d=r.attr("id").split("_")[1],a=Array.isArray(l)&&(~l.indexOf("topFavorable")?"favorable":~l.indexOf("topCritical")?"critical":"")}catch(t){}"cancel"===i&&(n="p2047675.m3946.l7029"),$(document).trigger("rover",{sid:n,listingid:t.itemId,position:s,rvwid:d,type:a}),o.call("vote",i,e,"?action="+i,t)})),$(".ebay-review-section").on("click",".vote-down-link",(function(){var e=$(this),i=e.data("value"),n="p2047675.m3946.l7024",s=o.getPosition($(this)),r=e.closest(".ebay-review-section"),a="",l=r.attr("class").split(" "),d=-1;try{d=r.attr("id").split("_")[1],a=Array.isArray(l)&&(~l.indexOf("topFavorable")?"favorable":~l.indexOf("topCritical")?"critical":"")}catch(t){}"cancel"===i&&(n="p2047675.m3946.l7030"),$(document).trigger("rover",{sid:n,listingid:t.itemId,position:s,rvwid:d,type:a}),o.call("vote",i,e,"?action="+i,t)})),$(".ebay-review-section").on("click",".report-spam-link",(function(){var e=$(this),i=e.data("value"),n=e.parent(),s="p2047675.m3946.l7025",r=o.getPosition($(this)),a=e.closest(".ebay-review-section"),l="",d=a.attr("class").split(" "),c=-1;try{c=a.attr("id").split("_")[1],l=Array.isArray(d)&&(~d.indexOf("topFavorable")?"favorable":~d.indexOf("topCritical")?"critical":"")}catch(t){}"cancel"===i&&(s="p2047675.m3946.l7028"),$(document).trigger("rover",{sid:s,listingid:t.itemId,position:r,rvwid:c,type:l}),"report"===i?o.isUserLoggedIn(t)?(i=$(".inapp-spam-overlay"),n.addClass("marked-inapp"),n.append(i),i.show(),$("input:first",i).attr("checked",!0),$(".overlay-close",i).focus(),o.trapTapKeyFlow(o),e.closest(".ebay-review-section").addClass("ghosted")):window.location=o.getSigninUrl(t):o.call("flag",i,e,"?action=cancel",t)})),$(".inapp-spam-overlay").on("click",".overlay-close",(function(){o.handleCancelReportSpam($(this))})),$(".inapp-success-overlay").on("click",".overlay-close",(function(){$(".inapp-success-overlay").hide()})),$(".inapp-spam-overlay").on("click",".inapp-action a",(function(){o.handleCancelReportSpam($(this))})),$(".inapp-spam-overlay").on("click",".inapp-action input",(function(){o.handleSubmitReportSpam($(this),t)})),$(".inapp-spam-overlay").on("keydown",".inapp-action input",(function(e){13===e.which&&o.handleSubmitReportSpam($(this),t)})),$(document).on("updateUserSiginStatus",(function(e,i){i&&i.signin&&(t.isUserSignedIn=!0,t.username=i.username)}))},getFocusableElements:function(t){if(t&&t[0])return t[0].querySelectorAll('a[href]:not([disabled]), button:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="button"]:not([disabled])')},captureTabbing:function(t){var e=(i=this.getFocusableElements(document.getElementsByClassName("inapp-spam-overlay")))[0],i=i[i.length-1];this.isTabTarget&&(t.target===e&&t.shiftKey&&(i.focus(),t.preventDefault()),t.target===i&&!t.shiftKey&&(e.focus(),t.preventDefault()))},trapTapKeyFlow:function(t){$(".inapp-spam-overlay").on("keydown",t.captureTabbing.bind(t)),t.isTabTarget=!0},getPosition:function(t){return $(".ebay-review-section").index(t.closest(".ebay-review-section"))+1},handleCancelReportSpam:function(t){t.closest(".marked-inapp").removeClass("marked-inapp"),t.closest(".ebay-review-section").removeClass("ghosted"),$(".inapp-action input").addClass("disabled"),$(".inapp-spam-overlay").hide(),$(".inapp-reasons-list").find("input").attr("checked",!1)},handleSubmitReportSpam:function(t,e){var i=(n=t.closest(".ebay-review-section")).find(".inapp-reasons-list").find("input:checked"),n=n.find(".report-spam-link");this.call("flag",i.val(),n,"?action=inappropriate&reason="+i.val(),e)},isUserLoggedIn:function(t){var e=raptor.require("ebay.cookies"),i=raptor.require("Base64"),n=!1;return null!=e&&null!=t&&(e=e.readCookie("dp1","u1p"),i=i.decode(decodeURIComponent(e)),e=t.username,n=t.isUserSignedIn&&""!=i&&i===e),n},getSigninUrl:function(t){return"https://signin."+t.currentDomain+"/ws/eBayISAPI.dll?SignIn&ru="+encodeURIComponent(document.URL)},call:function(t,e,i,n,s){var r=s.cosgrcEndpoint,a=i.closest(".ebay-review-section"),o=s.reviewsVoteUplabel,l=s.reviewsVoteDownlabel,d=RegExp(s.reviewsReplaceToken,"g");if(this.isUserLoggedIn(s)){if(""!==r){var c=a.attr("id").split("_")[1];ebay.client.ajax.execute("POST",r+"/review/"+c+"/"+t+n,{timeout:3e3,clientid:"urwwidget",dataType:"json",headers:{"Content-Type":"application/json",Accept:"application/json","x-ebay-c-marketplace-id":s.marketplaceid}},(function(n,s){switch(t){case"vote":if("cancel"===e){i.data("value",i.hasClass("vote-up-link")?"up":"down");var r=i.hasClass("vote-up-link")?"voted-up":"voted-down";i.closest("div").removeClass(r),i.attr("aria-pressed",!1)}else"down"===e?(i.closest("div").addClass("voted-down"),i.attr("aria-pressed",!0),i.data("value","cancel"),"cancel"===(r=a.find(".vote-up-link")).data("value")&&(r.data("value","up"),r.closest("div").removeClass("voted-up"),r.attr("aria-pressed",!1))):(i.data("value","cancel"),i.closest("div").addClass("voted-up"),i.attr("aria-pressed",!0),"cancel"===(r=a.find(".vote-down-link")).data("value")&&(r.data("value","down"),r.closest("div").removeClass("voted-down"),r.attr("aria-pressed",!1)));break;case"flag":"cancel"===e?(i.data("value","report"),i.attr("aria-pressed",!1),i.closest("div").removeClass("marked-inapp"),i.closest(".ebay-review-section").removeClass("ghosted")):($(".inapp-spam-overlay").hide(),i.parent().append($(".inapp-success-overlay")),$(".inapp-reasons-list").find("input").attr("checked",!1),$(".inapp-action button").addClass("disabled"),i.parent().parent().find("div[name=vote]").removeClass(),$(".inapp-success-overlay").show(),setTimeout((function(){$(".inapp-success-overlay").hide()}),5e3),i.data("value","cancel"),i.attr("aria-pressed",!0))}a.find("span.positive-h-c").text(s.result.votesPositive),r=s.result.votesTotal-s.result.votesPositive,a.find("span.negative-h-c").text(!isNaN(r)&&r),a.find(".vote-up-link").attr("aria-label",o.replace(d,s.result.votesPositive)),a.find(".vote-down-link").attr("aria-label",l.replace(d,r))}),(function(){$(document).trigger("rover",{sid:"p2047675.m3946.l7075"})}))}}else window.location=this.getSigninUrl(s)}}})),$((function(){function t(t,e){t.css({transform:"rotateZ(-"+e+"deg)","-ms-transform":"rotate(-"+e+"deg)","-moz-transform":"rotateZ(-"+e+"deg)","-webkit-transform":"rotateZ(-"+e+"deg)","-o-transform":"rotateZ(-"+e+"deg)"})}$(".pie").each((function(){var e=$(this).data("percent").split("%")[0],i=$(this).find(".left span"),n=$(this).find(".right span");50>=(e="--"===e?0:e)?(i.hide(),t(n,180-e/100*360)):t(i,180-(e-50)/100*360)}))})),raptor.defineClass("com.ebay.raptor.vi.reviews.ProductReviewsImagesOverlay",(function(){var t,e;return{init:function(){this.pubsub=raptor.require("pubsub"),t="_REVIEWS_IMAGES_LAYER_OPEN",e="_REVIEWS_LAZYLOAD_IMAGES",this.bindEventListener()},bindEventListener:function(){var i=this;$(".reviews-carsoul-thumbnails").on("click","button.review-pic",(function(){var t=$(this);setTimeout((function(){i.handleImageCarsoulChanged(t)}),0)})),$(".rvwImageEnlarge").on("click","button",(function(){var t=$(this);setTimeout((function(){i.handleImageCarsoulChanged(t)}),0)})),$(".vi_pl_panel").on("fluid-fs:navigate",(function(t,e){var i=$(this).find(".reviews-carsoul-thumbnails ul li button[data-imageIndex="+e.current+"]");i.length&&($(this).find(".reviews-carsoul-thumbnails ul li button").removeClass("selected"),$(i[0]).addClass("selected"))})),i.pubsub.subscribe(t,(function(t){var e="rvwEnlargeImgLayer_"+t.attr("id").split("_")[1].split("_")[0];i.pubsub.publish(e+"_OPEN_VI_P_LAYER",{id:e}),i.handleProductReviwsImageOverlayOpen(t)})),i.pubsub.subscribe(e,(function(t){i.initImagesLazyLoad(t)}))},handleProductReviwsImageOverlayOpen:function(t){var e=t.closest(".ebay-review-section").attr("id").split("_")[1],i=$("#rvwEnlargeImgLayer_"+e),n=i.find(".rvwImageEnlarge");t=t.data("imageindex");$(".reviews-carsoul-thumbnails button").removeClass("selected"),n.data("islazyloaded")||(this.initImagesLazyLoad(i.find(".reviews-images-overlay .review-pic-overlay-filmstip-main img")),this.initImagesLazyLoad(i.find(".reviews-carsoul-thumbnails button.review-pic img")),n.attr("data-islazyloaded",!0),n.filmstrip());var s=n.data("__FS__INSTANCE"),r=s.props.current;n=1/0==s.props.total?n.find(".review-pic-overlay-filmstip-main").length-1:s.props.total;s.props.total=n,s.isTransitioning=!1,s._clickHandler({data:r-t}),i.find(".reviews-carsoul-thumbnails button[data-imageindex="+t+"]").addClass("selected"),s.isTransitioning=!1,this.imageOverlayOpenClickTracking(t,e,n)},imageOverlayOpenClickTracking:function(t,e,i){$(document).trigger("rover",{sid:"p2047675.m3946.l8861",rvwid:e,rvwImageindex:1+parseInt(t),totalImages:1+parseInt(i)})},initImagesLazyLoad:function(t){t.one("load",(function(){for(var e=0;e<t.length;e++)t[e]&&pagespeed.lazyLoadImages.loadIfVisible(t[e])})).each((function(){this.complete&&$(this).attr("src",$(this).attr("imgurl"))}))},handleImageCarsoulChanged:function(t){var e=t.data("imageindex"),i=t.closest("[id^=rvwEnlargeImgLayer_]"),n=(r=i.find(".rvwImageEnlarge")).data("__FS__INSTANCE"),s=n.props.current,r=1/0==n.props.total?r.find(".review-pic-overlay-filmstip-main").length-1:n.props.total;i.find(".reviews-carsoul-thumbnails button").removeClass("selected"),n.props.total=r,n.isTransitioning=!1,null!=e?(n._clickHandler({data:s-e}),t.addClass("selected")):i.find(".reviews-carsoul-thumbnails button[data-imageindex="+s+"]").addClass("selected"),n.isTransitioning=!1}}}));var func=function(){function t(t){var n=this,s=t||{};return this.$el=t.$el,this.$ul=t.$ul,this.isTransitioning=!1,this.transitionStartTime=0,this.dataItemIdAttr=s.dataAttr||"item-id",this.props=void 0,this.mobiUX=!1,s.isMobiUX&&($.fluidmixins.isTouch&&$.fluidmixins.hasWebKitTouch?this.mobiUX=!0:this.$el.removeClass("fluid-filmstrip-mobiux")),this.mobiUX||(this.selectorPrev=s.selectorPrev||"button:first-child",this.selectorNext=s.selectorNext||"button:last-child",this.$el.on("click",this.selectorPrev,(function(t){t.data=1,n._clickHandler.call(n,t)})).on("click",this.selectorNext,(function(t){t.data=-1,n._clickHandler.call(n,t)})),this.$el.tact({dragstart:function(t){n._dragHandler.call(n,t)},drag:function(t){n._dragHandler.call(n,t)},dragend:function(t){n._dragHandler.call(n,t)},swipe:function(t){n._swipeHandler.call(n,t)}}),this._supportsTransitions&&("function"==typeof this._translate&&(this._translate=this._translate()),this.$ul.css("transition",this._translate+" 0.4s ease-out").css(this._translate,"translate3d(0%, 0, 0)").on("webkitTransitionEnd oTransitionEnd otransitionend transitionend",(function(){n._setTransitionEnd.call(n)}))),$(document).on(e,(function(){void 0===n._resizeFunc?n._resizeTime=(new Date).getTime():200>(new Date).getTime()-n._resizeTime&&(clearTimeout(n._resizeFunc),n._resizeTime=(new Date).getTime()),n._resizeFunc=setTimeout((function(){var t=n._getProps();n.props.total!==t.total&&(n.props.resized=!0,n._setButtons()),n._resizeFunc=void 0}),200)}))),this.$el.on("click","ul > li",(function(){n._eventPublisher(i,{type:"click",id:$(this).data(n.dataItemIdAttr)})})),this._setButtons(),this}var e="__FS_RESIZE",i="fluid-fs:click",n=!1;if("function"!=typeof $.fn.tact)throw Error("Tactile.js depedency is missing.");t.prototype._clickHandler=function(t,e,i){var n=this,s=this.$ul,r=this.props,a=this.isTransitioning,o=this._supportsTransitions,l=(e=e||400,r.current),d=t.data-l,c=i||100*d+"%",u={};0===l&&1===t.data||l===r.total&&-1===t.data||!0===a||(this.isTransitioning=!0,this.transitionStartTime=(new Date).getTime(),o?((u=this.getTransObj(e/1e3))[this._translate]="translate3d("+c+",0,0)",s.css(u)):s.stop(!0,!0).animate({left:c},e,(function(){n.isTransitioning=!1,r.offset=s.position().left})),void 0===i&&(r.current=Math.abs(d),this._setButtons(),this._eventPublisher("fluid-fs:navigate",{type:"navigate",dir:t.data,current:r.current})))},t.prototype._eventPublisher=function(t,e){this.$el.trigger(t,e)},t.prototype._dragHandler=function(t){var e=this.$ul,i=this.props,n=t.gesture.dir,s=i.offset+t.gesture.delta.x+"px",r=i.current;if(!this.isTransitioning)if("dragstart"===t.gesture.type)e.css(this.getTransObj(0));else{if((0===r&&0<t.gesture.delta.x||r===i.total&&-1===n)&&(s=i.offset+t.gesture.delta.x/4+"px"),"dragend"===t.gesture.type)if(0===r&&0<t.gesture.delta.x||r===i.total&&-1===n)e.css(this.getTransObj(.4)),s=-100*r+"%";else if(!1===t.gesture.swipe){if(!(.1>t.gesture.delta.x/this.props.width))return t.gesture.velocity=.5,void this._swipeHandler.call(this,t);e.css(this.getTransObj(.4)),s=-100*r+"%"}e.css(this._translate,"translate3d("+s+",0,0)")}},t.prototype._swipeHandler=function(t){if(this.isTransitioning){if(!(this.transitionStartTime+1e3<=(new Date).getTime()))return;this.isTransitioning=!1}var e={};e.delegateTarget=this.$el,e.data=t.gesture.dir,this._clickHandler.call(this,e,400/t.gesture.velocity)},t.prototype._getProps=function(){var t=(i=this.$ul).find("li:first-child").width(),e=i.children("li").length,i=i.width(),n={},s=this.props&&this.props.current?this.props.current:0,r=this.props&&this.props.offset?this.props.offset:0;return n.width=i,n.current=s,n.offset=r,n.total=Math.ceil(t*e/i)-1,n},t.prototype._setButtons=function(){var t,e=this.$el,i=this.selectorPrev,n=this.selectorNext,s=!1;void 0===this.props||(s=!0===this.props.resized)?(this.props=t=this._getProps(),!0===s&&t.current>t.total&&(this.props.current=t.total,this._clickHandler({data:1},400,-100*t.total+"%"))):t=this.props,!1===this.mobiUX&&(e.find(i+","+n).attr("aria-disabled",!1),0===t.total?e.find(i+","+n).attr("aria-disabled",!0).css("visibility","hidden"):0===t.current?e.find(i).attr("aria-disabled",!0):t.current===t.total&&e.find(n).attr("aria-disabled",!0))},t.prototype._translate=function(){var t,e=(document.body||document.documentElement).style,i=["Webkit","Moz","O","ms"];if("string"==typeof e.transform)return"transform";for(t=0;t<i.length;t++)if("string"==typeof e[i[t]+"Transform"])return"-"+i[t].toLowerCase()+"-transform";return"left"},t.prototype.getTransObj=function(t){return{"transition-duration":t+"s","-webkit-transition-duration":t+"s","-moz-transition-duration":t+"s","-o-transition-duration":t+"s"}},t.prototype._supportsTransitions=function(){var t,e=(document.body||document.documentElement).style,i="webkit Webkit Moz Khtml O ms".split(" ");if(!0==(-1<(t=navigator.userAgent).indexOf("Mozilla/5.0")&&-1<t.indexOf("Android ")&&-1<t.indexOf("AppleWebKit")&&!1==-1<t.indexOf("Chrome")))return!1;if("string"==typeof e.transition)return!0;for(t=0;t<i.length;t++)if("string"==typeof e[i[t]+"Transition"])return!0;return!1}(),t.prototype._setTransitionEnd=function(){this.props.offset=this.$ul.position().left,this.isTransitioning=!1},$.fn.filmstrip=function(i){var s=(i=i||{}).selectorPrev||"button:first-child",r=i.selectorNext||"button:last-child",a=i.dataAttr||"item-id",o=i.mobiUX||!1;return!1===n&&(!0=="onorientationchange"in window?$(window).on("orientationchange",(function(){$(document).trigger(e)})):$(window).on("resize",(function(){$(document).trigger(e)})),n=!0),this.each((function(){var e=$(this),i=e.find("ul:first-child");void 0===e.data("__FS__INSTANCE")&&e.data("__FS__INSTANCE",new t({$el:e,$ul:i,selectorPrev:s,selectorNext:r,dataAttr:a,isMobiUX:o}))}))}};window.addEventListener?window.addEventListener("load",func,!1):window.attachEvent&&window.attachEvent("onload",func),function(t){function e(e,i){this.settings={},this.$el=t(e),this.handlers={},document.addEventListener&&this._bindEvents(1,i)}var i=["touchstart","touchmove","touchend","touchcancel"],n={touchstart:function(t){var e=this.settings;t=t.changedTouches[0];e.dY=0,e.dX=0,e.scroll=0,e.dir=0,e.userDragging=!1,e.sX=Math.abs(t.screenX),e.sY=Math.abs(t.screenY),e.sT=(new Date).getTime(),e.id=t.identifier},touchmove:function(t){var e=this.$el,i=this.settings,n=t.changedTouches[0];i.scroll||(i.dir=i.dX>=n.screenX-i.sX?-1:1,i.dX=n.screenX-i.sX,i.dY=n.screenY-i.sY,!i.userDragging&&.5<Math.abs(i.dY/i.dX)?i.scroll=1:(i.userDragging||i.listenDrag&&(10<Math.abs(i.dY)||10<=Math.abs(i.dX)))&&(t.gesture=this._extendGestureObj(i),t.preventDefault(),i.userDragging?(t.gesture.type="drag",e.trigger("tact:drag",t)):(i.sX=n.screenX,i.sY=n.screenY,t.gesture=this._extendGestureObj(i),t.gesture.type="dragstart",e.trigger("tact:dragstart",t),i.userDragging=!0)))},touchend:function(t){var e,i=this.$el,n=this.settings,s=t.changedTouches[0],r=(new Date).getTime(),a=Math.abs(s.screenX),o=Math.abs(s.screenY);s=!1;e=r-n.sT,o=Math.floor(Math.sqrt((a-n.sX)*(a-n.sX)+(o-n.sY)*(o-n.sY))),t.gesture=this._extendGestureObj(n),t.gesture.end=r,t.gesture.duration=e,.5<Math.abs(n.sX-a)/Math.abs(n.sT-r)&&(t.gesture.velocity=Math.abs(n.sX-a)/Math.abs(n.sT-r),t.gesture.type="swipe",s=!0,i.trigger("tact:swipe",t)),n.userDragging&&(n.userDragging=!1,t.gesture.type="dragend",t.gesture.swipe=s,i.trigger("tact:dragend",t)),150>e&&10>o&&(delete t.gesture.dir,delete t.gesture.delta,t.gesture.type="tap",i.trigger("tact:tap",t))},touchcancel:function(t){this.handlers.touchend(t)}},s=function(t,e,i){var s=e.$el.data("__TACTILE_LISTENER_BOUND");return 1!==t||void 0!==s&&!1!==s?t=e.handlers[i]:(t=function(t){n[i].call(e,t)},e.handlers[i]=t),t},r=function(t,e,i){return function(n,s){i.settings.enabled&&e[t].call(i.$el[0],s)}};e.prototype._bindEvents=function(t,e){var n,a,o,l=1===t?"add":"remove",d=this.$el.get(0);for(a=0,o=i.length;a<o;a++)d[l+"EventListener"](i[a],s(t,this,i[a]));if(this.$el.data("__TACTILE_LISTENER_BOUND",!!t),"add"===l&&e)for(n in this.settings.enabled=1,e)e.hasOwnProperty(n)&&("function"==typeof e[n]&&this.$el.on("tact:"+n+".tact",r(n,e,this)),-1<n.indexOf("drag")&&(this.settings.listenDrag=!0))},e.prototype._extendGestureObj=function(t){var e={};return e.dir=t.dir,e.id=t.id,e.start=t.sT,e.delta={},e.delta.x=t.dX,e.delta.y=t.dY,e},t.fn.extend({tact:function(i){return"string"==typeof i||i instanceof String?"enable"===i?this.each((function(){var e=t(this).data("__TACTILE");e&&e.settings&&(e.settings.enabled=1)})):"disable"===i?this.each((function(){var e=t(this).data("__TACTILE");e&&e.settings&&(e.settings.enabled=0)})):"destroy"===i?this.each((function(){var e=t(this).data("__TACTILE");e&&(e._bindEvents(0),t(this).off(".tact"),t(this).removeData("__TACTILE"))})):this:this.each((function(){var n=t(this);void 0===n.data("__TACTILE")?n.data("__TACTILE",new e(this,i)):(n=n.data("__TACTILE"))._bindEvents(1,i)}))}})}(jQuery),raptor.defineClass("com.ebay.raptor.vi.customization.customization",(function(){var t=raptor.require("pubsub");return{init:function(t){window.$customizationData=t,this.registerEvents(t)},registerEvents:function(e){this.initMessageCounter(e),t.subscribe("VI_MSKU_POST_VARIATION_SELECTION",this.handleVariationChange.bind(this)),t.subscribe("SAFE_CUSTOMIZATION_MESSAGE",this.handlePostCustomizationMessage.bind(this))},initMessageCounter:function(t){var e=document.getElementById("customizationSection"),i=e.querySelector("textarea"),n=e.querySelector(".customization--val"),s=e.querySelector("#customizationCounter"),r=!1;i.addEventListener("keyup",(function(e){!r&&13==e.keyCode&&(i.style.transition="height 0.5s ease",i.style.height="130px",r=!0),e=i.value,s.innerHTML=e.length,e.length>t.validationCount?n.classList.add("error"):n.classList.remove("error")})),i.addEventListener("focusout",(function(){trackingUtil("CUSTOMIZATION_TEXTBOX")}))},handleVariationChange:function(t){window.$customizationData&&(window.$customizationData.variationId=t.variationId)},handlePostCustomizationMessage:function(t){setTimeout((function(t,e){if(window.$customizationData){var i=window.$customizationData.saveAction;if(i){var n=window.$customizationData.variationId&&window.getVariationByVariationId&&window.getVariationByVariationId(window.$customizationData.variationId);(n={variationId:window.$customizationData.variationId,srt:window.$customizationData.srt,itemId:window.$customizationData.itemId,variation:n})[window.$customizationData.tokenParamKey]=window.$customizationData.tokenParamValue;var s=document.querySelector("#customizationSection textarea")&&document.querySelector("#customizationSection textarea").value;n.message=s,1==window.$customizationData.waitforCustomizationEnabled&&0<window.$customizationData.timeToWaitOnCustomization?$.ajax({url:i,type:"POST",dataType:"json",data:n,xhrFields:{withCredentials:!0},success:function(i){console.log("customization New Response: ",i),t&&"BIN"===t&&e&&0<e.length&&(top.location=e)},error:function(i){console.log("customization New Error: ",i),t&&"BIN"===t&&e&&0<e.length&&(top.location=e)},timeout:window.$customizationData.timeToWaitOnCustomization}):$.ajax({url:i,type:"POST",dataType:"json",data:n,xhrFields:{withCredentials:!0},success:function(t){console.log("customization Response: ",t)},error:function(t){console.log("customization Error: ",t)}})}}}),0,t&&t.actionType||null,t&&t.binSubmitURL||null)}}}));try{document.addEventListener("GH_ABD_STATUS",(function(t){t&&t.detail&&"JUST_DISABLED"===t.detail.state&&trackingUtil("GH_AD_BLOCKER_JUST_DISABLED")}))}catch(t){}raptor.defineModule("com.ebay.raptor.vi.vim.LoadScriptOnDemand",(function(t){return{init:function(t){this.conf=t,this.isInitVimDone=!1,this.doAction()},doAction:function(){var t=this,e=t.conf;e&&e.loadVIMScripts&&"3"===e.loadVIMScripts?$(window).load((function(){t.loadVimScript()})):$(document).ready((function(){t.loadVimScript()}))},loadVimScript:function(){var e=this,i=e.conf,n=i&&i.jsUrls,s=t.require("com.ebay.raptor.vi.AjaxUtil");if(n&&0<n.length&&s&&!e.isInitVimDone)for(var r=0;r<n.length;r++)r===n.length-1?s.loadScripts(!0,n[r],(function(){i&&i.loadVIMScripts&&"6"===i.loadVIMScripts?$(window).load((function(){e.postJsUrlsLoad()})):e.postJsUrlsLoad(),e.isInitVimDone||(e.isInitVimDone=!0)})):s.loadScripts(!0,n[r])},postJsUrlsLoad:function(){var t=this;t.attachVimMarkoMod((function(){t.initVimRenderComponents()}))},attachVimMarkoMod:function(t){var e=document.createElement("script");e.type="text/javascript",e.text="$_mod_vim.ready();",document.body.appendChild(e),t()},initVimRenderComponents:function(){var t=[],e=this.conf&&this.conf.swcRenderedComponents||null,i=this.conf&&this.conf.seoRenderedComponents||null,n=this.conf&&this.conf.aboutThisItemRenderedComponents||null,s=this.conf&&this.conf.loyaltyRenderedComponents||null;e&&null!==e&&t.push(e),i&&null!==i&&t.push(i),n&&null!==n&&t.push(n),s&&null!==s&&t.push(s),window&&"undefined"!=typeof window&&window.VIM&&window.VIM.markoComponents&&"undefined"!==window.VIM.markoComponents&&t&&0<t.length&&t.forEach((function(e,i){if("undefined"!==e)try{window.VIM.markoComponents.init(e),i===t.length-1&&document.dispatchEvent(new CustomEvent("vim:basejs-ready"))}catch(t){console.error("VIM MarkoJS init error",t)}}))}}})),raptor.defineClass("com.ebay.cache.wrapper",(function(){return{init:function(t){var e=this;e.cfg=t,e.location=top.location.href,e.pubsub=raptor.require("pubsub"),e.maskClicked=!1,$("#cache_mask").click((function(){if(!e.maskClicked){var t="//rover.ebay.com/roverclk/0/0/9?trknvp=sid%3Dp2047675.l9047&ts="+(new Date).getTime();(new Image).src=t,e.maskClicked=!0}})),e.scache=!1,$(document).on("_FETCH_RESPONSE",(function(t,i){try{e.makeGETCallForTracking(e&&e.cfg&&e.cfg.getFetchDynamicModuleCallBackTrkUrl,"",!1)}catch(t){}if("object"==typeof i)e.processFetchModuleResponse(i);else{e.scache=!0;try{var n=JSON.parse(i);n&&n.prefetchredirect?(n&&n.invalidatecache&&e.clearEntireSwCache(),e.deleteSWKey()):(e.changeLocationUrl(),e.processFetchModuleResponse(n))}catch(t){console.log("User Ctx Call Failed with error "+t.toString()),$(document).trigger("rover",{sid:"p2047675.l8980"}),e.deleteSWKey()}}})),window.fetchResponseHandlerPrefetch?window.fetchResponseHandlerPrefetch(!0):window.fetchResponseRequested=!0,$(document).on("_FETCH_MERCH_RESPONSE",(function(t,i){if("object"==typeof i)e.processMerchFetchModuleResponse(i);else try{var n=JSON.parse(i);e.processMerchFetchModuleResponse(n)}catch(t){$("#vi-merch-abf").html(""),$(document).trigger("rover",{sid:"p2047675.l46223"})}})),window.fetchMerchResponseHandlerPrefetch?window.fetchMerchResponseHandlerPrefetch(!0):window.fetchMerchResponseRequested=!0,e.pubsub.subscribe("VI_CTA_CLICKED_PREFETCH",(function(){e.clearSingleSwUrl(e.location)})),e.cfg&&e.cfg.isPostVIContentEnabled&&$(window).on("load",e.windlowLoadPostDataHandler.bind(e))},deleteSWKey:function(){try{this.cfg&&this.cfg.reloadVIForServiceWorker&&"undefined"!=typeof reloadViewitem?this.clearSwCacheEntryWithURLParamBust(this.location):this.clearSwCacheEntry(this.location)}catch(t){}},clearSwCacheEntry:function(t){"serviceWorker"in navigator?(navigator.serviceWorker.getRegistration("/itm").then((function(t){(!t||void 0===t)&&top.location.reload(!0)})).catch((function(t){console.log("SW Post messages failed: ",t)})),caches.keys().then((function(e){e.filter((function(t){return-1<t.indexOf("SRPVIPREFETCH")})).map((function(e){caches.open(e).then((function(e){e.delete(t),top.location.reload(!0)})).catch((function(){}))}))}))):top.location.reload(!0)},clearSwCacheEntryWithURLParamBust:function(t){"serviceWorker"in navigator?(navigator.serviceWorker.getRegistration("/itm").then((function(t){(!t||void 0===t)&&reloadViewitem(!0)})).catch((function(t){console.log("SW Post messages failed: ",t)})),caches.keys().then((function(e){e.filter((function(t){return-1<t.indexOf("SRPVIPREFETCH")})).map((function(e){caches.open(e).then((function(e){e.delete(t),reloadViewitem()})).catch((function(){}))}))}))):reloadViewitem(!0)},clearEntireSwCache:function(){"serviceWorker"in navigator&&caches.keys().then((function(t){t.filter((function(t){return-1<t.indexOf("SRPVIPREFETCH")})).map((function(t){caches.delete(t)}))}))},clearSingleSwUrl:function(t){"serviceWorker"in navigator&&caches.keys().then((function(e){e.filter((function(t){return-1<t.indexOf("SRPVIPREFETCH")})).map((function(e){caches.open(e).then((function(e){e.delete(t)})).catch((function(){}))}))}))},updateCartStatus:function(t){t.isMSKU?this.pubsub.publish("VI_UPDATE_MSKU_MODEL",{itemVariationsModel:t.itemVariationsModel}):this.pubsub.publish("HIDE_ADD_TO_CART_LINK",{toHide:!t.addToCartStatus})},updateWatchStatus:function(t){t.isMSKU||this.pubsub.publish("VI_UPDATE_WATCH_STATUS",{isDisabled:!1,isWatched:t.isWatched})},updateBidButtonState:function(t){t.hasOwnProperty("bidRedesignSignInState")&&this.pubsub.publish("VI_UPDATE_STATE_OF_BID_BTN",{signInState:t.bidRedesignSignInState})},updateBestOfferButtonState:function(t){t.hasOwnProperty("bestOfferSignedInState")&&this.pubsub.publish("VI_UPDATE_STATE_OF_BO_BTN",{signInState:t.bestOfferSignedInState})},updateStatusMessagePanel:function(t){if(t&&t.body&&t.body.hasOwnProperty("vi_top_status_message_panel")){$("#vi-statusmessage-panel-content").html(t.body.vi_top_status_message_panel),t.hasOwnProperty("reviewOfferContent")&&""!==t.reviewOfferContent&&$("#boBtn_btn").html(t.reviewOfferContent);t=$("#_incbid")&&0<$("#_incbid").length;var e=$("#_rvwofr")&&0<$("#_rvwofr").length;t&&($("#_incbid").off(),$("#_incbid").on("click",(function(t){t.preventDefault(),$("#bidBtn_btn").trigger("click")}))),e&&($("#_rvwofr").off(),$("#_rvwofr").on("click",(function(t){t.preventDefault(),$("#boBtn_btn").trigger("click")})))}},processFetchModuleResponse:function(t){try{var e=this;t&&($(document).trigger("PREFETCH_RESPONSE_RCVD",t),e.updateTrackingPSIValue(t),e.loadScripts(t),e.destroyWindowEvents(),t.body&&(e.updateMainContainer(t),t&&!t.replaceMerch&&e.updateMerch(t),e.cfg&&e.cfg.isClientSideUpdatesForCartWatchInPrefetch&&(e.updateCartStatus(t),e.updateWatchStatus(t)),e.updateFollowSeller(t),e.updateShippingContent(t),e.updateShippingSummary(t),e.updateDeliverySummary(t),e.updateWatchLink(t),e.updateBtcUrl(t),e.updateDescContent(t),e.updateProductQnAContainer(t),e.updateEGDSection(t),e.updateSmartBackToURL(),e.fetchModulePostDataHandler()),e.positionAddtoListDropdown(),t&&t.shouldUIUpdateOnMismatch&&(e.updateBidButtonState(t),e.updateBinButtonState(t),e.updateBestOfferButtonState(t),e.updateStatusMessagePanel(t)),e&&e.cfg&&e.cfg.shouldUpdateGHONPrfetechUserCtxCall&&e.updateGHSigninState(t),$("#cache_mask").fadeOut(200),"undefined"!=typeof oGaugeInfo&&window.fetchDiff&&raptor.require("ebay.profiler.Profiler").addParam("i_30i",window.fetchDiff),$(document).ready((function(){"function"==typeof rtmExec&&rtmExec(),"function"==typeof normalexec&&normalexec(),e.scache?$(document).trigger("rover",{sid:"p2047675.l8977"}):$(document).trigger("rover",{sid:"p2047675.l8832"}),e.pubsub.publish("screendetailresolution")})),$(document).trigger("SSCACHE_FETCH_SUCCESS"),$(document).trigger("SSCACHE_FETCH_SUCCESS_COMPLETE",t))}catch(t){e&&e.cfg&&""!=e.cfg.getPrefetchDynamicUpdateCallErrorUrl&&"NONE"!=e.cfg.getPrefetchDynamicUpdateCallErrorUrl&&e.makePOSTCallToTrackError(e.cfg.getPrefetchDynamicUpdateCallErrorUrl,t)}},makePOSTCallToTrackError:function(t,e){try{if(t&&""!=t&&"NONE"!=t){var i=new XMLHttpRequest;i.open("POST",t+(/\?/.test(t)?"&":"?")+(new Date).getTime(),!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onreadystatechange=function(){},i.send(JSON.stringify({data:e}))}}catch(t){}},makeGETCallForTracking:function(t){try{""==t||null==t||"NONE"==t||((new Image).src=t+(/\?/.test(t)?"&":"?")+(new Date).getTime())}catch(t){}},processMerchFetchModuleResponse:function(t){t&&(t.body?this.updateMerch(t):$("#vi-merch-abf").html(""))},changeLocationUrl:function(){var t="&frcectupt=true";if(-1==window.location.href.indexOf("?")&&(t="?frcectupt=true"),history&&-1==window.location.href.indexOf("&frcectupt=true")&&-1==window.location.href.indexOf("?frcectupt=true")){var e={};history.replaceState(e,"viprefetch",window.location.href+t)}history&&-1==window.location.href.indexOf("?")&&-1!=window.location.href.indexOf("&frcectupt=true")&&(e={},t=window.location.href.replace("&frcectupt=true","?frcectupt=true"),history.replaceState(e,"viprefetch",t))},updateTrackingPSIValue:function(t){t.psi&&$("body").trigger("TRACKING_UPDATE_PSI",{psi:t.psi})},updateSmartBackToURL:function(){$("#smtBackToAnchor")&&$("#smtBackToAnchor").attr("href","javascript:history.go(-1)")},windlowLoadPostDataHandler:function(){window.viWindowLoadFired=!0,this.validateAndPostData()},fetchModulePostDataHandler:function(){window.fetchModuleReceived=!0,this.validateAndPostData()},validateAndPostData:function(){var t=this,e=!(window.viWindowLoadFired&&window.fetchModuleReceived);t.cfg&&t.cfg.isPostVIContentEnabled&&t.cfg.postVIContentEndpoint&&"NONE"!=t.cfg.postVIContentEndpoint&&t.cfg.postVIContentDelay&&!e&&setTimeout((function(){t.postData()}),t.cfg.postVIContentDelay)},postData:function(){try{var t={data:"<!DOCTYPE html>"+(document.documentElement&&document.documentElement.outerHTML||$(document.body.parentNode).html()),referer:document.referrer};this.cfg&&null!=this.cfg.postVIContentEndpoint&&""!=this.cfg.postVIContentEndpoint&&"NONE"!=this.cfg.postVIContentEndpoint&&(this.makeGETCallForTracking(this&&this.cfg&&this.cfg.getPrefetchPostCallMadeTrkUrl,"",!1),$.ajax({type:"POST",url:this.cfg.postVIContentEndpoint,data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).fail((function(){trackingUtil("VI_POST_DATA_FAILED")})))}catch(t){trackingUtil("VI_DOM_LOOKUP_FAILED")}},updateFollowSeller:function(t){if(t=t.body["vi-follow-seller"]){var e=$("#followSeller .fol-widget");e&&0<e.length&&(this.destroyWidget(e[0].id,!0,!0),$("#followSeller").html(t))}},destroyWindowEvents:function(){this.pubsub.publish("_DESTROY_BID_TIMER",{})},loadScripts:function(t){var e=this;t&&t.cssUrl&&$("<link/>",{rel:"stylesheet",type:"text/css",href:t.cssUrl}).appendTo("head"),t&&t.jsUrl&&$.ajax({url:t.jsUrl,dataType:"script",cache:!0,async:!0,success:function(){e.updateFooterCnt(t)},fail:function(){}})},loadBidJS:function(t){t&&t.bidRedesignTest&&t.bidRedesignJSUrl&&$.ajax({url:t.bidRedesignJSUrl,dataType:"script",cache:!0,async:!0,success:function(){window.ShoppingCTALayer&&new ShoppingCTALayer({width:"540px"})},fail:function(){}})},loadJsScource:function(t){if(t){var e=t.src;t=t.cb;if(e){var i=document.createElement("script");i.type="text/javascript",i.src=e,t&&"function"==typeof t&&(i.onload=t),i.async=!0,document.getElementsByTagName("head")[0].appendChild(i)}}},updateMerch:function(t){var e=this;if(t=t.body["vi-merch-abf"]){var i=[];if(t){var n=document.createElement("div");n.innerHTML=t,$.each($(n).find("script"),(function(t,e){e&&e.src&&(i.push({src:e.src,cb:e.onload}),$(e).remove())})),$("#vi-merch-abf").html($(n).html()),$.each(i,(function(t,i){e.loadJsScource(i)}))}$(document).trigger("rover",{sid:"p2047675.l46224"})}else $("#vi-merch-abf").html("")},updateFooterCnt:function(t){t.foot&&0<t.foot.length&&$(document).append($(t.foot))},destroyWidget:function(t,e,i){t&&(t=raptor.require("raptor/widgets").get(t))&&t.destroy({removeNode:e,recursive:i})},destroyWidgets:function(t,e,i){if(t){var n=widgeParenttMap[t];if(n&&0<n.length)for(var s=0;s<n.length;s++)this.destroyWidgets(n[s],e,i);this.destroyWidget(t,e,i)}},removeDuplicateResources:function(t){var e=document.createElement("div");return e.innerHTML=t,$.each($(e).find("script"),(function(t,e){e&&e.src&&e.remove()})),$(e).html()},updateMainContainer:function(t){if((t=t.body["vi-container"])&&0<t.length){var e=$("#mainContent"),i=$(e).parent();e=$(i).parent(),i=i[0].id;widgeParenttMap?this.destroyWidgets(i,!1,!1):this.destroyWidget(i,!0,!0),html=this.removeDuplicateResources(t),$(e).html(html),$(e).css("min-height","auto")}},updateStatusMessage:function(t){t.body["vi-status"]&&0<t.body["vi-status"].length?$(".vi-inheritstyl").html(t.body["vi-status"]):$(".vi-inheritstyl").addClass("collapse")},updateShippingContent:function(t){try{t.body.vi_ship_tab&&0<t.body.vi_ship_tab.length?$("#vi-ship-maincntr").html(t.body.vi_ship_tab):$("#shGetRatesDiv").is(":visible")&&$("#shGetRates")&&$("#shGetRates").click()}catch(t){}},updateShippingSummary:function(t){try{t.body.vi_ship_summary&&0<t.body.vi_ship_summary.length&&$("#shippingSummary").html(t.body.vi_ship_summary)}catch(t){}},updateDeliverySummary:function(t){try{t.body.vi_delivery_summary&&0<t.body.vi_delivery_summary.length&&$("#deliverySummary").html(t.body.vi_delivery_summary)}catch(t){}},updateWatchLink:function(t){try{t.body.vi_addto_watch_link&&0<t.body.vi_addto_watch_link.length&&$(".watchLnk").parent().html(t.body.vi_addto_watch_link)}catch(t){}},updateEGDSection:function(t){try{t&&t.body.vi_egd_section&&0<t.body.vi_egd_section.length&&$("#vi-egdSection").html(t.body.vi_egd_section)}catch(t){}},updateProductQnAContainer:function(t){try{if(t.body.vi_product_qna_content&&0<t.body.vi_product_qna_content.length){var e=document.createElement("html");e.innerHTML=t.body.vi_product_qna_content;var i=e.getElementsByClassName("qna--wrapper");$(".qna--wrapper").html(i&&i[0]&&i[0].innerHTML)}}catch(t){}},positionAddtoListDropdown:function(){"undefined"==typeof $df&&($df={set:function(t,e){t=document.getElementById(t),e=document.getElementById(e),t&&e&&t.parentNode.replaceChild(e,t)}}),$df.set("ph_addToListDropdown","addToListDropdown")},updateBtcUrl:function(t){try{t.btcUrl&&$("#smtBackToAnchor").attr("href",t.btcUrl)}catch(t){}},updateDescContent:function(t){try{t.body.vi_desc_content&&0<t.body.vi_desc_content.length&&$("#desc_wrapper_ctr").html(t.body.vi_desc_content)}catch(t){}},updateBinButtonState:function(t){var e=document.querySelector("#streamline-bin-layer");this.pubsub.publish("VI_UPDATE_BINBTN",{binURL:t.binURL,isStreamLineBinLayer:t.isStreamLineBinLayer}),t&&t.body&&t.body.hasOwnProperty("vi_streamline_bin_section")&&!e&&$("#vi_streamline_bin_content").html(t.body.vi_streamline_bin_section)},updateGHSigninState:function(t){if("undefined"!=typeof GH&&GH&&"function"==typeof GH.init1&&GH_config){if(t&&t.GH_cfg)for(key in t=t.GH_cfg)t.hasOwnProperty(key)&&(GH_config[key]=t[key]);GH.init1()}}}})),raptor.defineClass("com.ebay.raptor.vi.AdsAtfTracking",(function(){return{init:function(){window.addEventListener("NAPKIN_RESPONSE_READY",this.onNapkinResponseReady.bind(this)),window.NAPKIN_RESPONSE_READY&&this.onNapkinResponseReady()},ensureTrackingSdk:function(){return new Promise((function(t){if(window.$trk)t();else var e=setInterval((function(){window.$trk&&(clearInterval(e),t())}),50)}))},onNapkinResponseReady:function(){var t=this;this.ensureTrackingSdk().then((function(){var e=window.merch;e&&e.trackingJson&&(t.addTracking(e.trackingJson),delete e.trackingJson)}))},addTracking:function(t){try{var e,i=[];for(e in t)t[e]&&t[e][0]&&i.push(t[e][0]);trackingUtil(["VI_ADS_ATF_PLACEMENTS_TRACKING"],"ex1",JSON.stringify(i))}catch(t){}}}})),raptor.defineClass("com.ebay.raptor.vi.utils.Timer.TimerUtils",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("OFFSCREEN_BID",(function(i){i.sourceOfTimerText=1==i.isOffScreenOnBidLayer?i.sourceOfTimer.text().split(" ")[0]+" "+i.sourceOfTimer.text().split(" ")[1]:i.sourceOfTimer.text(),i.timeLeftOffScreenMessage=t.timeLeftOffScreenMessage,i.offScreenMessage=t.offScreenMessage,e.initializeOffScreenTimer(i)}))},initializeOffScreenTimer:function(t){var e=$("<p />"),i=t.timeLeftOffScreenMessage,n=t.offScreenMessage,s=t.timerId;e.attr("role","timer").attr("aria-live","polite").attr("id",s).addClass("timer-offscreen"),1>t.timeLeft.hour&&($("#"+s)&&0==$("#"+s).length&&t.insertionPoint.append(e),59==t.timeLeft.minute&&59==t.timeLeft.second&&(n=n.replace("##1##",60),$("#"+s).text(i+t.sourceOfTimerText+n)),59>=t.timeLeft.minute&&0==t.timeLeft.second&&0<t.timeLeft.minute&&$("#"+s).text(i+t.sourceOfTimerText),0==t.timeLeft.minute&&59==t.timeLeft.second&&(n=(n=t.offScreenMessage).replace("##1##",15),$("#"+s).text(i+t.sourceOfTimerText+n)),0==t.timeLeft.minute&&(45==t.timeLeft.second||30==t.timeLeft.second||15==t.timeLeft.second)&&$("#"+s).text(i+t.sourceOfTimerText))}}})),raptor.defineModule("raptor.vi.ActionPanelVIM",(function(){return{init:function(t){this.cfg=t,this.pubsub=raptor.require("pubsub"),this.bindClickEventsOnButtons()},bindClickEventsOnButtons:function(){var t=this;t.pubsub.subscribe("VOL_PRICING_MSKU_OPTIONS_CHANGED",(function(e){t.qtyMessageChange(e)}),this),t.pubsub.subscribe("SIO_REVIEW_OFFER_LAYER",(function(e){t.pubsub.publish("_OPEN_OLAY",{cmpId:"sio-modal",trigger:"sio-review-offer-button"}),t.openSioLayer(e)}),this),this.cfg&&"true"===this.cfg.viHotnessSignal&&document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".x-additional-info__textual-display .ux-textspans--EMPHASIS");t&&t.classList.add("x-additional-info__signal-strikeout-price")}))},sioRequestHandler:function(t){var e=!1,i=!1,n=this;n.reviewSioLayerUrl=t,$.ajax({url:t,type:"GET",success:function(t){if("REDIRECT"===t.status&&t.redirectUrl)window.location.href=t.redirectUrl;else{var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=t.cssUrl,s.addEventListener("load",(function(){e=!0,n.renderSioLayer(e,i,t)})),document.head.appendChild(s),(s=document.createElement("script")).src=t.jsUrl,s.type="text/javascript",s.async=!0,s.addEventListener("load",(function(){i=!0,n.renderSioLayer(e,i,t)})),document.body.appendChild(s)}},error:function(t){console.log(t)}})},openSioLayer:function(t){t&&t.sioOfferUrl&&(this.reviewSioLayerUrl=t.sioOfferUrl,t.openLayer&&this.pubsub.publish("_OPEN_OLAY",{cmpId:"sio-modal",trigger:"sio-review-offer-button"}),this.showOrHideSioSpinner("show"),this.sioRequestHandler(t.sioOfferUrl))},showOrHideSioSpinner:function(t){"show"===t?(document.querySelector("#sio-spinner-wrapper").style.display="flex",document.querySelector("#_SIO_CNT_ID").style.display="none"):"hide"===t&&(document.querySelector("#sio-spinner-wrapper").style.display="none",document.querySelector("#_SIO_CNT_ID").style.display="flex")},renderSioLayer:function(t,e,i){var n=this;this.reviewSioLayerUrl&&t&&e&&($(".clzBtn").on("click",(function(){n.pubsub.channel("sio-modal").subscribe("_OLY_CLS_SVC",(function(){n.onOverlayClose()}),n)})),$(document).trigger("_BO_LAYER_UPDATE_RESPONSE",{response:i}),this.showOrHideSioSpinner("hide"))},onOverlayClose:function(){var t=(t=(t=(t=(t=(t=window.location.href).replace(/&*boolp=1/,"")).replace(/&*boolp=5/,"")).replace(/&*autorefresh=true/,"")).replace(/#(\w)+/,""))+(-1!==t.indexOf("?")?"&autorefresh=true":"?autorefresh=true");top.location=t},qtyMessageChange:function(t){var e=this.cfg;if(e&&e.itmVarModel&&t){if(e.itmVarModel&&e.itmVarModel.itemVariationsMap){var i=e.itmVarModel.itemVariationsMap[e.itmVarModel.lowestPriceVariationId];-1!=t.selectedVariationId&&(i=e.itmVarModel.itemVariationsMap[t.selectedVariationId])}t=i?i.quantityAvailable:0;var n=i&&i.almostGone;i=i&&i.lastOne;$("#qtySubTxt").removeClass("vi-VR-qtyAvlbAlgn"),e.supressQty||(0>=e.lotSize?n?($("#qtySubTxt").html('<span class="vi-qtyA-hot vi-capt-txt ">'+e.almostGoneContent+"</span>"),$("#qtySubTxt").addClass("vi-VR-qtyAvlbAlgn")):0<e.availableQtyThreshold&&t>e.availableQtyThreshold?$("#qtySubTxt").html(e.qtyMsgMoreTen.replace("-1",e.availableQtyThreshold)):i?($("#qtySubTxt").html('<span class="vi-qtyA-hot ">'+e.lastOneContent+"</span>"),$("#qtySubTxt").addClass("vi-VR-qtyAvlbAlgn")):0<=t&&($("#qtySubTxt").html(e.qtyMsgAvlb.replace("-1",t)),$("#qtySubTxt").addClass("vi-VR-qtyAvlbAlgn")):1==t?$("#qtySubTxt").html(e.lotMsgAvlb.replace("-1",e.availableQtyThreshold)):0<e.availableQtyThreshold&&t>e.availableQtyThreshold?$("#qtySubTxt").html(e.lotsMsgAvlb.replace("-1",e.availableQtyThreshold)):$("#qtySubTxt").html(e.lotsMsgMoreTenAvlb.replace("-1",e.availableQtyThreshold)))}}}})),raptor.defineClass("raptor.vi.ActionPanelVIMInit",(function(){return{init:function(){}}})),raptor.defineClass("com.ebay.raptor.vi.bid.SSE",(function(){return{isSSEAttached:!1,sseTrackArr:[],sseCount:0,pollLast:null,sseEnabledInBrowser:!1,sseVal:0,sseQueue:[],evtSrc:null,lastSSE:-1,init:function(t){this.conf=t,this.pubsub=raptor.require("pubsub"),this.initValues(t),this.subscribeEvts()},initValues:function(t){this.sseVal=t.sse,this.sseEnabledInBrowser=this.isSSEEnabledInBrowser(),this.itemId=t.itemId,this.bidCount=t.bidCount,this.sseEndPoint=t.sseEndPoint,this.sseRetryLimit=t.sseRetryLimit,this.sseRampRange=t.sseRampRange,this.sseCategoryName=t.sseCategoryName,this.ssePublishTimeWindow=t.ssePublishTimeWindow,this.retryAttempt=0,this.errorInConnect=!1,this.listingSiteId=t.listingSiteId,this.isTrackEvtAttached=!1,this.showSSELog=t.showSSELog,this.evtUrl=this.getEventUrl(this.sseEndPoint,this.sseCategoryName,this.itemId),this.userNameSha=t.userNameSha,this.revisionTimeStamp=t.revisionTimeStamp,this.isConnectedOnce=!1,this.logMaxCount=t.logMaxCount},subscribeEvts:function(){var t=this;t.pubsub.subscribe("_TIME_RANGE_REACHED",(function(){t.pubsub.publish("_STOP_TIME_RANGE_REACHED",{}),t.isSSEEnabled()&&setTimeout((function(){t.attachSSEEvt()}),500)}),t)},isSSEEnabled:function(){return 0<this.sseVal&&this.sseEnabledInBrowser&&0==this.listingSiteId&&!this.errorInConnect&&this.isItemEligibleForSSE(this.itemId,this.sseRampRange)},isItemEligibleForSSE:function(t,e){if(0<t&&0<e){var i=t%100;if(0<=i&&i<=e)return!0}return!1},attachTrackingEvents:function(){this.isTrackEvtAttached||(this.subscribeSSEEvents(),this.attachEvents(),this.isTrackEvtAttached=!0)},attachEvents:function(){var t=this;$(window).off(".SSE"),$(window).on("beforeunload.SSE",(function(){t.postTrackingData()}))},postTrackingData:function(){$(document).trigger("rover",{sid:"p2047675.l6095",ex1:this.getRoverData(this.getTrackArray())})},isPostingNeeded:function(t,e){return!!(t&&t.length>e)},doLimitCheck:function(){this.isPostingNeeded(this.sseTrackArr,this.logMaxCount)&&(this.addToLogArr("LS"),this.postTrackingData(),this.sseTrackArr=this.emptyArr(this.sseTrackArr),this.addToLogArr("LS"))},subscribeSSEEvents:function(){var t=this;t.pubsub.subscribe("AUTO_REFRESH_SVC",(function(e){t.handlePollResponse(e)}),t)},emptyAndAddArr:function(t,e){t?t.splice(0,self.sseQueue.length):t=[],t.push(e)},emptyArr:function(t){return t&&t.splice(0,t.length),t},handlePollResponse:function(t){try{this.isSSEEnabled()&&this.isSSEAttached&&t&&(this.bidCount=t.BidCount,1==this.sseVal?this.addToTrackArr(this.bidCount,!0):2!=this.sseVal&&3!=this.sseVal||(t.sse?this.addToTrackArr("S"+this.bidCount,!1):this.addToTrackArr(this.bidCount,!0),this.sseQueue&&(0<this.sseQueue.length&&this.sseQueue[this.sseQueue.length-1]>this.bidCount?(this.pubsub.publish("_SSE_RESPONSE",{sse:this.sseVal}),this.sseQueue=this.emptyAndAddArr(this.sseQueue,this.bidCount)):this.sseQueue=this.emptyArr(this.sseQueue))),this.sseCount=0)}catch(t){this.addToTrackArr("EPR",!1),this.pubsub.publish("_BID_SSE_ERROR",{})}},handleSSEResponse:function(t){try{if(t){var e=t.BidCount;if(this.lastSSE!=e){try{this.sseCount++,1==this.sseVal?this.addToTrackArr(e,!1):2!=this.sseVal&&3!=this.sseVal||(this.addToTrackArr(e,!1),this.sseQueue.push(e),this.pubsub.publish("_SSE_RESPONSE",{sse:this.sseVal}))}catch(t){this.addToTrackArr("ESR",!1),this.pubsub.publish("_BID_SSE_ERROR",{})}this.lastSSE=e}}}catch(t){this.addToTrackArr("ESR",!1),this.pubsub.publish("_BID_SSE_ERROR",{})}},getRoverData:function(t){return t&&0<t.length?t.join():""},getTrackArray:function(){return this.sseTrackArr||(this.sseTrackArr=[]),this.sseTrackArr},addToTrackArr:function(t,e){if(e){var i="p"+t;this.pollLast?(this.pollLast!=i&&this.addToLogArr(i),this.pollLast=i):(this.pollLast=i,this.addToLogArr(i))}else this.addToLogArr(t);this.doLimitCheck()},isSSEEnabledInBrowser:function(){return"undefined"!=typeof EventSource},addToLogArr:function(t){var e=this.conf;this.sseTrackArr.push(t),e.showSSELog&&this.showSSLog(t)},validateSSEData:function(t){if(t.origin){if(t.origin==this.sseEndPoint)return!0;this.addToLogArr("H")}return!1},getEventUrl:function(t,e,i){return t&&e&&i?t+"/channelservice/evt/"+e+"/"+i:null},attachSSEEvt:function(){var t=this;if(!t.isSSEAttached&&!t.errorInConnect)try{t.evtUrl&&(t.evtSrc&&(t.evtSrc.close(),t.evtSrc=null),t.evtSrc||(t.evtSrc=new EventSource(t.evtUrl)),t.evtSrc?(t.attachTrackingEvents(),t.isSSEAttached=!0,t.evtSrc.addEventListener("bid-event",(function(e){t.validateSSEData(e)&&(e=$.parseJSON(e.data),t.handleSSEResponse(e))}),!1),t.evtSrc.addEventListener("stream_end",(function(e){t.validateSSEData(e)&&t.addToTrackArr("SE",!1),t.pubsub.publish("_BID_SSE_CLOSED",{}),t.evtSrc&&t.evtSrc.close()}),!1),t.evtSrc.onopen=function(){t.addToTrackArr("O",!1),t.retryAttempt=0,t.isConnectedOnce=!0,t.errorInConnect=!1,t.pubsub.publish("_BID_SSE_OPENED",{})},t.evtSrc.onerror=function(e){switch(e.target.readyState){case EventSource.CONNECTING:t.addToTrackArr("R",!1),t.pubsub.publish("_BID_SSE_CLOSED",{});break;case EventSource.CLOSED:t.addToTrackArr("C",!1),t.retryAttempt++,t.retryAttempt>t.sseRetryLimit&&(t.errorInConnect=!0),t.evtSrc&&t.evtSrc.close(),t.isSSEAttached=!1,!t.errorInConnect&&!t.isConnectedOnce&&t.attachSSEEvt(),t.isConnectedOnce&&t.pubsub.publish("_BID_SSE_CLOSED",{})}},t.evtSrc.onmessage=function(){t.addToTrackArr("M",!1)}):t.isSSEAttached=!1)}catch(e){t.addToTrackArr("E",!1),t.pubsub.publish("_BID_SSE_ERROR",{})}},isSSEEligibleByTime:function(t){return!!this.isPublishWindowReached(t,this.ssePublishTimeWindow)},isPublishWindowReached:function(t,e){return t<e},showSSLog:function(t){this.sseLog||(this.sseLog=$('<div style="position:fixed;right: 0px; top: 0px; width: 220px;background-color:white;height:100px;font-weight:bold;color:red;z-index:99999;" id="sseLog"></div>'),$("#Body").append(this.sseLog)),$("#sseLog").html($("#sseLog").html()+"-"+t)}}})),raptor.defineModule("com.ebay.raptor.vi.powerbid.AmountUtils",(function(){return{getBidIncrement:function(t,e){for(var i={USD:{max:[1,5,25,100,250,500,1e3,2500,5e3,-1],inc:[.05,.25,.5,1,2.5,5,10,25,50,100]},CAD:{max:[1,5,25,100,250,500,1e3,2500,5e3,-1],inc:[.05,.25,.5,1,2.5,5,10,25,50,100]},GBP:{max:[1,5,15,60,150,300,600,1500,3e3,-1],inc:[.05,.2,.5,1,2,5,10,20,50,100]},AUD:{max:[1,5,25,100,250,500,1e3,2500,5e3,-1],inc:[.05,.25,.5,1,2.5,5,10,25,50,100]},EUR:{max:[50,500,1e3,5e3,-1],inc:[.5,1,5,10,50]},FRF:{max:[5,25,100,250,500,1e3,2500,1e4,5e4,-1],inc:[.25,.5,1,2.5,5,10,25,100,250,500]},CNY:{max:[41,201,501,1001,2001,5001,10001,-1],inc:[1,5,10,15,25,50,100,200]},HKD:{max:[1,5,25,100,250,500,1e3,2500,5e3,-1],inc:[.1,.2,.5,1,2,5,10,20,50,100]},SGD:{max:[1,5,25,100,250,500,1e3,2500,5e3,-1],inc:[.05,.25,.5,1,2.5,5,10,25,50,100]},INR:{max:[41,201,501,1001,2001,5001,10001,-1],inc:[1,5,10,15,25,50,100,200]},ITL:{max:[2e3,1e4,5e4,2e5,5e5,1e6,2e6,5e6,1e7,-1],inc:[100,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5]},DKK:{max:[10,50,250,500,1e3,2500,5e3,-1],inc:[1,2,5,10,20,50,100,200]},CHF:{max:[50,500,1e3,5e3,-1],inc:[.5,1,5,10,50]},DEM:{max:[100,1e3,1e4,-1],inc:[1,5,10,100]},JPY:{max:[120,600,3e3,12e3,3e4,6e4,12e4,3e5,6e5,-1],inc:[5,30,60,120,240,600,1200,3e3,7500,12e3]},NLG:{max:[110,1100,2200,11e3,-1],inc:[1,2,10,20,100]},NOK:{max:[10,50,250,500,1e3,2500,5e3,-1],inc:[1,2,5,10,20,50,100,200]},PLN:{max:[1,5,25,100,250,500,1e3,2500,5e3,-1],inc:[.05,.25,.5,1,2.5,5,10,25,50,100]},SEK:{max:[10,50,250,500,1e3,2500,5e3,-1],inc:[1,2,5,10,20,50,100,200]},TWD:{max:[501,2501,5001,25001,50001,-1],inc:[15,30,50,100,200,500]}}[t=(t||"usd").toUpperCase()],n=0;n<i.max.length;n++)if(e<i.max[n])return parseFloat(i.inc[n]);return parseFloat(i.inc[i.inc.length-1])},getCurrencySymbol:function(t,e){return"GBP"===e&&-1==t.indexOf("GBP")?"&#163 num":t.replace(/\./gi,"").replace(/\,/gi,"").replace(/[0-9]+/gi,"num")},formatCurrency:function(t,e,i){e=e||",",i=i||".";var n=/(\d+)(\d{3})/;return(t=String(t).replace(/^\d+/,(function(t){for(;n.test(t);)t=t.replace(n,"$1,$2");return t}))).replace(".","*").replace(/,/g,e).replace("*",i)},getMoneyStandard:function(t,e){return t.replace(/num/,e)},getDecimalSeparator:function(t){try{var e=t.charAt(t.length-3);if(","===e||"."===e)return e}catch(t){}return"."},getThousandSeparator:function(t){return"."===t?",":"."},isSpaceGroupSeperator:function(t){return!(!t||!/\s/.test(t))},getThousandSeparatorByAmt:function(t,e){return","==e&&this.isSpaceGroupSeperator(t)?" ":this.getThousandSeparator(e)},parseCurrencyBySeperators:function(t,e,i){var n=!1;return"."!==e&&","!==e||(e="\\"+e),"."===i||","===i?i="\\"+i:" "===i&&(n=!0),e=RegExp(e,"g"),t=t.toString(),t=(t=n?t.replace(/\s/g,""):t.replace(RegExp(i,"g"),"")).replace(e,"."),parseFloat(t)},sanitizeAmt:function(t){var e="";if(t)for(var i=0;i<t.length;i++)e=160==t.charCodeAt(i)?e+" ":e+t.charAt(i);return e},parseCurrencyByCleanAmt:function(t){t=this.sanitizeAmt(t);var e=this.getDecimalSeparator(t),i=this.getThousandSeparatorByAmt(t,e);return this.parseCurrencyBySeperators(t,e,i)},parseCurrency:function(t){var e=this.getDecimalSeparator(t),i=this.getThousandSeparator(e);return"."===e&&(e="\\"+e),"."===i&&(i="\\"+i),i=RegExp(i,"g"),e=RegExp(e,"g"),t=(t=t.toString()).replace(i,"").replace(e,"."),parseFloat(t)},setLocalPrice:function(t){if(void 0!==t.LocalCurrentPrice)try{var e,i,n,s,r=this.parseCurrency(t.PowerBidVal1.CleanAmount),a=this.parseCurrency(t.PowerBidVal2.CleanAmount),o=this.parseCurrency(t.PowerBidVal3.CleanAmount),l=t.LocalCurrentPrice.CurrencyCode,d=t.LocalCurrentPrice.CurrencySymbol,c=this.getCurrencySymbol(t.LocalCurrentPrice.MoneyStandard,l);n=a*(e=(e=this.parseCurrency(t.LocalCurrentPrice.CleanAmount))/this.parseCurrency(t.CurrentPrice.CleanAmount)),s=o*e,i=(i=r*e).toFixed(2),n=n.toFixed(2),s=s.toFixed(2),t.PowerBidVal1Local={CleanAmount:this.formatCurrency(i,t.thousandSeparator,t.decimalSeparator),CurrencySymbol:d,MoneyStandard:this.getMoneyStandard(c,this.formatCurrency(i,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:l},t.PowerBidVal2Local={CleanAmount:this.formatCurrency(n,t.thousandSeparator,t.decimalSeparator),CurrencySymbol:d,MoneyStandard:this.getMoneyStandard(c,this.formatCurrency(n,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:l},t.PowerBidVal3Local={CleanAmount:this.formatCurrency(s,t.thousandSeparator,t.decimalSeparator),CurrencySymbol:d,MoneyStandard:this.getMoneyStandard(c,this.formatCurrency(s,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:l}}catch(t){}return t},setPowerBidVal:function(t){try{t=this.setPowerBidValHelper(t),t=this.setLocalPrice(t)}catch(t){}return t},setPowerBidValHelper:function(t){var e=!1;try{e=e||!1;var i=this.getDecimalSeparator(t.CurrentPrice.CleanAmount),n=this.getThousandSeparator(i);if(t.decimalSeparator=i,t.thousandSeparator=n,void 0===t.PowerBidVal1&&!1===e||void 0===t.PowerBidVal1Local&&e){var s,r,a,o,l=e?t.LocalCurrentPrice:t.CurrentPrice,d=l.CurrencyCode,c=l.Amount,u=l.CurrencySymbol,h=this.getCurrencySymbol(l.MoneyStandard,d);switch(this.getIncrementCase(t)){case 1:s=this.getBidIncrement(d,c),r=c,a=c+s,o=c+2*s;break;case 2:r=(c=e?t.MaximumBidLocal.Amount:t.MaximumBid.Amount)+(s=this.getBidIncrement(d,c)),a=c+2*s,o=c+5*s;break;case 3:r=c+(s=this.getBidIncrement(d,c)),a=c+2*s,o=c+5*s}r=Math.ceil(r),a=Math.ceil(a),o=Math.ceil(o),r!=a&&a!=o&&r!=o||(a+=1,o+=2),t[this.getPowerBidValKey(e,1)]={CleanAmount:this.formatCurrency(r,t.thousandSeparator,t.decimalSeparator),CurrencySymbol:u,MoneyStandard:this.getMoneyStandard(h,this.formatCurrency(r,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:d},t[this.getPowerBidValKey(e,2)]={CleanAmount:this.formatCurrency(a,t.thousandSeparator,t.decimalSeparator),CurrencySymbol:u,MoneyStandard:this.getMoneyStandard(h,this.formatCurrency(a,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:d},t[this.getPowerBidValKey(e,3)]={CleanAmount:this.formatCurrency(o,t.thousandSeparator,t.decimalSeparator),CurrencySymbol:u,MoneyStandard:this.getMoneyStandard(h,this.formatCurrency(o,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:d}}}catch(t){}return t},getPowerBidValKey:function(t,e){return(t?"PowerBidVal1Local":"PowerBidVal1").replace(/[0-9]+/gi,e+"")},getIncrementCase:function(t){return 0===t.BidCount?1:"HIGHBIDDER"===t.ViewerItemRelation?2:"NONE"===t.ViewerItemRelation||"OUTBIDDER"===t.ViewerItemRelation?3:void 0},roundingMakeQuickBid:function(t){try{var e=this.getDecimalSeparator(t.CurrentPrice.CleanAmount),i=this.getThousandSeparator(e);t.decimalSeparator=e,t.thousandSeparator=i;var n=this.parseCurrency(t.PowerBidVal1.CleanAmount),s=this.parseCurrency(t.PowerBidVal2.CleanAmount),r=this.parseCurrency(t.PowerBidVal3.CleanAmount),a=this.getCurrencySymbol(t.PowerBidVal2.MoneyStandard,t.PowerBidVal2.CurrencyCode);n=Math.ceil(n),s=Math.ceil(s),r=Math.ceil(r);n!=s&&s!=r&&n!=r||(s+=1,r+=2),n=n.toFixed(2),s=s.toFixed(2),r=r.toFixed(2),t.PowerBidVal1.CleanAmount=this.formatCurrency(n,t.thousandSeparator,t.decimalSeparator),t.PowerBidVal1.MoneyStandard=this.getMoneyStandard(a,this.formatCurrency(n,t.thousandSeparator,t.decimalSeparator)),t.PowerBidVal2.CleanAmount=this.formatCurrency(s,t.thousandSeparator,t.decimalSeparator),t.PowerBidVal2.MoneyStandard=this.getMoneyStandard(a,this.formatCurrency(s,t.thousandSeparator,t.decimalSeparator)),t.PowerBidVal3.CleanAmount=this.formatCurrency(r,t.thousandSeparator,t.decimalSeparator),t.PowerBidVal3.MoneyStandard=this.getMoneyStandard(a,this.formatCurrency(r,t.thousandSeparator,t.decimalSeparator)),t=this.setLocalPrice(t)}catch(t){}return t},removeDecimalDigits:function(t,e){return(t=t.toString()).substr(t.length-3)===e+"00"&&(t=t.substr(0,t.length-3)),t},setSeparatorSymbols:function(t){var e=this.getDecimalSeparator(t.CurrentPrice.CleanAmount),i=this.getThousandSeparator(e);t.decimalSeparator=e,t.thousandSeparator=i},getMaxPlusOneIncrementPrice:function(t){var e=t.MaximumBid;if(e){var i,n=e.CurrencyCode;return i=e.Amount,e=e.MoneyStandard,this.setSeparatorSymbols(t),e=this.getCurrencySymbol(e,n),increment=this.getBidIncrement(n,i),i=(i+=increment).toFixed(2),{CleanAmount:this.formatCurrency(i,t.thousandSeparator,t.decimalSeparator),MoneyStandard:this.getMoneyStandard(e,this.formatCurrency(i,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:n}}return null},getMaxPlusOneIncrementLocalPrice:function(t){try{return this.getLocalPrice(this.getMaxPlusOneIncrementPrice(t))}catch(t){}return null},getLocalPrice:function(t,e){try{if(e){this.setSeparatorSymbols(t);var i=this.parseCurrency(e.CleanAmount),n=t.LocalCurrentPrice.CurrencyCode,s=this.getCurrencySymbol(t.LocalCurrentPrice.MoneyStandard,n);i=(i=i*(this.parseCurrency(t.LocalCurrentPrice.CleanAmount)/this.parseCurrency(t.CurrentPrice.CleanAmount))).toFixed(2);return{CleanAmount:this.formatCurrency(i,t.thousandSeparator,t.decimalSeparator),MoneyStandard:this.getMoneyStandard(s,this.formatCurrency(i,t.thousandSeparator,t.decimalSeparator)),CurrencyCode:n}}}catch(t){}}}})),raptor.defineClass("raptor.vi.ValueAddedServices",(function(){var t=raptor.require("pubsub");return{init:function(e){this.config=e,this.shopActionBinUrl=e.shopActionBinUrl,this.shopActionAtcUrl=e.shopActionAtcUrl,this.blockingDestination=e.blockingDestination,this.partiallyProvisionedUser=e.partiallyProvisionedUser,this.binXoUrl=e.binXoUrl,this.completedVI=e.completedVI,this.immediatePay=e.immediatePay,this.itemId=e.itemId,this.channelId="ADDON_EVT_CHANNEL."+this.itemId,this.atcAjaxCallInProgress=this.binAjaxCallInProgress=!1,window.addEventListener("load",this.handlePageLoad.bind(this)),this.requestObject={moduleGroups:"VAS_INTERSTITIAL",supportedUxComponents:["VasInterstitialModuleDefault"]},this.shopActionBinUrl&&(t.subscribe("ADDON_CALL_TO_ACTION",this.handleVASCallToAction.bind(this)),t.publish("ADDONS_REQUIRES_CALL_TO_ACTION",{requireAddon:!0,isTireInstallationChecked:!1}),t.subscribe("VAS_CALL_TO_ACTION_PAY_NOW",this.handleVASCallToAction.bind(this))),this.shopActionAtcUrl&&t.subscribe("VAS_CALL_TO_ACTION_ATC",this.handleVASCallToActionFromATCRedesign.bind(this)),t.subscribe("VI_MSKU_POST_VARIATION_SELECTION",this.handleVariationChange.bind(this))},handlePageLoad:function(){window&&window.__RAPTOR_PUBSUB&&(this.channel=window.__RAPTOR_PUBSUB.channel(this.channelId),this.channel.on("ADDON_UPDATE",this.handleAddonUpdate.bind(this)),this.channel.on("VAS_INTERSTITIAL_CTA",this.handleInterstitialCTAResponse.bind(this)))},handleVariationChange:function(t){t&&t.variationId&&(this.variationId=t.variationId,this.channel&&this.channel.emit("ADDON_UPDATE_MSKU",t.variationId))},handleShopActionBinResponse:function(t,e,i){if(this.binAjaxCallInProgress=!1,!t||t&&t.modules&&t.modules.STATUS_MESSAGE&&!t.modules.VAS_INTERSTITIAL_MODULE){if($(document).trigger("rover",{sid:"p2349624.m144737.l147910"}),this.blockingDestination)return void this.showError(!0);window.location=i.defaultActionUrl||i.ru}if(this.showError(!1),t&&t.meta&&t.meta.screenFlowDestination){if(e=t&&t.meta&&t.meta.screenFlowDestination&&t.meta.screenFlowDestination.URL,this.callToActionConfig&&this.callToActionConfig.strmLineBinLayerInput&&!e)return this.showBinNudge(this.callToActionConfig),void(this.callToActionConfig=null);if(e)return void(window.location=e)}t&&t.modules&&t.modules.VAS_INTERSTITIAL_MODULE&&(this.srt=t.srt,i=this.getVasModelName(t,i),this.channel.emit("VAS_RENDER_INTERSTITIAL",{modelName:i,model:t,config:{shopActionBinUrl:this.shopActionBinUrl,shopActionUrl:this.shopActionBinUrl,urlParams:{}}}))},handleShopActionAtcResponse:function(e,i,n){if(this.atcAjaxCallInProgress=!1,!e||e&&e.modules&&e.modules.STATUS_MESSAGE&&!e.modules.VAS_INTERSTITIAL_MODULE){if($(document).trigger("rover",{sid:"p2349624.m144737.l147910"}),this.blockingDestination)return void this.showError(!0);window.location=n.defaultActionUrl||n.ru}this.showError(!1),e&&e.modules&&e.modules.VAS_INTERSTITIAL_MODULE?(this.srt=e.srt,i=this.getVasModelName(e,n),this.channel.emit("VAS_RENDER_INTERSTITIAL",{modelName:i,model:e,config:{shopActionUrl:this.shopActionAtcUrl,urlParams:{}}})):this.atcRedesignConfig&&e&&e.modules&&!e.modules.VAS_INTERSTITIAL_MODULE?(t.publish("_TRG_CLK_ATCREDESIGN_BTN",this.atcRedesignConfig),this.atcRedesignConfig=null):(e=e&&e.meta&&e.meta.screenFlowDestination&&e.meta.screenFlowDestination.URL)&&(window.location=e)},getVasModelName:function(t,e){return"INSTALLATION"===(t&&t.modules&&t.modules.VAS_META&&t.modules.VAS_META.eligibleVASTypes&&t.modules.VAS_META.eligibleVASTypes.length&&0<t.modules.VAS_META.eligibleVASTypes.length&&t.modules.VAS_META.eligibleVASTypes[0])?"VAS_INTERSTITIAL_TIRE_INSTALLATION":e.moduleGroups},handleInterstitialCTAResponse:function(t){t&&t.success&&(this.callToActionConfig&&this.callToActionConfig.strmLineBinLayerInput?(this.showBinNudge(this.callToActionConfig),this.callToActionConfig=null):(t=t&&t.response&&t.response.meta&&t.response.meta.screenFlowDestination&&t.response.meta.screenFlowDestination.URL)&&(window.location=t))},showError:function(t){var e=document.querySelector("#vi-vas-error");e&&(e.style.display=t?"block":"none")},callShopActionView:function(t,e,i){if(e){var n=location.search;n&&"function"==typeof URLSearchParams&&(n=new URLSearchParams(n))&&"function"==typeof n.has&&n.has("mock")&&(e+="&mock=1"),$.ajax({url:e,type:"POST",dataType:"json",data:t,crossDomain:!0,xhrFields:{withCredentials:!0},success:function(e){i(e,null,t)},error:function(e){console.log("VAS Err:",e),i(null,e,t)}})}},handleVASCallToActionFromATCRedesign:function(t){if(!this.atcAjaxCallInProgress){this.atcAjaxCallInProgress=!0,this.atcRedesignConfig=t;try{var e=JSON.parse(JSON.stringify(this.requestObject)),i=$("#qtyTextBox");e.quantity=i&&0<i.length?i.val():"1",this.variationId&&0<Number(this.variationId)&&(e.variationId=this.variationId),e.itemId=t.itemId;var n=t.submitURL;t.itemId&&e.quantity&&(n+="&item=iid:"+t.itemId+",qty:"+e.quantity),e.ru=n,e.defaultActionUrl=n,e.partialProvisionedAccount=this.partiallyProvisionedUser,this.callShopActionView(e,this.shopActionAtcUrl,this.handleShopActionAtcResponse.bind(this))}catch(t){console.error(t)}}},handleVASCallToAction:function(t){if(t){this.callToActionConfig=t;try{var e=JSON.parse(JSON.stringify(this.requestObject));if(e.quantity=t.itemQuantity?t.itemQuantity:"1",e.itemId=t.itemId,t&&t.transactionId&&(e.transactionId=t.transactionId),e.ru=t.submitURL,e.defaultActionUrl=t.submitURL,!0!==this.immediatePay?(e.alternateActionUrl=this.binXoUrl,e.immediatePay="false"):e.immediatePay="true",this.variationId&&0<Number(this.variationId)&&(e.variationId=this.variationId),e.partialProvisionedAccount=this.partiallyProvisionedUser,this.completedVI){var i=document.querySelector("#vim-vas");document.querySelector("#vim-vas .vas-container-hub-d").style.display="none",i.classList.remove("vas-hide")}"BUY_IT_NOW"===t.actionButtonType?this.binAjaxCallInProgress||(this.binAjaxCallInProgress=!0,this.callShopActionView(e,this.shopActionBinUrl,this.handleShopActionBinResponse.bind(this))):"PAY_NOW"===t.actionButtonType?this.binAjaxCallInProgress||(this.binAjaxCallInProgress=!0,this.callShopActionView(e,t.shopActionPaynowUrl,this.handleShopActionBinResponse.bind(this))):this.atcAjaxCallInProgress||(this.atcAjaxCallInProgress=!0,this.callShopActionView(e,this.shopActionAtcUrl,this.handleShopActionAtcResponse.bind(this)))}catch(t){console.error(t)}}},handleAddonUpdate:function(t){t&&(this.requestObject.selectedServices=this.getSelectedServices(t),this.requestObject.eligibleServices=t.eligibleServices,(t=$("#qtyTextBox"))&&0<t.length)&&(this.requestObject.quantity=t.val())},getSelectedServices:function(t){var e={},i=t&&t.addons;return t&&t.selectedServices?t.selectedServices:i&&i.length&&0<i.length?(t.addons.forEach((function(t){var i=t.value||"";t=t.type;Object.keys(e).includes(t)?e[t].push(i.toString()):e[t]=[i.toString()]})),e):void 0},showBinNudge:function(e){e.isVIMAddonConfig?document.dispatchEvent(new CustomEvent("vi__d-cta-bin-nudge__open-bin-nudge-overlay__trigger_clik",{detail:e.strmLineBinLayerInput})):t.publish("SHOW_STREAMLINE_BIN_OVERLAY",e.strmLineBinLayerInput)}}})),raptor.defineClass("com.ebay.raptor.vi.AdsTracking",(function(){return{init:function(t){var e=this;e.pubsub=raptor.require("pubsub"),e.pubsub.subscribe("Ads_NORI_RESPONSE",(function(i){e.addTracking(i,t)}),e)},addTracking:function(t,e){try{var i={};i.viac=e.adIds,i.viar=[];var n,s=t.response.modules;for(n in s)i.viar.push(n.replace("ADS_PLMT_",""));i.viad=t.duration,trackingUtil(["VI_ADS_CLIENT_MODULE_TRACKING"],i)}catch(t){console.log(t)}}}})),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}(),raptor.defineModule("com.ebay.raptor.vi.VIMMsgHandlerMap",(function(){var t={TRIGGER_CLICK_ON_MAIN_IMG_FILMSTRIP:"_TRIGGER_CLICK_ON_MAIN_IMG_FILMSTRIP",TRIGGER_MSKU_IMG_GROUPING:"_TRIGGER_MSKU_IMG_GROUPING",GROUP_MSKU_IMAGES:"_GROUP_MSKU_IMAGES",MSKU_CHANGE:["VOL_PRICING_MSKU_DEFAULT_OPTION","VOL_PRICING_MSKU_OPTIONS_CHANGED","MSKU_USER_LIST_UPDATE"],VI_MSKU_POST_VARIATION_SELECTION:"VI_MSKU_POST_VARIATION_SELECTION",SAFE_CUSTOMIZATION_MESSAGE:"SAFE_CUSTOMIZATION_MESSAGE",TRG_CLK_ATCREDESIGN_BTN:"_TRG_CLK_ATCREDESIGN_BTN",SUBMIT_BINBTN:"_SUBMIT_BINBTN",ENABLE_BINBTN:"ENABLE_BINBTN",OPEN_ADDONS_SHIPPING_OVERLAY:"OPEN_ADDONS_SHIPPING_OVERLAY",ADDONS_FOR_VARIATION:"ADDONS_FOR_VARIATION",VALIDATE_MSKU_VARIATIONS:"_VALIDATE_MSKU_VARIATIONS",_BEST_OFFER_SVC_ID:"_BEST_OFFER_SVC_ID",OPEN_BEST_OFFER_LAYER:"OPEN_BEST_OFFER_LAYER",SIO_REVIEW_OFFER_LAYER:"SIO_REVIEW_OFFER_LAYER",VAS_CALL_TO_ACTION_PAY_NOW:"VAS_CALL_TO_ACTION_PAY_NOW",ADDON_CALL_TO_ACTION:"ADDON_CALL_TO_ACTION",ADD_TO_WATCH_BTN:"_ADD_TO_WATCH_BTN",ADD_TO_WATCH_LNK:"_ADD_TO_WATCH_LNK",ADD_TO_WATCH_MSG_STATUS_TRIGGERED:"ADD_TO_WATCH_MSG_STATUS_TRIGGERED",LIST_ADD_SVC_ID:"_LIST_ADD_SVC_ID",TRIGGER_LIST_REMOVE:"TRIGGER_LIST_REMOVE",STATUS_PANEL_LIST_SVC_INIT:"STATUS_PANEL_LIST_SVC_INIT",ADD_TO_CART_POST_CLICK:"ADD_TO_CART_POST_CLICK",ADD_TO_WATCH_POST_CLICK:"ADD_TO_WATCH_POST_CLICK",STATUS_MESSAGE_ONLOAD:"STATUS_MESSAGE_ONLOAD",TRIGGER_REMOVE_SVC_ID:"_TRIGGER_REMOVE_SVC_ID"},e={TRIGGER_CLICK_ON_MAIN_IMG_FILMSTRIP:"vi__x-image-gallery__refresh-image",TRIGGER_MSKU_IMG_GROUPING:"vi__x-image-gallery__refresh-image-completed",GROUP_MSKU_IMAGES:"vi__x-image-gallery__refresh-group-images",MSKU_CHANGE:"vi__x-msku__change__variation-update",VI_MSKU_POST_VARIATION_SELECTION:"vi__x-msku__change-post-validation",SAFE_CUSTOMIZATION_MESSAGE:"vi__x-customization__message",TRG_CLK_ATCREDESIGN_BTN:"vi__x-buybox__trigger-atc-click",SUBMIT_BINBTN:"vi__x-customization__bin",ENABLE_BINBTN:"vi__x-customization__enable-bin",OPEN_ADDONS_SHIPPING_OVERLAY:"vi__d-shipping__open-addons-overlay",OPEN_ADDONS_OVERLAY:"vi__d-open-addons-overlay",ADDONS_FOR_VARIATION:"vi__d-shipping__handle_variation_change",VALIDATE_MSKU_VARIATIONS:"ux-app__x-msku__do-validation",QTY_VALIDATION_OUTPUT:"ux-app__x-quantity__VALIDATION_OUTPUT",OPEN_BEST_OFFER_LAYER:"ux-app__x-offer-action__do-offeraction",SIO_REVIEW_OFFER_LAYER:"ux-app__x-offer-action__do-sio-offeraction",ADDON_CALL_TO_ACTION:"vim__addon_call_to_action",ADD_TO_WATCH_BTN:"ux-app__x-watch-action__post_action",ADD_TO_WATCH_LNK:"ux__x-watch-action__proxy-watch-click",ADD_TO_WATCH_MSG_STATUS_TRIGGERED:"ux-app__x-watch-action__post_action",LIST_ADD_SVC_ID:"ux-app__x-watch-action__post_action_list_add_svc_id",TRIGGER_LIST_REMOVE:"ux-app__x-watch-action__post_action_trigger_list_remove",STATUS_PANEL_LIST_SVC_INIT:"ux-app__x-watch-action__post_action_status_panel",ADD_TO_CART_POST_CLICK:"vi__x-atc-action__post-click",ADD_TO_WATCH_POST_CLICK:"vi__x-watch-action__post-click",STATUS_MESSAGE_ONLOAD:"ux-app__d-statusmessage_on-load",TRIGGER_REMOVE_SVC_ID:"ux-app__d-statusmessage__post_action_trigger_remove_svc",VAS_CALL_TO_ACTION_PAY_NOW:"ux-app__d-statusmessage__vas-call-to-action-paynow"};return function(){return{pubsubEvents:t,customEvents:e}}})),function(){var t,e=raptor.require("pubsub"),i=raptor.require("com.ebay.raptor.vi.VIMMsgHandlerMap")(),n=function(t,e){window.VIM&&window.VIM.VI_nonProd&&console&&"function"==typeof console.log&&(e&&1===e?console.log("%c"+t,"color:red; background:yellow;"):console.log(t))},s=function(t,e){if(void 0!==e&&"object"!=typeof e)throw Error("Data must be a JSON object for the event "+t);return!0},r=function(t,i){if(i){"string"==typeof t&&(t=[t]),"string"==typeof i&&(i=[i]);for(var r=0;r<i.length;r++){var a=i[r];document.addEventListener(a,(function(i){if(s(a,i.detail))for(var r=0;r<t.length;r++){var o=Object.assign({},i.detail);o.isCalledFromBridge||(n("Broadcasting "+a+" --\x3e "+t[r]),o.isCalledFromBridge=!0,e.publish(t[r],o))}}))}for(r=0;r<t.length;r++){var o=t[r];e.subscribe(o,(function(t){if(s(o,t))for(var e=0;e<i.length;e++){var r=Object.assign({},t);r.isCalledFromBridge||(n("Broadcasting "+o+" --\x3e "+i[e]),r.isCalledFromBridge=!0,document.dispatchEvent(new CustomEvent(i[e],{detail:r})))}}),this)}}};for(t in i.pubsubEvents)i.pubsubEvents.hasOwnProperty(t)&&r(i.pubsubEvents[t],i.customEvents[t])}(),raptor.defineModule("com.ebay.raptor.vi.tracking.SitespeedTimers",(function(t){return{init:function(e){var i=this;i.cfg=e,i.scrollx=0,i.scrolly=0,i.Profiler=t.require("ebay.profiler.Profiler"),"undefined"!=typeof oGaugeInfo&&(i.min_scroll_time_=200,i.scroll_timer_=null,i.last_scroll_time_=0,i.winH=$(window).height(),i.Profiler.addParam("i_1i",i.winH+$(document).scrollTop()),i.Profiler.addParam("i_0i",i.winH),$(window).load((function(){i.loadHandler()})),$(window).scroll((function(){i.lazy_onscroll()})),"function"==typeof window.postMessage&&(window.addEventListener?window.addEventListener("message",(function(){i.loadHandler()}),!1):window.attachEvent("onmessage",(function(){i.loadHandler()}),!1)),i.chunkTimers(),i.addEventListener())},addEventListener:function(){try{var e=this;e.Profiler=t.require("ebay.profiler.Profiler"),"undefined"!=typeof oGaugeInfo&&$(document).on("BflTimer",(function(t,i){i&&"placebid"===i.type&&e.Profiler.addParam("i_16i",i.diff),$(document).trigger("rover",i)}))}catch(t){window.console&&window.console.log(t)}},loadHandler:function(){var t=this.cfg.itemId,e=$(document).width(),i=$(document).height();this.Profiler.addParam("i_2i",e+"|"+i+"^"+t)},scrollHandler:function(){var t=this.winH+$(document).scrollTop();this.scrolly<t&&(this.bw=this.scrolly=t),this.Profiler.addParam("i_1i",this.scrolly)},lazy_onscroll:function(){var t=this;if(!t.scroll_timer_){var e=(new Date).getTime(),i=t.min_scroll_time_;e-t.last_scroll_time_>t.min_scroll_time_&&(i=0),t.scroll_timer_=window.setTimeout((function(){t.last_scroll_time_=(new Date).getTime(),t.scrollHandler(),t.scroll_timer_=null}),i)}},chunkTimers:function(){topEnd&&centerStart&&0!=topEnd&&0!=centerStart&&this.Profiler.addParam("i_5i",centerStart-topEnd)}}}));